<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>The Nimbus Beacon Chain Book</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="custom.css">
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="intro.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="philosophy.html"><strong aria-hidden="true">2.</strong> Design goals</a></li><li class="chapter-item expanded "><a href="hardware.html"><strong aria-hidden="true">3.</strong> System requirements</a></li><li class="chapter-item expanded "><a href="preparation.html"><strong aria-hidden="true">4.</strong> Mainnet checklist</a></li><li class="chapter-item expanded affix "><li class="part-title">Quickstart</li><li class="chapter-item expanded "><a href="quick-start.html"><strong aria-hidden="true">5.</strong> Run the beacon node</a></li><li class="chapter-item expanded "><a href="run-a-validator.html"><strong aria-hidden="true">6.</strong> Run a validator</a></li><li class="chapter-item expanded affix "><li class="part-title">How-to (beacon node)</li><li class="chapter-item expanded "><a href="install.html"><strong aria-hidden="true">7.</strong> Install dependencies</a></li><li class="chapter-item expanded "><a href="build.html"><strong aria-hidden="true">8.</strong> Build the beacon node</a></li><li class="chapter-item expanded "><a href="start-syncing.html"><strong aria-hidden="true">9.</strong> Sync the beacon node</a></li><li class="chapter-item expanded "><a href="web3-backup.html"><strong aria-hidden="true">10.</strong> Add a backup web3 provider</a></li><li class="chapter-item expanded affix "><li class="part-title">How-to (validator)</li><li class="chapter-item expanded "><a href="deposit.html"><strong aria-hidden="true">11.</strong> Make a deposit</a></li><li class="chapter-item expanded "><a href="keys.html"><strong aria-hidden="true">12.</strong> Import your validator keys</a></li><li class="chapter-item expanded "><a href="connect-eth2.html"><strong aria-hidden="true">13.</strong> Connect your validator to eth2</a></li><li class="chapter-item expanded "><a href="keep-an-eye.html"><strong aria-hidden="true">14.</strong> Keep an eye on your validator</a></li><li class="chapter-item expanded "><a href="more-keys.html"><strong aria-hidden="true">15.</strong> Recover / generate keys</a></li><li class="chapter-item expanded "><a href="voluntary-exit.html"><strong aria-hidden="true">16.</strong> Perform a voluntary exit</a></li><li class="chapter-item expanded "><a href="additional-validator.html"><strong aria-hidden="true">17.</strong> Add an additional validator</a></li><li class="chapter-item expanded "><a href="attestation-performance.html"><strong aria-hidden="true">18.</strong> Monitor attestation performance</a></li><li class="chapter-item expanded affix "><li class="part-title">How-to (misc)</li><li class="chapter-item expanded "><a href="keep-updated.html"><strong aria-hidden="true">19.</strong> Update Nimbus</a></li><li class="chapter-item expanded "><a href="eth1.html"><strong aria-hidden="true">20.</strong> Run an eth1 node</a></li><li class="chapter-item expanded "><a href="goerli-eth.html"><strong aria-hidden="true">21.</strong> Obtain Goerli ETH</a></li><li class="chapter-item expanded "><a href="beacon-node-systemd.html"><strong aria-hidden="true">22.</strong> Set up a systemd service</a></li><li class="chapter-item expanded "><a href="log-rotate.html"><strong aria-hidden="true">23.</strong> Set up log rotation</a></li><li class="chapter-item expanded "><a href="checksums.html"><strong aria-hidden="true">24.</strong> Verify the integrity of Nimbus</a></li><li class="chapter-item expanded "><a href="database-backup.html"><strong aria-hidden="true">25.</strong> Back up your database</a></li><li class="chapter-item expanded "><a href="log-levels.html"><strong aria-hidden="true">26.</strong> Change log level</a></li><li class="chapter-item expanded "><a href="email-notifications.html"><strong aria-hidden="true">27.</strong> Set up email notifications</a></li><li class="chapter-item expanded "><a href="graffiti.html"><strong aria-hidden="true">28.</strong> Graffiti the blockchain</a></li><li class="chapter-item expanded "><a href="profits.html"><strong aria-hidden="true">29.</strong> Optimise for profitability</a></li><li class="chapter-item expanded "><a href="health.html"><strong aria-hidden="true">30.</strong> Monitor the health of your node</a></li><li class="chapter-item expanded "><a href="networking.html"><strong aria-hidden="true">31.</strong> Networking</a></li><li class="chapter-item expanded affix "><li class="part-title">Guides</li><li class="chapter-item expanded "><a href="metrics-pretty-pictures.html"><strong aria-hidden="true">32.</strong> Grafana and Prometheus</a></li><li class="chapter-item expanded "><a href="infura-guide.html"><strong aria-hidden="true">33.</strong> Create your own Infura endpoint</a></li><li class="chapter-item expanded "><a href="migration.html"><strong aria-hidden="true">34.</strong> Migrate from another client</a></li><li class="chapter-item expanded "><a href="pi-guide.html"><strong aria-hidden="true">35.</strong> Validate with a Raspberry Pi</a></li><li class="chapter-item expanded affix "><li class="part-title">Downloads</li><li class="chapter-item expanded "><a href="binaries.html"><strong aria-hidden="true">36.</strong> Download binaries</a></li><li class="chapter-item expanded "><a href="docker.html"><strong aria-hidden="true">37.</strong> Download Docker images</a></li><li class="chapter-item expanded affix "><li class="part-title">Reference</li><li class="chapter-item expanded "><a href="api.html"><strong aria-hidden="true">38.</strong> JSON-RPC API</a></li><li class="chapter-item expanded "><a href="rest-api.html"><strong aria-hidden="true">39.</strong> REST API</a></li><li class="chapter-item expanded "><a href="options.html"><strong aria-hidden="true">40.</strong> Help / Command line options</a></li><li class="chapter-item expanded "><a href="migration-options.html"><strong aria-hidden="true">41.</strong> Advanced migration options</a></li><li class="chapter-item expanded "><a href="troubleshooting.html"><strong aria-hidden="true">42.</strong> Troubleshooting</a></li><li class="chapter-item expanded "><a href="developers.html"><strong aria-hidden="true">43.</strong> For developers</a></li><li class="chapter-item expanded "><a href="contribute.html"><strong aria-hidden="true">44.</strong> Contribute</a></li><li class="chapter-item expanded "><a href="resources.html"><strong aria-hidden="true">45.</strong> Resources</a></li><li class="chapter-item expanded "><a href="distribution_internals.html"><strong aria-hidden="true">46.</strong> Binary distribution internals</a></li><li class="chapter-item expanded "><a href="prater.html"><strong aria-hidden="true">47.</strong> Prater: What you should know</a></li><li class="chapter-item expanded "><a href="audit.html"><strong aria-hidden="true">48.</strong> Security Audit</a></li><li class="chapter-item expanded "><a href="faq.html"><strong aria-hidden="true">49.</strong> FAQ</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">The Nimbus Beacon Chain Book</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        <a href="https://github.com/status-im/nimbus-eth2" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#the-nimbus-book" id="the-nimbus-book">The Nimbus book</a></h1>
<p><em>This book focuses on our consensus layer client. If you're eager to get started, check out our <a href="./quick-start.html">quickstart guide</a>.</em></p>
<p>Nimbus is a client implementation for both the <code>consensus layer</code> (eth2) and <code>execution layer</code> (eth1) that strives to be as <a href="https://our.status.im/ethereum-is-green/">lightweight as possible</a> in terms of resources used. This allows it to perform well on embedded systems, resource-restricted devices -- including Raspberry Pis and mobile devices.</p>
<p>However, resource-restricted hardware is not the only thing Nimbus is good for. Its low resource consumption makes it easy to run Nimbus together with other workloads on your server (this is especially valuable for stakers looking to lower the cost of their server instances).</p>
</br>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">&quot;just because it [Nimbus] is optimized to be minimally resource intensive, doesn&#39;t mean you can&#39;t run it on a server. It means that when you do run it on a server, it is consuming a lot less resources.&quot; <a href="https://t.co/F2sdZouBtD">https://t.co/F2sdZouBtD</a></p>&mdash; Nimbus (@ethnimbus) <a href="https://twitter.com/ethnimbus/status/1376836270245154817?ref_src=twsrc%5Etfw">March 30, 2021</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</br>
<p>This book explains the ways in which you can use Nimbus to either monitor the eth2 chain or become a fully-fledged validator.</p>
<blockquote>
<p><strong>N.B.</strong> The reality is that we are very early in the eth2 validating life cycle. Validating is not for everyone yet, and it comes with both risks and responsibilities. It isn't a particularly easy way to make money. You'll need to put effort into updating your software, researching hard-forks, having a robust setup... . As such, you should only stake if you are genuinely interested in securing the protocol.</p>
</blockquote>
<h3><a class="header" href="#helpful-resources" id="helpful-resources">Helpful resources</a></h3>
<ul>
<li>
<p><a href="https://github.com/status-im/nimbus-eth2">nimbus-eth2 repository</a></p>
</li>
<li>
<p><a href="https://github.com/ethereum/consensus-specs/tree/v1.0.1#phase-0">eth2 specification</a></p>
</li>
<li>
<p><a href="https://benjaminion.xyz/eth2-annotated-spec/phase0/beacon-chain/">Ben Edgington's annotated spec</a> </p>
</li>
<li>
<p><a href="https://github.com/ethereum/annotated-spec/blob/master/phase0/beacon-chain.md">Vitalik's annotated spec</a></p>
</li>
<li>
<p><a href="https://notes.ethereum.org/@djrtwo/Bkn3zpwxB">Danny Ryan's annotated spec</a></p>
</li>
</ul>
<h3><a class="header" href="#get-in-touch" id="get-in-touch">Get in touch</a></h3>
<p>Need help with anything? Join us on <a href="https://join.status.im/nimbus-general">Status</a> and <a href="https://discord.gg/9dWwPnG">Discord</a>.</p>
<h3><a class="header" href="#donate" id="donate">Donate</a></h3>
<p>If you'd like to contribute to Nimbus development, our donation address is <a href="https://etherscan.io/address/0x70E47C843E0F6ab0991A3189c28F2957eb6d3842"><code>0x70E47C843E0F6ab0991A3189c28F2957eb6d3842</code></a></p>
<h3><a class="header" href="#stay-updated" id="stay-updated">Stay updated</a></h3>
<p>Subscribe to our newsletter <a href="https://subscribe.nimbus.guide/">here</a>.</p>
<h3><a class="header" href="#disclaimer" id="disclaimer">Disclaimer</a></h3>
<p>This documentation assumes Nimbus is in its ideal state. The project is still under active development. Please submit a <a href="https://github.com/status-im/nimbus-eth2/issues">Github issue</a> if you come across a problem.</p>
<!-- > > > TODO:

1. fill up the gitbook content
2. write questions in the faq.md page -->
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/intro.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#design-goals" id="design-goals">Design goals</a></h1>
<p>One of our most important design goals is an application architecture that makes it <strong>simple to embed Nimbus into other software.</strong></p>
<p>Another is to <strong>minimize reliance on third-party software.</strong></p>
<p>A third is for the application binary to be as <strong>lightweight as possible in terms of resources used.</strong></p>
<h3><a class="header" href="#integration-with-status" id="integration-with-status">Integration with Status</a></h3>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">I can&#39;t wait to run Nimbus straight from Status Desktop <a href="https://twitter.com/hashtag/hyped?src=hash&amp;ref_src=twsrc%5Etfw">#hyped</a></p>&mdash; JARRAÐ HOPΞ (@jarradhope) <a href="https://twitter.com/jarradhope/status/1293473249347555334?ref_src=twsrc%5Etfw">August 12, 2020</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>As part of our first design goal, our primary objective here is for Nimbus to be tightly integrated into the <a href="https://status.im/">Status messaging app</a>.</p>
<p>Our dream is for you to be able to run and monitor your validator straight from Status desktop.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/philosophy.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#system-requirements-recommended" id="system-requirements-recommended">System requirements (recommended)</a></h1>
<hr />
<p><strong>Operating System:</strong> Linux <a href="https://en.wikipedia.org/wiki/64-bit_computing">64-bit</a>, Windows 64-bit, macOS X 10.14+,</p>
<p><strong>Memory:</strong> 4GB RAM</p>
<p><strong>Storage:</strong> 160GB SSD</p>
<p><strong>Internet:</strong> Reliable broadband connection</p>
<hr />
<p>Note that in order to process incoming validator deposits from the eth1 chain, you will need to run an eth1 client in parallel to your eth2 client. While it is possible to use a third-party service like <a href="/infura-guide.html">Infura</a>, if you choose to run your own eth1 client locally, you'll need more memory and storage.</p>
<p>For example, you'll need at least another <strong>500GB SSD</strong> to run <a href="/eth1.html">geth fast sync</a> on mainnet.</p>
<p>To future proof your setup we recommend a <strong>1TB SSD</strong>.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/hardware.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#mainnet-checklist" id="mainnet-checklist">Mainnet checklist</a></h1>
<h2><a class="header" href="#latest-software" id="latest-software">Latest software</a></h2>
<p>Please check that you are running the latest stable <a href="https://github.com/status-im/nimbus-eth2/releases">Nimbus software release</a>.</p>
<blockquote>
<p><strong>Note:</strong> If you are setting up your client before launch, it is your responsibility  to check for any new software releases in the run up to launch. At the minimum you should check the <a href="https://github.com/status-im/nimbus-eth2/releases">release page</a> weekly.</p>
</blockquote>
<h2><a class="header" href="#more-than-50-peers" id="more-than-50-peers">More than 50 peers</a></h2>
<p>Please check that your node has at least 50 peers. To monitor your peer count, pay attention to the <a href="keep-an-eye.html#keep-track-of-your-syncing-progress"><code>Slot start</code> messages in your logs</a>.</p>
<h2><a class="header" href="#validator-attached" id="validator-attached">Validator attached</a></h2>
<p>Please check that your <a href="keep-an-eye.html#make-sure-your-validator-is-attached">validator is attached</a> to your node.</p>
<h2><a class="header" href="#systemd" id="systemd">Systemd</a></h2>
<p>Now that you have Nimbus up and running, we recommend <a href="https://www.raspberrypi.org/documentation/linux/usage/systemd.md">setting up a systemd service</a> with an autorestart on boot (should you experience an unexpected power outage, this will ensure your validator restarts correctly). </p>
<p>Systemd will also ensure your validator keeps running when you exit your ssh session (<code>Ctrl-C</code>) and/or switch off your laptop.</p>
<p>For the details on how to do this, see <a href="./beacon-node-systemd.html">this page</a>.</p>
<h2><a class="header" href="#ethereum-foundations-checklist" id="ethereum-foundations-checklist">Ethereum Foundation's Checklist</a></h2>
<p>Ad a final check, we recommend you also go through the EF'S <a href="https://launchpad.ethereum.org/checklist">staker checklist</a>.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/preparation.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#run-the-beacon-node" id="run-the-beacon-node">Run the beacon node</a></h1>
<p>This page takes you through how to run just the beacon node <strong>without a validator attached.</strong></p>
<p>The beacon node connects to the eth2 network, manages the blockchain, and provides API's to interact with the beacon chain.</p>
<p>Running a beacon node without a validator attached is a <a href="https://vitalik.ca/general/2021/05/23/scaling.html#its-crucial-for-blockchain-decentralization-for-regular-users-to-be-able-to-run-a-node">worthwhile endeavor</a>.</p>
<p>It's also a necessary step to running a validator (since an active validator requires a synced beacon node).</p>
<h2><a class="header" href="#1-install" id="1-install">1. Install</a></h2>
<p><a href="./install.html#external-dependencies">Install Nimbus' dependencies</a> </p>
<h2><a class="header" href="#2-build" id="2-build">2. Build</a></h2>
<p><a href="./build.html">Build the beacon node</a> or install a precompiled release from the <a href="https://github.com/status-im/nimbus-eth2/releases/latest">Nimbus eth2 releases page</a>.</p>
<h2><a class="header" href="#3-sync" id="3-sync">3. Sync</a></h2>
<p><a href="./start-syncing.html">Sync the chain</a></p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/quick-start.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#run-a-validator" id="run-a-validator">Run a validator</a></h1>
<p>Once your beacon node is <a href="./quick-start.html">running and synced</a>, the next step is to run a validator.</p>
<h2><a class="header" href="#1-deposit" id="1-deposit">1. Deposit</a></h2>
<p><a href="./deposit.html">Make a deposit</a> for your validator</p>
<h2><a class="header" href="#2-import" id="2-import">2. Import</a></h2>
<p><a href="./keys.html">Import your validator keys</a> into Nimbus</p>
<h2><a class="header" href="#3-connect" id="3-connect">3. Connect</a></h2>
<p><a href="./connect-eth2.html">Connect your validator</a> to eth2</p>
</br>
<hr />
</br>
<p>While that's all there is to it, it is essential that you both <a href="keep-an-eye.html">keep an eye on your validator</a> and <a href="keep-updated.html">keep Nimbus updated</a> regularly 💫</p>
</br>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/run-a-validator.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#install-dependencies" id="install-dependencies">Install dependencies</a></h1>
<p>The Nimbus beacon chain can run on Linux, macOS, Windows, and Android. At the moment, Nimbus has to be built from source, which means you'll need to install some dependencies.</p>
<h2><a class="header" href="#time" id="time">Time</a></h2>
<p>The beacon chain relies on your computer having the correct time set (plus or minus 0.5 seconds).</p>
<p>We recommended you run a high quality time service on your computer such as:</p>
<ul>
<li>GPS</li>
<li>NTS (network time security, <a href="https://tools.ietf.org/html/draft-ietf-ntp-using-nts-for-ntp-19">IETF draft</a>)</li>
<li><a href="https://roughtime.googlesource.com/roughtime">Roughtime</a> (google)</li>
</ul>
<p>At a minimum, you should run an NTP client on the server.</p>
<blockquote>
<p><strong>Note:</strong> Most operating systems (including macOS') automatically sync with NTP by default.</p>
</blockquote>
<p>If the above sounds like latin to you, don't worry. You should be fine as long as you haven't messed around with the time and date settings on your computer (they should be set automatically).</p>
<h2><a class="header" href="#external-dependencies" id="external-dependencies">External Dependencies</a></h2>
<ul>
<li>Developer tools (C compiler, Make, Bash, Git)</li>
</ul>
<p>Nimbus will build its own local copy of Nim, so Nim is not an external dependency,</p>
<h3><a class="header" href="#linux" id="linux">Linux</a></h3>
<p>On common Linux distributions the dependencies can be installed with</p>
<pre><code class="language-sh"># Debian and Ubuntu
sudo apt-get install build-essential git

# Fedora
dnf install @development-tools

# Archlinux, using an AUR manager
yourAURmanager -S base-devel
</code></pre>
<h3><a class="header" href="#macos" id="macos">macOS</a></h3>
<p>Assuming you use <a href="https://brew.sh/">Homebrew</a> to manage packages</p>
<pre><code class="language-sh">brew install cmake
</code></pre>
<h3><a class="header" href="#windows" id="windows">Windows</a></h3>
<p>To build Nimbus on windows, the Mingw-w64 build environment is recommended.</p>
<p>Install Mingw-w64 for your architecture using the &quot;<a href="https://sourceforge.net/projects/mingw-w64/files/">MinGW-W64 Online Installer</a>&quot;:</p>
<ol>
<li>Select your architecture in the setup menu (<code>i686</code> on 32-bit, <code>x86_64</code> on 64-bit)</li>
<li>Set threads to <code>win32</code></li>
<li>Set exceptions to &quot;dwarf&quot; on 32-bit and &quot;seh&quot; on 64-bit.</li>
<li>Change the installation directory to <code>C:\mingw-w64</code> and add it to your system PATH in <code>&quot;My Computer&quot;/&quot;This PC&quot; -&gt; Properties -&gt; Advanced system settings -&gt; Environment Variables -&gt; Path -&gt; Edit -&gt; New -&gt; C:\mingw-w64\mingw64\bin</code> (<code>C:\mingw-w64\mingw32\bin</code> on 32-bit)</li>
</ol>
<p>Install <a href="https://gitforwindows.org/">Git for Windows</a> and use a &quot;Git Bash&quot; shell to clone and build <code>nimbus-eth2</code>.</p>
<blockquote>
<p><strong>Note:</strong> If the online installer isn't working you can try installing<code>Mingw-w64</code> through <a href="https://www.msys2.org/">MSYS2</a>.</p>
</blockquote>
<h3><a class="header" href="#android" id="android">Android</a></h3>
<ul>
<li>Install the <a href="https://termux.com">Termux</a> app from FDroid or the Google Play store</li>
<li>Install a <a href="https://wiki.termux.com/wiki/PRoot">PRoot</a> of your choice following the instructions for your preferred distribution.
Note, the Ubuntu PRoot is known to contain all Nimbus prerequisites compiled on Arm64 architecture (the most common architecture for Android devices).</li>
</ul>
<p>Assuming you  use Ubuntu PRoot</p>
<pre><code class="language-sh">apt install build-essential git
</code></pre>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/install.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#build-the-beacon-node" id="build-the-beacon-node">Build the beacon node</a></h1>
<h2><a class="header" href="#prerequisites" id="prerequisites">Prerequisites</a></h2>
<p>Before building and running the application, make sure you've gone through the <a href="./install.html">installed the required dependencies</a>.</p>
<h2><a class="header" href="#building-the-node" id="building-the-node">Building the node</a></h2>
<h3><a class="header" href="#1-clone-the-nim-beacon-chain-repository" id="1-clone-the-nim-beacon-chain-repository">1. Clone the nim beacon chain repository</a></h3>
<pre><code>git clone https://github.com/status-im/nimbus-eth2
cd nimbus-eth2
</code></pre>
<h3><a class="header" href="#2-run-the-beacon-node-build-process" id="2-run-the-beacon-node-build-process">2. Run the beacon node build process</a></h3>
<p>To build the Nimbus beacon node and it's dependencies, run:</p>
<pre><code>make nimbus_beacon_node
</code></pre>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/build.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#start-syncing" id="start-syncing">Start syncing</a></h1>
<p>If you're joining a network that has already launched, you need to ensure that your beacon node is <a href="./keep-an-eye.html#keep-track-of-your-syncing-progress">completely synced</a> before submitting your deposit.</p>
<p>This is particularly important if you are joining a network that's been running for a while.</p>
<blockquote>
<p><strong>N.B.</strong> In order to process incoming validator deposits from the eth1 chain, you'll need to run an eth1 client (<strong>web3 provider</strong>) in parallel to your eth2 client. See <a href="./eth1.html">here</a> for instructions on how to do so.</p>
</blockquote>
<h3><a class="header" href="#testnet" id="testnet">Testnet</a></h3>
<p>To start syncing the <code>prater</code> testnet , from the <code>nimbus-eth2</code> repository, run:</p>
<pre><code> ./run-prater-beacon-node.sh --web3-url=&quot;&lt;YOUR_WEB3_PROVIDER_URL&gt;&quot;
</code></pre>
<h3><a class="header" href="#mainnet" id="mainnet">Mainnet</a></h3>
<p>To start syncing the eth2 mainnet, run:</p>
<pre><code> ./run-mainnet-beacon-node.sh --web3-url=&quot;&lt;YOUR_WEB3_PROVIDER_URL&gt;&quot;
</code></pre>
<p>You should see the following output:</p>
<pre><code>INF 2020-12-01 11:25:33.487+01:00 Launching beacon node
...
INF 2020-12-01 11:25:34.556+01:00 Loading block dag from database            topics=&quot;beacnde&quot; tid=19985314 file=nimbus_beacon_node.nim:198 path=build/data/shared_prater_0/db
INF 2020-12-01 11:25:35.921+01:00 Block dag initialized
INF 2020-12-01 11:25:37.073+01:00 Generating new networking key
...
NOT 2020-12-01 11:25:59.512+00:00 Eth1 sync progress                         topics=&quot;eth1&quot; tid=21914 file=eth1_monitor.nim:705 blockNumber=3836397 depositsProcessed=106147
NOT 2020-12-01 11:26:02.574+00:00 Eth1 sync progress                         topics=&quot;eth1&quot; tid=21914 file=eth1_monitor.nim:705 blockNumber=3841412 depositsProcessed=106391
...
INF 2020-12-01 11:26:31.000+00:00 Slot start                                 topics=&quot;beacnde&quot; tid=21815 file=nimbus_beacon_node.nim:505 lastSlot=96566 scheduledSlot=96567 beaconTime=1w6d9h53m24s944us774ns peers=7 head=b54486c4:96563 headEpoch=3017 finalized=2f5d12e4:96479 finalizedEpoch=3014
INF 2020-12-01 11:26:36.285+00:00 Slot end                                   topics=&quot;beacnde&quot; tid=21815 file=nimbus_beacon_node.nim:593 slot=96567 nextSlot=96568 head=b54486c4:96563 headEpoch=3017 finalizedHead=2f5d12e4:96479 finalizedEpoch=3014
...
</code></pre>
<blockquote>
<p>If you want to put the database somewhere else, (e.g. an external ssd) pass the <code>--data-dir=/your/path</code>. ⚠️ If you do this, remember to pass this flag to <strong>all</strong> your nimbus calls.</p>
</blockquote>
<h3><a class="header" href="#command-line-options" id="command-line-options">Command line options</a></h3>
<p>You can pass any <code>nimbus_beacon_node</code> options to the <code>prater</code> and <code>mainnet</code> scripts. For example, if you wanted to launch Nimbus on <code>prater</code> with a different base port, say <code>9100</code>, you would run:</p>
<pre><code>./run-prater-beacon-node.sh --tcp-port=9100 --udp-port=9100
</code></pre>
<p>To see a list of the command line options availabe to you, with descriptions, navigate to the <code>build</code> directory and run:</p>
<pre><code>./nimbus_beacon_node --help
</code></pre>
<h3><a class="header" href="#keep-track-of-your-sync-progress" id="keep-track-of-your-sync-progress">Keep track of your sync progress</a></h3>
<p>See <a href="./keep-an-eye.html#keep-track-of-your-syncing-progress">here</a> for how to keep track of your sync progress.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/start-syncing.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#add-a-backup-web3-provider" id="add-a-backup-web3-provider">Add a backup web3 provider</a></h1>
<p>It's a good idea to add a backup web3 provider in case your main one goes down. You can do this by simply repeating the <code>--web3-url</code> parameter on launch.</p>
<p>For example, if your primary eth1 node is a <a href="./eth1.html#geth">local Geth</a>, but you want to use <a href="./infura-guide.html">Infura</a> as a backup you would run:</p>
<pre><code>./run-mainnet-beacon-node.sh \
 --web3-url=&quot;ws://127.0.0.1:8546&quot; \
 --web3-url=&quot;wss://mainnet.infura.io/ws/v3/...&quot;
</code></pre>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/web3-backup.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#make-a-deposit-for-your-validator" id="make-a-deposit-for-your-validator">Make a deposit for your validator</a></h1>
<p>The easiest way to get your deposit in is to follow the Ethereum Foundation's launchpad instructions here:</p>
<p><strong>Prater testnet</strong>:
<a href="https://prater.launchpad.ethereum.org/">https://prater.launchpad.ethereum.org/</a></p>
<blockquote>
<p>Use Prater to stress test / future proof  your set up against peak mainnet load. See <a href="./prater.html">here</a> for all you need to know</p>
</blockquote>
<p><strong>Mainnet</strong>: <a href="https://launchpad.ethereum.org/">https://launchpad.ethereum.org/</a></p>
<blockquote>
<p>⚠️  If you are making a mainnet deposit make sure you verify that the deposit contract you are interacting with is the correct one. </p>
<p>You should verify that the address is indeed: <a href="https://etherscan.io/address/0x00000000219ab540356cBB839Cbe05303d7705Fa">0x00000000219ab540356cBB839Cbe05303d7705Fa</a></p>
</blockquote>
<p>You may notice that there have been considerable improvements to the launchpad process since the summer.</p>
<p>In particular, the Key Generation section is now much clearer, and you no longer have to install dependencies to get the <a href="https://github.com/ethereum/eth2.0-deposit-cli">command line app</a> working.</p>
<p>We won't elaborate on each individual step here, since they are well explained on the site itself. However, there are two points of note:</p>
<h2><a class="header" href="#1-eth1-connection" id="1-eth1-connection">1. Eth1 connection</a></h2>
<p><img src="https://i.imgur.com/81BgR14.png" alt="" /></p>
<p>In the <code>Select Client</code> section you'll first be asked to choose an eth1 client. You need to run an eth1 client in order to process incoming validator deposits from the eth1 chain.</p>
<p><img src="https://i.imgur.com/l5WSGqZ.png" alt="" /></p>
<p>We recommend you choose <code>Go Ethereum</code> (or <code>Geth</code>). </p>
<p><em>If you've followed the book up to this point, you should already have geth up and running.</em></p>
<h2><a class="header" href="#2-block-explorer" id="2-block-explorer">2. Block explorer</a></h2>
<p>Once you've sent off your transaction, you should see the following screen.</p>
<p><img src="https://i.imgur.com/A4IMlhK.png" alt="" /></p>
<p>We recommend you click on <code>Beaconchain</code>. This will open up a window that allows you to keep track of your validator's status.</p>
<p><img src="https://i.imgur.com/JHQblna.png" alt="" /></p>
<p>It's a good idea to bookmark this page.</p>
<h2><a class="header" href="#expected-waiting-time-the-queue" id="expected-waiting-time-the-queue">Expected waiting time (the queue)</a></h2>
<p>Once you send off your transaction(s), your validator will be put in a queue based on deposit time. Getting through the queue may take a few hours or days (assuming the chain is finalising). No validators are accepted into the validator set while the chain isn't finalising. The <code>Pending Validators</code> metric on the <a href="https://beaconcha.in/">beaconcha.in</a> will give you the size of the queue.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/deposit.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#import-your-validator-keys-into-nimbus" id="import-your-validator-keys-into-nimbus">Import your validator keys into Nimbus</a></h1>
<p>To import your signing key(s) into Nimbus, copy the <code>validator_keys</code> directory -- the directory that was created for you when you generated your keys using the <a href="https://github.com/ethereum/eth2.0-deposit-cli">command line app</a> -- into <code>nimbus-eth2</code>. Then run:</p>
<p><strong>Prater</strong></p>
<pre><code>build/nimbus_beacon_node deposits import --data-dir=build/data/shared_prater_0
</code></pre>
<p><strong>Mainnet</strong></p>
<pre><code>build/nimbus_beacon_node deposits import --data-dir=build/data/shared_mainnet_0
</code></pre>
<blockquote>
<p><strong>Note:</strong> You can also specify a different path to your <code>validator_keys</code> directory as follows:</p>
<p><em>Prater</em></p>
<pre><code>build/nimbus_beacon_node deposits import \
--data-dir=build/data/shared_prater_0 &quot;&lt;YOUR VALIDATOR KEYS DIRECTORY&gt;&quot;
</code></pre>
<p><em>Mainnet</em></p>
<pre><code>build/nimbus_beacon_node deposits import \ 
--data-dir=build/data/shared_mainnet_0 &quot;&lt;YOUR VALIDATOR KEYS DIRECTORY&gt;&quot;
</code></pre>
<p>Replacing <code>&lt;YOUR VALIDATOR KEYS DIRECTORY&gt;</code> with the full pathname of the <code>validator_keys</code> directory that was created when you generated your keys using the <a href="https://github.com/ethereum/eth2.0-deposit-cli/releases/">command line app</a>.</p>
</blockquote>
<blockquote>
<p><strong>Tip:</strong> You can run <code>pwd</code> in your <code>validator_keys</code> directory to print the full pathname to the console (if you're on Windows, run <code>cd</code> instead).</p>
</blockquote>
<p>You'll be asked to enter the password you created to encrypt your keystore(s).</p>
<p>Don't worry, this is entirely normal. Your validator client needs both your signing keystore(s) and the password encrypting it to import your <a href="https://blog.ethereum.org/2020/05/21/keys/">key</a> (since it needs to decrypt the keystore in order to be able to use it to sign on your behalf).</p>
<blockquote>
<p><strong>Note:</strong> If you come across an error, it's probably because the wrong permissions have been set on either a folder or file. See <a href="faq.html#folder-permissions">here</a> for how to fix this.</p>
</blockquote>
<h2><a class="header" href="#storage" id="storage">Storage</a></h2>
<p>When you import your keys into Nimbus, your validator signing key(s) are stored in the <code>build/data/shared_&lt;prater or mainnet&gt;_0/</code> folder, under <code>secrets</code> and <code>validators</code> - <strong>make sure you keep these folders backed up somewhere safe.</strong></p>
<p>The <code>secrets</code> folder contains the common secret that gives you access to all your validator keys.</p>
<p>The <code>validators</code> folder contains your signing keystore(s) (encrypted keys). Keystores are used by validators as a method for exchanging keys. For more on keys and keystores, see <a href="https://blog.ethereum.org/2020/05/21/keys/">here</a>.</p>
<blockquote>
<p><strong>Note:</strong> The Nimbus client will only ever import your signing key. In any case, if you used the deposit launchpad, this is the only key you should have (thanks to the way these keys are derived, it is possible to generate the withdrawal key from your mnemonic when you wish to withdraw).</p>
</blockquote>
<h2><a class="header" href="#export" id="export">Export</a></h2>
<p><em>Todo</em></p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/keys.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#connect-your-validator-to-eth2" id="connect-your-validator-to-eth2">Connect your validator to eth2</a></h1>
<p><strong>Prater</strong></p>
<p>To connect your validator to the Prater testnet, from the <code>nimbus-eth2</code> repository run:</p>
<pre><code> ./run-prater-beacon-node.sh
</code></pre>
<p><strong>Mainnet</strong></p>
<p>To connect your validator to mainnet, from the <code>nimbus-eth2</code> repository run:</p>
<pre><code>./run-mainnet-beacon-node.sh
</code></pre>
<p>In both cases, you'll be asked to enter your <a href="./start-syncing.html#web3-provider-url">Web3 provider URL</a> again.</p>
<blockquote>
<p><strong>Note:</strong> If your beacon node is already running, you'll need to shut it down gracefully (<code>Ctrl+c</code>) and re-run the above command.</p>
</blockquote>
<p>To ensure your Validator is correctly monitoring the eth1 chain, it's important you enter a valid web3 provider.</p>
<p>Your beacon node will launch and connect your validator to the eth2 network. To check that this has happened correctly, check your logs for the following:</p>
<pre><code>INF 2020-11-18 11:20:00.181+01:00 Launching beacon node 
...
NOT 2020-11-18 11:20:02.091+01:00 Local validator attached
</code></pre>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/connect-eth2.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#keep-an-eye-on-your-validator" id="keep-an-eye-on-your-validator">Keep an eye on your validator</a></h1>
<p>The best way to keep track of your validator's status is using the <code>beaconcha.in</code> explorer (click on the orange magnifying glass at the very top and paste in your validator's public key):</p>
<ul>
<li><strong>Testnet:</strong> <a href="https:/prater.beaconcha.in">prater.beaconcha.in</a> </li>
<li><strong>Mainnet:</strong> <a href="https://beaconcha.in/">beaconcha.in</a></li>
</ul>
<p>If you deposit after the <a href="https://hackmd.io/@benjaminion/genesis">genesis</a> state was decided, your validator(s) will be put in a queue based on deposit time, and will slowly be inducted into the validator set after genesis. Getting through the queue may take a few hours or a day or so.</p>
<p>You can even create an account (<a href="https://prater.beaconcha.in/register">testnet link</a>, <a href="https://beaconcha.in/register">mainnet link</a>) to add alerts and keep track of your validator's performance (<a href="https://prater.beaconcha.in/dashboard">testnet link</a>, <a href="https://beaconcha.in/dashboard">mainnet link</a>).</p>
<hr />
<h2><a class="header" href="#make-sure-your-validator-is-attached" id="make-sure-your-validator-is-attached">Make sure your validator is attached</a></h2>
<p>On startup, you should see a log message that reads <code>Local validator attached</code>. This has a <code>pubKey</code> field which should the public key of your validator.</p>
<h2><a class="header" href="#check-your-ip-address" id="check-your-ip-address">Check your IP address</a></h2>
<p>Check that Nimbus has recognised your external IP properly. To do this, look at the end of the first log line:</p>
<pre><code>Starting discovery node&quot;,&quot;topics&quot;:&quot;discv5&quot;,&quot;tid&quot;:2665484,&quot;file&quot;:&quot;protocol.nim:802&quot;,&quot;node&quot;:&quot;b9*ee2235:&lt;IP address&gt;:9000&quot;
</code></pre>
<p><code>&lt;IP address&gt;</code> should match your external IP (the IP by which you can be reached from the internet).</p>
<p>Note that the port number is displayed directly after the IP -- in the above case <code>9000</code>. This is the port that should be opened and mapped.</p>
<h2><a class="header" href="#keep-track-of-your-syncing-progress" id="keep-track-of-your-syncing-progress">Keep track of your syncing progress</a></h2>
<p>To keep track of your sync progress, pay attention to the <code>Slot start</code> messages in your logs:</p>
<pre><code>INF 2021-05-24 14:53:59.067+02:00 Slot start                                 
topics=&quot;beacnde&quot; tid=3485464 file=nimbus_beacon_node.nim:968 lastSlot=1253067 wallSlot=1253068 delay=67ms515us0ns
peers=22
head=eb994064:90753 
headEpoch=2836 
finalized=031b9591:90688 
finalizedEpoch=2834 
sync=&quot;PPPPPDDDDP:10:15.4923:7.7398:01d17h43m (90724)&quot;
</code></pre>
<p>Where:</p>
<ul>
<li><code>peers</code> tells you how many peers you're currently connected to (in the above case, 35 peers)</li>
<li><code>finalized</code> tells you the most recent finalized epoch you've synced to so far (the 8765th epoch)</li>
<li><code>head</code> tells you the most recent slot you've synced to so far (the 2nd slot of the 8767th epoch)</li>
<li><code>sync</code> tells you how fast you're syncing right now (<code>15.4923</code> blocks per second), your average sync speed since you stared (<code>7.7398</code> blocks per second), the time left until you're fully synced (<code>01d17h43m</code>) how many blocks you've synced so far (<code>90724</code>), along with information about 10 sync workers linked to the 10 most performant peers you are currently connected to (represented by a string of letters and a number).</li>
</ul>
<p>The string of letters -- what we call the <code>sync worker map</code> (in the above case represented by <code>wPwwwwwDwwDPwPPPwwww</code>) represents the status of the sync workers mentioned above, where:</p>
<pre><code>    s - sleeping (idle),
    w - waiting for a peer from PeerPool,
    R - requesting blocks from peer
    D - downloading blocks from peer
    P - processing/verifying blocks
    U - updating peer's status information
</code></pre>
<p>The number following it (in the above case represented by <code>10</code>) represents the number of workers that are currently active (i.e not sleeping or waiting for a peer).</p>
<blockquote>
<p><strong>Note:</strong> You can also use you the RPC calls outlined in the <a href="./api.html">API page</a> to retrieve similar information.</p>
</blockquote>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/keep-an-eye.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#recover-lost-keys-and-generate-new-ones" id="recover-lost-keys-and-generate-new-ones">Recover lost keys and generate new ones</a></h1>
<p>Your  mnemonic can be used to recover lost keys and generate new ones.</p>
<p>Every time you generate a keystore from your mnemomic, that keystore is assigned an index. The first keystore you generate has index 0, the second index 1, etc. You can recover any key using your mnemonic and that key's index. For more on how keys are derived, see this <a href="https://blog.ethereum.org/2020/05/21/keys/">excellent post</a>.</p>
<p>To stay consistent with the rest of the book, we'll take you though how to do this using the <a href="https://github.com/ethereum/eth2.0-deposit-cli">deposit-cli's</a> <a href="https://github.com/ethereum/eth2.0-deposit-cli/releases">binary executable</a>.</p>
<p>Specifically, we'll be using the <code>existing-mnemonic</code> command. Here's a description of the command from the deposit-cli's <a href="https://github.com/ethereum/eth2.0-deposit-cli#step-2-create-keys-and-deposit_data-json">README</a>:</p>
<blockquote>
<p>This command is used to re-generate or derive new keys from your existing mnemonic. Use this command, if (i) you have already generated keys with this CLI before, (ii) you want to reuse your mnemonic that you know is secure that you generated elsewhere (reusing your eth1 mnemonic .etc), or (iii) you lost your keystores and need to recover your keys.</p>
</blockquote>
<h2><a class="header" href="#recover-existing-key" id="recover-existing-key">Recover existing key</a></h2>
<blockquote>
<p>⚠️  Recovering validator keys from a mnemonic should only be used as a last resort. Exposing your mnemonic to a computer at any time puts it at risk of being compromised. Your mnemonic is not encrypted and if leaked, can be used to steal your funds.</p>
</blockquote>
<p><em><strong>N.B.</strong> the commands below assume you are trying to recover your original key, hence <code>--validator_start_index</code> has been set to <code>0</code>.</em></p>
<p>Run the following command from the directory which contains the <code>deposit</code> executable:</p>
<p><strong>Prater</strong></p>
<pre><code>./deposit existing-mnemonic \
 --validator_start_index 0 \
 --num_validators 1 \
 --chain prater
</code></pre>
<p><strong>Mainnet</strong></p>
<pre><code>./deposit existing-mnemonic \
 --validator_start_index 0 \
 --num_validators 1 \
 --chain mainnet
</code></pre>
<p>You'll be prompted to enter your mnemonic, and a new password for your keystore.</p>
<p>Check that the <code>validator_keys</code> directory contains your extra keystore.</p>
<p>Copy the <code>validator_keys</code> directory to <code>nimbus-eth2</code> and then follow the instructions <a href="./keys.html">here</a>. Your key will be added to your node on next restart.</p>
<h2><a class="header" href="#generate-another-key" id="generate-another-key">Generate another key</a></h2>
<blockquote>
<p>⚠️  If you wish to generate another validator key,  you must take great care
to not generate a copy of your original key. Running the same key on two different validator clients will likely get you slashed.</p>
</blockquote>
<p><em><strong>N.B.</strong> the commands below assume you already have one key and wish to generate a second, hence <code>--validator_start_index</code> has been set to <code>1</code> (as <code>0</code> would be the original key).</em></p>
<p>Run the following command from the directory which contains the <code>deposit</code> executable:</p>
<p><strong>Prater</strong></p>
<pre><code>./deposit existing-mnemonic \
 --validator_start_index 1 \
  --num_validators 1 \
  --chain prater
</code></pre>
<p><strong>Mainnet</strong></p>
<pre><code>./deposit existing-mnemonic \
 --validator_start_index 1 \
 --num_validators 1 \
 --chain mainnet
</code></pre>
<p>You'll be prompted to enter your mnemonic, and a new password for your keystore.</p>
<p>Check that the <code>validator_keys</code> directory contains an extra keystore.</p>
<p>Copy the <code>validator_keys</code> directory to <code>nimbus-eth2</code>.</p>
<p>Make sure you've made a <a href="./deposit.html">deposit</a> for your new keystore, and then follow the instructions <a href="./keys.html">here</a>. Your key will be added to your node on next restart.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/more-keys.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#perform-a-voluntary-exit" id="perform-a-voluntary-exit">Perform a voluntary exit</a></h1>
<blockquote>
<p>⚠️  Voluntary exits are <strong>irreversible</strong>. You won't be able to validate again with the same key. And you won't be able to withdraw your stake until the Eth1 and Eth2 merge. <em>Note that voluntary exits won't be processed if the chain isn't finalising.</em></p>
</blockquote>
<p>To perform a voluntary exit, make sure your beacon node is running with the <code>--rpc</code>option enabled (e.g. <code>./run-mainnet-beacon-node.sh --rpc</code>), then run:</p>
<p><strong>Pyrmont</strong></p>
<pre><code>build/nimbus_beacon_node deposits exit \
 --validator=&lt;VALIDATOR_PUBLIC_KEY&gt; \
 --data-dir=build/data/shared_pyrmont_0
</code></pre>
<p><strong>Prater</strong></p>
<pre><code>build/nimbus_beacon_node deposits exit \ 
 --validator=&lt;VALIDATOR_PUBLIC_KEY&gt; \ 
 --data-dir=build/data/shared_prater_0
</code></pre>
<p><strong>Mainnet</strong></p>
<pre><code>build/nimbus_beacon_node deposits exit \ 
 --validator=&lt;VALIDATOR_PUBLIC_KEY&gt; \
 --data-dir=build/data/shared_mainnet_0
</code></pre>
<blockquote>
<p><strong>Note:</strong> Make sure your <code>&lt;VALIDATOR_PUBLIC_KEY&gt;</code> is prefixed with <code>0x</code>. In other words the public key should look like <code>0x95e3...</code></p>
</blockquote>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/voluntary-exit.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#add-an-additional-validator" id="add-an-additional-validator">Add an additional validator</a></h1>
<p>To add an additional validator, just follow <a href="./keys.html">the same steps</a> as you did when you added your first.</p>
<p>You'll have to restart the beacon node for the changes to take effect.</p>
<blockquote>
<p>Note that a single Nimbus instance is able to handle multiple validators.</p>
</blockquote>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/additional-validator.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#monitor-attestation-performance" id="monitor-attestation-performance">Monitor attestation performance</a></h1>
<p>Use the <code>ncli_db validatorPerf</code> command to create a report for the attestation performance of your validator over time.</p>
<h2><a class="header" href="#steps" id="steps">Steps</a></h2>
<p>Make sure you're in the <code>nimbus-eth2</code> repository.</p>
<h3><a class="header" href="#1-build-ncli_db" id="1-build-ncli_db">1. Build ncli_db</a></h3>
<p>The first step is to build <code>ncli_db</code>:</p>
<pre><code>make ncli_db
</code></pre>
<h3><a class="header" href="#2-view-options" id="2-view-options">2. View options</a></h3>
<p>To view the options available to you, run:</p>
<pre><code>build/ncli_db --help
</code></pre>
<p>At the top you should see</p>
<pre><code>ncli_db [OPTIONS]... command

The following options are available:

 --db           Directory where `nbc.sqlite` is stored.
 --network      The Eth2 network preset to use.
</code></pre>
<p>Where:</p>
<ul>
<li>
<p>The <code>network</code> can either be <code>mainnet</code>  or <code>prater</code></p>
</li>
<li>
<p>The default location of the <code>db</code>  is either <code>build/data/shared_mainnet_0/db</code> or <code>build/data/shared_prater_0/db</code></p>
</li>
</ul>
<p>Near the bottom, you should see</p>
<pre><code>ncli_db validatorPerf [OPTIONS]...

The following options are available:

 --start-slot   Starting slot, negative = backwards from head [=-128 * SLOTS_PER_EPOCH.int64].
 --slots        Number of slots to run benchmark for, 0 = all the way to head [=0].
</code></pre>
<p>Use <code>start-slot</code> and <code>slots</code> to restrict the analysis on a specific block range.</p>
<h3><a class="header" href="#3-run" id="3-run">3. Run</a></h3>
<p>To view the performance of all validators on Prater so far across the entire block range stored in your database, run:</p>
<pre><code>build/ncli_db validatorPerf \
--network=prater \
--db=build/data/shared_prater_0/db
</code></pre>
<p>You should see output that looks like to the following:</p>
<pre><code>validator_index,attestation_hits,attestation_misses,head_attestation_hits,head_attestation_misses,target_attestation_hits,target_attestation_misses,delay_avg,first_slot_head_attester_when_first_slot_empty,first_slot_head_attester_when_first_slot_not_empty
0,128,0,127,1,128,0,1.0078125,0,3
1,128,0,125,3,127,1,1.0078125,0,2
2,128,0,127,1,127,1,1.0078125,0,5
...
</code></pre>
<h3><a class="header" href="#4-adjust-to-target-a-specific-block-range" id="4-adjust-to-target-a-specific-block-range">4. Adjust to target a specific block range</a></h3>
<p>To restrict the analysis to the performance between slots 0 and 128, say, run:</p>
<pre><code>build/ncli_db validatorPerf \
--network=prater \
--db=build/data/shared_prater_0/db \
--start-slot=0 \
--slots=128
</code></pre>
<h3><a class="header" href="#5-compare-my-validators-to-the-global-average" id="5-compare-my-validators-to-the-global-average">5. Compare my validators to the global average</a></h3>
<p>We'll use <a href="https://docs.google.com/spreadsheets/d/1SNFf4LsDOK91SWuQZm9DYBoX9JNQNMKHw66Rv0l5EGo/">Paul Hauner's wonderful workbook</a> as a template. This workbook consists of three inter-related spreadsheets - <code>Summary</code>, <code>My Validators</code>, and <code>datasource</code>.</p>
<ol>
<li>
<p>Make a copy of the document</p>
</li>
<li>
<p>Remove the table entries in <code>My Validators</code> and delete everything in the <code>datasource</code> sheet</p>
</li>
<li>
<p>Import the output from <code>validatorPerf</code> to <code>datasource</code> - the easiest way to do this is to pipe the output to a <code>csv</code>, remove the first few lines, and import the <code>csv</code> into <code>datasource</code></p>
</li>
<li>
<p>Manually copy over your validator(s) to the <code>My Validators</code> sheet  - the easiest way to find your validator's  <code>validator_index</code> is to search for it by its public key on <a href="https://beaconcha.in/">beaconcha.in</a> (for example, <a href="https://beaconcha.in/validator/115733">this validator's</a> index is 115733)</p>
</li>
<li>
<p>Go to the <code>Summary</code> page and view your results</p>
</li>
</ol>
<h2><a class="header" href="#resources" id="resources">Resources</a></h2>
<p>The workbook's method  is explained <a href="https://hackmd.io/xQfi83kHQpm05-aAFVV0DA?view">here</a>.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/attestation-performance.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#keep-nimbus-updated" id="keep-nimbus-updated">Keep Nimbus updated</a></h1>
<p>Make sure you stay on the lookout for any critical updates to Nimbus. This best way to do so is through the <strong>announcements</strong> channel on our <a href="https://discord.com/invite/XRxWahP">discord</a>. The Nimbus eth2 releases page can be found <a href="https://github.com/status-im/nimbus-eth2/releases/">here</a>.</p>
<blockquote>
<p><strong>Note:</strong> If your beacon node is already running, you'll need to disconnect and reconnect for the changes to take effect.</p>
</blockquote>
<p>To update to the latest version, either download the binary or compile the beacon node release.</p>
<blockquote>
<p><strong>Tip:</strong> To check which version of Nimbus you're currently running, run <code>build/nimbus_beacon_node --version</code></p>
</blockquote>
<h2><a class="header" href="#download-the-binary" id="download-the-binary">Download the binary</a></h2>
<p>Open the latest <a href="https://github.com/status-im/nimbus-eth2/releases/latest">Nimbus eth2 release</a> and copy the link for the file that works on your system.</p>
<pre><code>wget &lt;insert download link here&gt;
tar -xzf nimbus-eth2_Linux_arm64v8*.tar.gz -C nimbus-eth2
rm nimbus-eth2_Linux_arm64v8*.tar.gz
</code></pre>
<h2><a class="header" href="#compile-the-beacon-node-release" id="compile-the-beacon-node-release">Compile the beacon node release</a></h2>
<blockquote>
<p>⚠️   In order to minimise downtime, we recommend updating and rebuilding the beacon node before restarting.</p>
</blockquote>
<pre><code>git pull &amp;&amp; make update
</code></pre>
<p>Followed by:</p>
<pre><code>make nimbus_beacon_node
</code></pre>
<p>to <a href="./build.html">rebuild the beacon node</a>.</p>
<h2><a class="header" href="#urgency-guidelines" id="urgency-guidelines">Urgency guidelines</a></h2>
<p>As of <code>v1.4.0</code>, releases are marked with the following tags:</p>
<p><code>low-urgency</code>: update at your own convenience, sometime within our normal update cycle of two weeks</p>
<p><code>medium-urgency</code>: may contain an important stability fix, it is better to update sooner rather than later</p>
<p><code>high-urgency</code>: update as soon as you can, this is a critical update required for Nimbus to function correctly</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/keep-updated.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#run-an-eth1-node" id="run-an-eth1-node">Run an eth1 node</a></h1>
<blockquote>
<p>⚠️ Warning: make sure you've copied the endpoint that starts with either <code>ws</code> or <code>wss</code> (websocket), and not <code>http</code> or <code>https</code>. Nimbus does not currently support <code>http</code> endpoints.</p>
</blockquote>
<p>In order to process incoming validator deposits from the eth1 chain, you'll need to run an eth1 client in parallel to your eth2 client. </p>
<p>Validators are responsible for including new deposits when they propose blocks. And an eth1 client is needed to ensure your validator performs this task correctly.</p>
<p>On this page we provide instructions for using Geth (however, any reputable eth1 client should do the trick).</p>
<blockquote>
<p><strong>Note:</strong> If you have a &gt; 500GB SSD, and your <a href="./hardware.html">hardware</a> can handle it, we strongly recommend running your own eth1 client. This will help ensure the network stays as decentralised as possible. If you can't however, the next best option is to set up a 3rd part provider like <a href="./infura-guide.html">infura</a>.</p>
</blockquote>
<h2><a class="header" href="#nimbus" id="nimbus">Nimbus</a></h2>
<p>In parallel to <code>nimbus-eth2</code> we are working hard on our <a href="https://github.com/status-im/nimbus-eth1">our exectution client</a>. While this is  very much a project in development (i.e. not yet ready for public consumption), we welcome you to experiment with it.</p>
<h2><a class="header" href="#nethermind" id="nethermind">Nethermind</a></h2>
<p><em>TBC</em></p>
<h2><a class="header" href="#geth" id="geth">Geth</a></h2>
<h3><a class="header" href="#1-install-geth" id="1-install-geth">1. Install Geth</a></h3>
<p>If you're running MacOS, follow the instructions <a href="https://github.com/ethereum/go-ethereum/wiki/Installation-Instructions-for-Mac">listed here</a> to install geth. Otherwise <a href="https://github.com/ethereum/go-ethereum/wiki/Installing-Geth">see here</a>.</p>
<h3><a class="header" href="#2-start-geth" id="2-start-geth">2. Start Geth</a></h3>
<p>Once you have geth installed, use the following command to start your eth1 node:</p>
<p><strong>Testnet</strong></p>
<pre><code>geth --goerli --ws
</code></pre>
<p><strong>Mainnet</strong></p>
<pre><code>geth --ws
</code></pre>
<blockquote>
<p><strong>Note:</strong> The <code>--ws</code> flag is needed to enable the websocket RPC API. This allows Nimbus to query the eth1 chain using Web3 API calls.</p>
</blockquote>
<h3><a class="header" href="#3-leave-geth-running" id="3-leave-geth-running">3. Leave Geth running</a></h3>
<p>Let it sync - Geth uses a fast sync mode by default. It may take anywhere between a few hours and a couple of days.</p>
<blockquote>
<p><strong>N.B.</strong> It is safe to run Nimbus and start validating even if Geth hasn't fully synced yet</p>
</blockquote>
<p>You'll know Geth has finished syncing, when you start seeing logs that look like the following:</p>
<pre><code>INFO [05-29|01:14:53] Imported new chain segment               blocks=1 txs=2   mgas=0.043  elapsed=6.573ms   mgasps=6.606   number=3785437 hash=f72595…c13f23
INFO [05-29|01:15:08] Imported new chain segment               blocks=1 txs=3   mgas=0.067  elapsed=7.639ms   mgasps=8.731   number=3785441 hash=be7e55…a8c1c7
INFO [05-29|01:15:25] Imported new chain segment               blocks=1 txs=21  mgas=1.084  elapsed=33.610ms  mgasps=32.264  number=3785442 hash=fd54be…79b047
INFO [05-29|01:15:42] Imported new chain segment               blocks=1 txs=26  mgas=0.900  elapsed=26.209ms  mgasps=34.335  number=3785443 hash=2504ff…119622
INFO [05-29|01:15:59] Imported new chain segment               blocks=1 txs=12  mgas=1.228  elapsed=22.693ms  mgasps=54.122  number=3785444 hash=951dfe…a2a083
INFO [05-29|01:16:05] Imported new chain segment               blocks=1 txs=3   mgas=0.065  elapsed=5.885ms   mgasps=11.038  number=3785445 hash=553d9e…fc4547
INFO [05-29|01:16:10] Imported new chain segment               blocks=1 txs=0   mgas=0.000  elapsed=5.447ms   mgasps=0.000   number=3785446 hash=5e3e7d…bd4afd
INFO [05-29|01:16:10] Imported new chain segment               blocks=1 txs=1   mgas=0.021  elapsed=7.382ms   mgasps=2.845   number=3785447 hash=39986c…dd2a01
INFO [05-29|01:16:14] Imported new chain segment               blocks=1 txs=11  mgas=1.135  elapsed=22.281ms  mgasps=50.943  number=3785444 hash=277bb9…623d8c
</code></pre>
<p>Geth accepts connections from the loopback interface (<code>127.0.0.1</code>), with default WebSocket port <code>8546</code>. This means that your default Web3 provider URL should be: <code>ws://127.0.0.1:8546</code></p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/eth1.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#obtain-goerli-eth" id="obtain-goerli-eth">Obtain Goerli ETH</a></h1>
<p>To participate in an eth2 testnet, you need to stake 32 testnet ETH. You can request this testnet ETH by joining the <a href="https://discord.gg/fxsECtdUCB">ethstaker discord</a> - look for the <code>#request-goerli-eth</code> channel.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/goerli-eth.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#set-up-a-systemd-service" id="set-up-a-systemd-service">Set up a systemd service</a></h1>
<p>This page will take you through how to set up a <code>systemd</code> service for your beacon node.</p>
<p>Systemd is used in order to have a command or program run when your device boots (i.e. add it as a service). Once this is done, you can start/stop enable/disable from the linux prompt.</p>
<blockquote>
<p><a href="https://www.freedesktop.org/wiki/Software/systemd/"><code>systemd</code></a> is a service manager designed specifically for Linux. There is no port to Mac OS. You can get more information from <a href="https://www.raspberrypi.org/documentation/linux/usage/systemd.md">https://www.raspberrypi.org/documentation/linux/usage/systemd.md</a>  or  <a href="https://www.raspberrypi.org/documentation/linux/usage/systemd.md">https://fedoramagazine.org/what-is-an-init-system/</a></p>
</blockquote>
<h3><a class="header" href="#1-create-a-systemd-service" id="1-create-a-systemd-service">1. Create a systemd service</a></h3>
<blockquote>
<p>⚠️  If you wish to run the service with metrics enabled, you'll need to replace <code>--metrics:off</code> with <code>--metrics:on</code> in the service file below. See <a href="./metrics-pretty-pictures.html">here</a> for more on metrics.</p>
</blockquote>
<p>Create a <code>systemd</code> service unit file -- <code>nimbus-eth2-prater.service</code> -- and save it in <code>/lib/systemd/system/</code> (your Linux distribution might recommend another default - for example <a href="https://wiki.archlinux.org/title/systemd">archlinux recommends</a> <code>/etc/systemd/system/</code>).</p>
<p>The contents of the file should look like this:</p>
<pre><code class="language-txt">[Unit]
Description=Nimbus beacon node

[Service]
WorkingDirectory=&lt;BASE-DIRECTORY&gt;
ExecStart=&lt;BASE-DIRECTORY&gt;/build/nimbus_beacon_node \
  --non-interactive \
  --network=prater \
  --data-dir=build/data/shared_prater_0 \
  --web3-url=&lt;WEB3-URL&gt; \
  --rpc:on \
  --metrics:off
User=&lt;USERNAME&gt;
Group=&lt;USERNAME&gt;
Restart=always

[Install]
WantedBy=default.target
</code></pre>
<p>Where you should replace:</p>
<p><code>&lt;BASE-DIRECTORY&gt;</code> with the location of the <code>nimbus-eth2</code> repository on your device.</p>
<p><code>&lt;USERNAME&gt;</code> with the username of the system user responsible for running the launched processes.</p>
<p><code>&lt;WEB3-URL&gt;</code> with the WebSocket JSON-RPC URL you are planning to use.</p>
<blockquote>
<p><strong>N.B.</strong> If you're running Nimbus on a Pi, your <code>&lt;BASE-DIRECTORY&gt;</code> is <code>/home/pi/nimbus-eth2/</code> and your <code>&lt;USERNAME&gt;</code> is <code>pi</code></p>
</blockquote>
<blockquote>
<p>If you want to run on mainnet, simply replace all instances of <code>prater</code> with <code>mainnet</code>. If you wish to run on <code>pyrmont</code>, replace all instances of <code>prater</code> with <code>pyrmont</code>.</p>
</blockquote>
<h3><a class="header" href="#2-notify-systemd-of-the-newly-added-service" id="2-notify-systemd-of-the-newly-added-service">2. Notify systemd of the newly added service</a></h3>
<pre><code class="language-console">sudo systemctl daemon-reload
</code></pre>
<h3><a class="header" href="#3-start-the-service" id="3-start-the-service">3. Start the service</a></h3>
<pre><code class="language-console">sudo systemctl enable nimbus-eth2-prater --now
</code></pre>
<h3><a class="header" href="#4-monitor-the-service" id="4-monitor-the-service">4. Monitor the service</a></h3>
<pre><code class="language-console">sudo journalctl -u nimbus-eth2-prater.service
</code></pre>
<p>This will show you the Nimbus logs at the default setting -- it should include regular &quot;slot start&quot; messages which will show your <a href="./keep-an-eye.html#keep-track-of-your-syncing-progress">sync progress</a>.</p>
<p>To rewind logs - by one day, say - run:</p>
<pre><code class="language-console">sudo journalctl -u nimbus-eth2-prater.service --since yesterday
</code></pre>
<p>For more options, see <a href="https://www.raspberrypi.org/documentation/linux/usage/systemd.md">here</a>.</p>
<h2><a class="header" href="#further-examples" id="further-examples">Further examples</a></h2>
<ul>
<li><a href="https://github.com/chfast/ethereum-node/blob/main/nimbus%40.service">A systemd service file</a> by Pawel Bylica which allows you to start two services at the same time: e.g. <code>nimbus@prater.service</code> and <code>nimbus@mainnet.service</code>.</li>
</ul>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/beacon-node-systemd.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#log-rotation" id="log-rotation">Log rotation</a></h1>
<p>Nimbus logs are written to stdout, and optionally to a file. Writing to a file for a long-running process may lead to difficulties when the file grows large. This is typically solved with a <em>log rotator</em>. A log rotator is responsible for switching the written-to file, as well as compressing and removing old logs.</p>
<h2><a class="header" href="#using-logrotate" id="using-logrotate">Using <code>logrotate</code></a></h2>
<p><a href="https://github.com/logrotate/logrotate">logrotate</a> provides log rotation and compression. The corresponding package will install its Cron hooks (or Systemd timer) -- all you have to do is add a configuration file for Nimbus-eth2 in &quot;/etc/logrotate.d/nimbus-eth2&quot;:</p>
<pre><code class="language-text">/var/log/nimbus-eth2/*.log {
	compress
	missingok
	copytruncate
}
</code></pre>
<p>The above assumes you've configured Nimbus-eth2 to write its logs to &quot;/var/log/nimbus-eth2/&quot; (usually by redirecting stout and stderr from your init script).</p>
<p>&quot;copytruncate&quot; is required because, when it comes to moving the log file, <code>logrotate</code>'s default behaviour requires application support for re-opening that log file at runtime (something which is currently lacking). So, instead of a move, we tell <code>logrotate</code> to do a copy and a truncation of the existing file. A few log lines may be lost in the process.</p>
<p>You can control rotation frequency and the maximum number of log files kept by using the global configuration file - &quot;/etc/logrotate.conf&quot;:</p>
<pre><code class="language-text"># rotate daily
daily
# only keep logs from the last 7 days
rotate 7
</code></pre>
<h2><a class="header" href="#using-rotatelogs" id="using-rotatelogs">Using <code>rotatelogs</code></a></h2>
<p><a href="https://httpd.apache.org/docs/2.4/programs/rotatelogs.html">rotatelogs</a> is available on most servers and can be used with <code>Docker</code>, <code>Systemd</code> and manual setups to write rotated logs files.</p>
<p>In particular, when <code>Systemd</code> and its accompanying <code>Journald</code> log daemon are used, this setup avoids clogging the system log by keeping the Nimbus logs in a separate location.</p>
<h3><a class="header" href="#compression" id="compression">Compression</a></h3>
<p><code>rotatelogs</code> works by reading stdin and redirecting it to a file based on a name pattern. Whenever the log is about to be rotated, the application invokes a shell script with the old and new log files. Our aim is to compress the log file to save space. The <a href="https://github.com/status-im/nimbus-eth2/tree/unstable/scripts/rotatelogs-compress.sh">Nimbus-eth2 repo</a> provides a helper script that does this:</p>
<pre><code class="language-bash"># Create a rotation script for rotatelogs
cat &lt;&lt; EOF &gt; rotatelogs-compress.sh
#!/bin/sh

# Helper script for Apache rotatelogs to compress log files on rotation - `$2` contains the old log file name

if [ -f &quot;$2&quot; ]; then
    # &quot;nice&quot; prevents hogging the CPU with this low-priority task
    nice gzip -9 &quot;$2&quot;
fi
EOF

chmod +x rotatelogs-compress.sh
</code></pre>
<h3><a class="header" href="#build" id="build">Build</a></h3>
<p>Logs in files generally don't benefit from colors. To avoid colors being written to the file, additional flags can be added to the Nimbus <a href="./build.html">build process</a> -- these flags are best saved in a build script to which one can add more options. Future versions of Nimbus will support disabling colors at runtime.</p>
<pre><code class="language-bash">
# Build nimbus with colors disabled
cat &lt;&lt; EOF &gt; build-nbc-text.sh
#!/bin/bash
make NIMFLAGS=&quot;-d:chronicles_colors=off -d:chronicles_sinks=textlines&quot; nimbus_beacon_node
EOF
</code></pre>
<h3><a class="header" href="#run" id="run">Run</a></h3>
<p>The final step is to redirect logs to <code>rotatelogs</code> using a pipe when starting Nimbus:</p>
<pre><code class="language-bash">build/nimbus_beacon_node \
  --network:pyrmont \
  --web3-url=&quot;$WEB3URL&quot; \
  --data-dir:$DATADIR 2&gt;&amp;1 | rotatelogs -L &quot;$DATADIR/nbc_bn.log&quot; -p &quot;/path/to/rotatelogs-compress.sh&quot; -D -f -c &quot;$DATADIR/log/nbc_bn_%Y%m%d%H%M%S.log&quot; 3600
</code></pre>
<p>The options used in this example do the following:</p>
<ul>
<li><code>-L nbc_bn.log</code> - symlinks to the latest log file, for use with <code>tail -F</code></li>
<li><code>-p &quot;/path/to/rotatelogs-compress.sh&quot;</code> - runs <code>rotatelogs-compress.sh</code> when rotation is about to happen</li>
<li><code>-D</code> - creates the <code>log</code> directory if needed</li>
<li><code>-f</code> - opens the log immediately when starting <code>rotatelogs</code></li>
<li><code>-c &quot;$DATADIR/log/nbc_bn_%Y%m%d%H%M%S.log&quot;</code> - includes timestamp in log filename</li>
<li><code>3600</code> - rotates logs every hour (3600 seconds)</li>
</ul>
<h3><a class="header" href="#deleting-old-logs" id="deleting-old-logs">Deleting old logs</a></h3>
<p><code>rotatelogs</code> will not do this for you, so you'll need a Cron script (or Systemd timer):</p>
<pre><code class="language-bash"># delete log files older than 7 days
find &quot;$DATADIR/log&quot; -name 'nbc_bn_*.log' -mtime +7 -exec rm '{}' \+
</code></pre>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/log-rotate.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#verify-the-integrity-of-nimbus" id="verify-the-integrity-of-nimbus">Verify the integrity of Nimbus</a></h1>
<p>We've recently added checksums to the end of our <a href="https://github.com/status-im/nimbus-eth2/releases/">release notes</a> (a practice we will be continuing from now on). Please make sure you get into the habit of verifying these 🙏</p>
<p>For those of you who are unfamiliar, a <a href="https://en.wikipedia.org/wiki/Checksum">checksum</a> is a special type of <a href="https://en.wikipedia.org/wiki/Hash_function">hash</a> used to verify the integrity of a file. Verifying a checksum ensures there was no corruption or manipulation during the download and that the file was downloaded completely and correctly. For a short and simple guide on how to do so, <a href="https://www.devdungeon.com/content/how-verify-checksum">see here</a>.</p>
<p>In the case of the <a href="https://github.com/status-im/nimbus-eth2/releases/tag/v1.1.0">v1.1.0</a> release for example, the SHA512 checksums are:</p>
<pre><code># Linux AMD64
8d553ea5422645b5f06001e7f47051706ae5cffd8d88c45e4669939f3abb6caf41a2477431fce3e647265cdb4f8671fa360d392f423ac68ffb9459607eaab462  nimbus_beacon_node
# Linux ARM64
93ffd03a0ce67f7d035e3dc45e97de3c2c9a05a8dd0c6d5f45402ddb04404dc3cf15b80fee972f34152ef171ce97c40f794448bc779ca056081c945f71f19788  nimbus_beacon_node
# Linux ARM
f2e75f3fae2aea0a9f8d45861d52b0e2546c3990f453b509fab538692d18c64e65f58441c5492064fc371e0bc77de6bab970e05394cfd124417601b55cb4a825  nimbus_beacon_node
# Windows AMD64
fd68c8792ea60c2c72e9c2201745f9698bfd1dae4af4fa9e1683f082109045efebd1d80267f13cafeb1cd7414dc0f589a8a73f12161ac2758779369289d5a832  nimbus_beacon_node

</code></pre>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/checksums.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#back-up-your-database" id="back-up-your-database">Back up your database</a></h1>
<p>The best way to do this is to simply copy it over: you'll find it either in <code>build/data/shared_mainnet_0/db/</code> (if you're running Prater, <code>shared_prater_0</code>) or the directory you supplied to the <code>--data-dir</code>  argument when you launched Nimbus).</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/database-backup.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#change-log-level" id="change-log-level">Change log level</a></h1>
<p>You can customise Nimbus' verbosity with the <code>--log-level</code> option.</p>
<p>For example:</p>
<pre><code>./run-mainnet-beacon-node.sh --log-level=WARN
</code></pre>
<p>The default value is <code>INFO</code>.</p>
<p>Possible values (in order of decreasing verbosity) are:</p>
<pre><code>TRACE
DEBUG
INFO
NOTICE
WARN
ERROR
FATAL
NONE
</code></pre>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/log-levels.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#email-notifications" id="email-notifications">Email notifications</a></h1>
<p>You can create an account on <a href="https://beaconcha.in/">beaconcha.in</a> to set up email notifications in case your validator loses balance (goes offline), or gets slashed.</p>
<blockquote>
<p><strong>Tip:</strong> If your validator loses balance for two epochs in a row, you may want to investigate. It's a strong signal that it may be offline.</p>
</blockquote>
<h3><a class="header" href="#1-sign-up-at-a-hrefhttpsbeaconchainregisterbeaconchainregistera" id="1-sign-up-at-a-hrefhttpsbeaconchainregisterbeaconchainregistera">1. Sign up at <a href="https://beaconcha.in/register">beaconcha.in/register</a></a></h3>
<h3><a class="header" href="#2-type-your-validators-public-key-into-the-searchbar" id="2-type-your-validators-public-key-into-the-searchbar">2. Type your validator's public key into the searchbar</a></h3>
<p><img src="https://i.imgur.com/jHjkySK.png" alt="" /></p>
<h3><a class="header" href="#3-click-on-the-bookmark-icon" id="3-click-on-the-bookmark-icon">3. Click on the bookmark icon</a></h3>
<p><img src="https://i.imgur.com/O7zgE0k.png" alt="" /></p>
<h3><a class="header" href="#4-tick-the-boxes-and-select-add-to-watchlist" id="4-tick-the-boxes-and-select-add-to-watchlist">4. Tick the boxes and select <em>Add To Watchlist</em></a></h3>
<p><img src="https://i.imgur.com/7ff4Ta7.png" alt="" /></p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/email-notifications.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#graffiti" id="graffiti">Graffiti</a></h1>
<p>You can use your node's graffiti flag to make your mark on history and forever engrave some words of your choice into an Ethereum block. You will be able to see it using the block explorer.</p>
<p>To do so on <strong>Prater</strong>, run:</p>
<pre><code>./run-prater-beacon-node.sh --graffiti=&quot;&lt;YOUR_WORDS&gt;&quot;
</code></pre>
<p>To do so on <strong>Mainnet</strong>, run:</p>
<pre><code>./run-mainnet-beacon-node.sh --graffiti=&quot;&lt;YOUR_WORDS&gt;&quot;
</code></pre>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/graffiti.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#optimise-for-profitability" id="optimise-for-profitability">Optimise for profitability</a></h1>
<p>Key insights:</p>
<ul>
<li>Profitability depends heavily on the network and peer quality</li>
<li>While block proposals are more lucrative than attestations, they are much rarer</li>
</ul>
<h2><a class="header" href="#check-for-next-action-before-restarting" id="check-for-next-action-before-restarting">Check for next action before restarting</a></h2>
<p>To see when your validator is next due to make an attestation or proposal pay attention to the <code>Slot end</code> messages in your logs:</p>
<pre><code>INF 2021-05-31 17:46:11.094+02:00 Slot end
topics=&quot;beacnde&quot; tid=213670 file=nimbus_beacon_node.nim:932
slot=1304329
nextSlot=1304330
head=cffee454:38460
headEpoch=1201
finalizedHead=077da232:38368
finalizedEpoch=1199
nextAttestationSlot=338638
nextProposalSlot=-1
nextActionWait=4m35s874ms405us837ns
</code></pre>
<p>Specifically, have a look at <code>nextActionWait</code> time.</p>
<p>If you're concerned about missing an attestation or proposal, wait until <code>nextActionWait</code> is greater than 4 minutes or so before restarting Nimbus.</p>
<p>You can also use the <code>nimbus-eth2</code> <a href="./api.html">API</a>. For example, to check if your validator has a next Proposal slot assigned, run:</p>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_validator_duties_proposer&quot;,&quot;params&quot;:[${HEAD_EPOCH_NUMBER}],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq &quot;.result[]&quot; | grep ${PATTERN_WHICH_MATCHES_VALIDATOR_PUBLIC_KEYS}
</code></pre>
<h2><a class="header" href="#subscribe-to-all-subnets" id="subscribe-to-all-subnets">Subscribe to all subnets</a></h2>
<p>Launching the beacon node with the <code>--subscribe-all-subnets</code> option increases bandwidth and cpu usage, but helps the network and makes the block production algorithm perform slightly better.</p>
<p>To elaborate a little, without this option enabled Nimbus only listens to a subset of the attestation traffic - in particular, Nimbus doesn't listen to all unaggregated traffic but instead relies on peers to aggregate attestations on the subnets it doesn't subscribe to. </p>
<p>With this option enabled, Nimbus listens to all unaggregated channels (subscribes to all subnets). Practically speaking, this means that when producing a block, Nimbus can &quot;top up&quot; the aggregates that other peers have made with it's own unaggregated attestations. This can lead to better packing in some cases, which can lead to slightly greater rewards.</p>
<h2><a class="header" href="#useful-resources" id="useful-resources">Useful resources</a></h2>
<ul>
<li>
<p><a href="https://kb.beaconcha.in/rewards-and-penalties">The journey of a validator balance</a></p>
</li>
<li>
<p><a href="https://pintail.xyz/posts/validator-rewards-in-practice/">Validator rewards in practice</a></p>
</li>
</ul>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/profits.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#monitor-the-health-of-your-node" id="monitor-the-health-of-your-node">Monitor the health of your node</a></h1>
<p>The most important thing for the the health, performance and stablity of your node and the overall network is the strength of your node's network connectivity / peer count.</p>
<p>See <a href="./networking.html">here</a> for our networking related tips and tricks.</p>
<h2><a class="header" href="#keep-track-of-your-attestation-effectiveness" id="keep-track-of-your-attestation-effectiveness">Keep track of your attestation effectiveness</a></h2>
<p>Attestation effectiveness is a metric that directly affects your validator rewards. In simple terms, an attestation is more valuable the sooner it is put into a block and included in the chain. </p>
<p>This interval is called the <em>inclusion distance</em> of an attestation. The smaller it is, the more profitable your validator will be. For a deeper understanding we highly recommend reading <a href="https://www.attestant.io/posts/defining-attestation-effectiveness/#:%7E:text=Stakers%20looking%20to%20maximize%20their,provide%20clear%20metrics%20for%20performance.">Attestant's wonderful blog post</a> on the matter.</p>
<p>You can verify your validator's effectiveness on the <a href="https://beaconcha.in/">beaconcha.in</a> website.</p>
<p><img src="https://i.imgur.com/u80Ub2j.png" alt="" /></p>
<p>Ideally you want to see a value above 80%.</p>
<p>While attestation effectiveness depends on a variety of factors - attestation network propagation, your network connectivity, and the peers you are connected to - your network connectivity is likely the most important factors you can control to improve this metric. Apart from the tips outlined on this guide, you could also experiment with <a href="./profits.html#subscribe-to-all-subnets">subscribing to all subnets</a>.</p>
<h2><a class="header" href="#monitor-your-systems-network-io-usage" id="monitor-your-systems-network-io-usage">Monitor your system's network I/O usage</a></h2>
<p>If you're a Linux user and want to track how much network I/O your system uses over time, you can install a nice utility called <a href="https://humdi.net/vnstat/"><code>vnstat</code></a>.</p>
<p>To install, run:</p>
<pre><code>sudo apt install vnstat
</code></pre>
<p>To run it:</p>
<p><em>TBC -See <a href="https://github.com/jclapis/rp-pi-guide/blob/main/Native.md#monitoring-your-pis-performance">here</a> for more</em></p>
<h2><a class="header" href="#keep-an-eye-on-the-logs" id="keep-an-eye-on-the-logs">Keep an eye on the logs</a></h2>
<h2><a class="header" href="#keep-an-eye-on-the-metrics" id="keep-an-eye-on-the-metrics">Keep an eye on the metrics</a></h2>
<h2><a class="header" href="#grafana" id="grafana">Grafana</a></h2>
<h2><a class="header" href="#relevant-rest-api-queries" id="relevant-rest-api-queries">Relevant REST API queries</a></h2>
<h2><a class="header" href="#external-tools" id="external-tools">External tools</a></h2>
<h3><a class="header" href="#beaconchain" id="beaconchain">beaconchain</a></h3>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/health.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#network-setup" id="network-setup">Network setup</a></h1>
<p>Nimbus will automatically connect to peers based on the health and quality of peers that it's already connected to. Depending on the network and the number of validators attached to the the node, Nimbus may need anywhere from 10 to 60 peers connected to operate well.</p>
<p>In addition to making outgoing connections, the beacon node node works best when others can connect to the node - this speeds up the process of finding good peers.</p>
<p>To allow incoming connections, the peer must be reachable via a public IP address.</p>
<p>By default, Nimbus uses UPnP to set up port forwarding and detect your external IP address. If you do not have UPnP enabled, you may need to pass additional command-line options to the node, as detailed below.
A collection of tips and tricks to help improve your network connectivity.</p>
<h2><a class="header" href="#monitor-your-peer-count" id="monitor-your-peer-count">Monitor your Peer count</a></h2>
<p>If your Peer count is low (less than <code>15</code>) and/or you repeatedly see either of the following warnings:</p>
<p><code>Peer count low, no new peers discovered...</code></p>
<p>or </p>
<p><code>No peers for topic, skipping publish...</code></p>
<p>It means that Nimbus is unable to find a sufficient number of peers to guarantee stable operation, and you may miss attestations and blocks as a result. </p>
<p>Most commonly, this happens when your computer is not reachable from the outside and therefore won't be able to accept any incoming peer connections.</p>
<p>If you're on a home network, the fix here is to <a href="./networking.html#set-up-port-forwarding">set up port forwarding</a> (this may require you to <a href="./networking.html#pass-the-extip-option">pass the extip option</a> and <a href="./networking.html#set-enr-auto-update">set enr-auto-update</a>).</p>
<p>The first step however, is to check for incoming connections.</p>
<h2><a class="header" href="#check-for-incoming-connections" id="check-for-incoming-connections">Check for incoming connections</a></h2>
<p>To check if you have incoming connections set, run:</p>
<pre><code>curl -s http://localhost:8008/metrics | grep libp2p_open_streams 
</code></pre>
<p>In the output, look for a line that looks like:</p>
<pre><code>libp2p_open_streams{type=&quot;ChronosStream&quot;,dir=&quot;in&quot;}
</code></pre>
<p>If there are no <code>dir=in</code> chronosstreams , incoming connections are not working.</p>
<blockquote>
<p><strong>N.B</strong> you need to run the client with the <code>--metrics</code> option enabled in order for this to work</p>
</blockquote>
<h2><a class="header" href="#pass-the-extip-option" id="pass-the-extip-option">Pass the extip option</a></h2>
<p>If you have a static public IP address, use the <code>--nat:extip:$EXT_IP_ADDRESS</code> option to pass it to the client,  where <code>$EXT_IP_ADDRESS</code> is your public IP. For example, if your public IP address is <code>1.2.3.4</code>, you'd run:</p>
<pre><code>./run-prater-beacon-node.sh --nat:extip:1.2.3.4
</code></pre>
<blockquote>
<p>Note that this should also work with a dynamic IP address. But you will probably also need to pass <code>enr-auto-update</code> as an option to the client.</p>
</blockquote>
<h2><a class="header" href="#set-enr-auto-update" id="set-enr-auto-update">Set enr auto update</a></h2>
<p>The <code>--enr-auto-update</code> feature keeps your external IP address up to date based on information received from other peers on the network. This option is useful with ISPs that assign IP addresses dynamically.</p>
<p>In practice this means relaunching the beacon node with <code>--enr-auto-update:true</code> (pass it as an option in the command line).</p>
<h2><a class="header" href="#set-up-port-forwarding" id="set-up-port-forwarding">Set up port forwarding</a></h2>
<p>If you're running on a home network and want to ensure you are able to receive incoming connections you may need to set up port forwarding (though some routers automagically set this up for you).</p>
<blockquote>
<p><strong>Note:</strong> If you are running your node on a virtual public cloud (VPC) instance, you can safely ignore this section.</p>
</blockquote>
<p>While the specific steps required vary based on your router, they can be summarised as follows:</p>
<ol>
<li>Determine your <a href="./networking.html#determine-your-public-ip-address">public IP address</a></li>
<li>Determine your <a href="./networking.html#determine-your-private-ip-address">private IP address</a></li>
<li>Browse to the management website for your home router (typically <a href="http://192.168.1.1">http://192.168.1.1</a>)</li>
<li>Log in as admin / root</li>
<li>Find the section to configure port forwarding</li>
<li>Configure a port forwarding rule with the following values:</li>
</ol>
<ul>
<li>External port: <code>9000</code></li>
<li>Internal port: <code>9000</code></li>
<li>Protocol: <code>TCP</code></li>
<li>IP Address: Private IP address of the computer running Nimbus</li>
</ul>
<ol start="7">
<li>Configure a second port forwarding rule with the following values:</li>
</ol>
<ul>
<li>External port: <code>9000</code></li>
<li>Internal port: <code>9000</code></li>
<li>Protocol: <code>UDP</code></li>
<li>IP Address: Private IP address of the computer running Nimbus</li>
</ul>
<h3><a class="header" href="#determine-your-public-ip-address" id="determine-your-public-ip-address">Determine your public IP address</a></h3>
<p>To determine your public IP address, visit <a href="http://v4.ident.me/">http://v4.ident.me/</a> or run this command:</p>
<pre><code>curl v4.ident.me
</code></pre>
<h3><a class="header" href="#determine-your-private-ip-address" id="determine-your-private-ip-address">Determine your private IP address</a></h3>
<p>To determine your private IP address, run the appropriate command for your OS:</p>
<p><strong>Linux:</strong></p>
<pre><code>ip addr show | grep &quot;inet &quot; | grep -v 127.0.0.1
</code></pre>
<p><strong>Windows:</strong></p>
<pre><code>ipconfig | findstr /i &quot;IPv4 Address&quot;
</code></pre>
<p><strong>macOS:</strong></p>
<pre><code>ifconfig | grep &quot;inet &quot; | grep -v 127.0.0.1
</code></pre>
<h2><a class="header" href="#check-open-ports-on-your-connection" id="check-open-ports-on-your-connection">Check open ports on your connection</a></h2>
<p>Use <a href="https://www.yougetsignal.com/tools/open-ports/">this tool</a> to check your external (public) IP address and detect open ports on your connection (Nimbus TCP and UDP ports are both set to <code>9000</code> by default).</p>
<h2><a class="header" href="#reading-the-logs" id="reading-the-logs">Reading the logs</a></h2>
<p><code>No peers for topic, skipping publish...</code></p>
<p>This is printed when the client lacks quality peers to publish attestations to - this is the most important indication that the node is having trouble keeping up. If you see this, you are missing attestations.</p>
<p><code>Peer count low, no new peers discovered...</code> </p>
<p>This is a sign that you may be missing attestations.</p>
<p><code>No external IP provided for the ENR...</code></p>
<p>This message basically means that the software did not manage to find a public IP address (by either looking at your routed interface IP address, and/or by attempting to get it from your gateway through UPnP or NAT-PMP).</p>
<p><code>Discovered new external address but ENR auto update is off...</code> </p>
<p>It's possible that your ISP has changed your IP address without you knowing. The first thing to do it to try relaunching the beacon node with with <code>--enr-auto-update:true</code> (pass it as an option in the command line).</p>
<p>If this doesn't fix the problem, the next thing to do is to check your external (public) IP address and detect open ports on your connection - you can use <a href="https://www.yougetsignal.com/tools/open-ports/">this site</a>.  Note that Nimbus <code>TCP</code> and <code>UDP</code> ports are both set to <code>9000</code> by default. See above for how to set up port forwarding.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/networking.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#grafana-and-prometheus" id="grafana-and-prometheus">Grafana and Prometheus</a></h1>
<p>In this page we'll cover how to use  Grafana and Prometheus to help you visualise important real-time metrics concerning your validator and/or beacon node.</p>
<p>Prometheus is an open-source systems monitoring and alerting toolkit. It runs as a service on your computer and its job is to capture metrics. You can find more information about Prometheus <a href="https://prometheus.io/docs/introduction/overview/">here</a>.</p>
<p>Grafana is a tool for beautiful dashboard monitoring that works well with Prometheus. You can learn more about Grafana <a href="https://github.com/grafana/grafana">here</a>.</p>
<h2><a class="header" href="#simple-metrics" id="simple-metrics">Simple metrics</a></h2>
<p>Run the beacon node  with the <code>--metrics</code> flag:</p>
<pre><code>./run-prater-beacon-node.sh --metrics
</code></pre>
<p>And visit <a href="http://127.0.0.1:8008/metrics">http://127.0.0.1:8008/metrics</a> to see the raw metrics. You should see a plaintext page that looks something like this:</p>
<pre><code># HELP nim_runtime_info Nim runtime info
# TYPE nim_runtime_info gauge
nim_gc_mem_bytes 6275072.0
nim_gc_mem_occupied_bytes 1881384.0
nim_gc_heap_instance_occupied_bytes{type_name=&quot;KeyValuePairSeq[digest.Eth2Digest, block_pools_types.BlockRef]&quot;} 25165856.0
nim_gc_heap_instance_occupied_bytes{type_name=&quot;BlockRef&quot;} 17284608.0
nim_gc_heap_instance_occupied_bytes{type_name=&quot;string&quot;} 6264507.0
nim_gc_heap_instance_occupied_bytes{type_name=&quot;seq[SelectorKey[asyncdispatch.AsyncData]]&quot;} 409632.0
nim_gc_heap_instance_occupied_bytes{type_name=&quot;OrderedKeyValuePairSeq[Labels, seq[Metric]]&quot;} 122720.0
nim_gc_heap_instance_occupied_bytes{type_name=&quot;Future[system.void]&quot;} 79848.0
nim_gc_heap_instance_occupied_bytes{type_name=&quot;anon ref object from /Users/hackingresearch/nimbus/clone/nim-beacon-chain/vendor/nimbus-build-system/vendor/Nim/lib/pure/asyncmacro.nim(319, 33)&quot;} 65664.0
nim_gc_heap_instance_occupied_bytes{type_name=&quot;anon ref object from /Users/hackingresearch/nimbus/clone/nim-beacon-chain/vendor/nimbus-build-system/vendor/Nim/lib/pure/asyncnet.nim(506, 11)&quot;} 43776.0
nim_gc_heap_instance_occupied_bytes{type_name=&quot;seq[byte]&quot;} 37236.0
nim_gc_heap_instance_occupied_bytes{type_name=&quot;seq[TrustedAttestation]&quot;} 29728.0

...
</code></pre>
<blockquote>
<p><strong>Note:</strong> Metrics are by default only accessible from the same machine as the beacon node is running on - to fetch metrics from a remote machine, an SSH tunnel is recommended.</p>
</blockquote>
<p>Unfortunately, this simple method only offers one snapshot in time (you'll need to keep refreshing to see the data update) which means it's impossible to see a useful history of the metrics. In short, it's far from optimal from an information design point of view.</p>
<p>In order to settle on a better solution, we'll need the help of two external projects -- Prometheus and Grafana.</p>
<h2><a class="header" href="#prometheus-and-grafana" id="prometheus-and-grafana">Prometheus and Grafana</a></h2>
<p>The following steps will take you through how to use Prometheus and Grafana to spin up a beautiful and useful monitoring dashboard for your validator and beacon node.</p>
<h3><a class="header" href="#steps-1" id="steps-1">Steps</a></h3>
<h4><a class="header" href="#1-download-prometheus" id="1-download-prometheus">1. Download Prometheus</a></h4>
<p>Use your favourite package manager to download Prometheus -- for example <code>apt-get install prometheus</code> on Ubuntu, or <code>brew install prometheus</code> on MacOS, should do the trick.</p>
<blockquote>
<p>If you don't use a package manager, you can download the <a href="https://prometheus.io/download/">latest release</a> of directly from Prometheus website. To extract it, run:</p>
<pre><code>tar xvfz prometheus-*.tar.gz
cd prometheus-*
</code></pre>
</blockquote>
<h4><a class="header" href="#2-copy-the-binary" id="2-copy-the-binary">2. Copy the binary</a></h4>
<p>The Prometheus server is a single binary called prometheus (or prometheus.exe on Microsoft Windows). Copy it over to <a href="https://unix.stackexchange.com/questions/4186/what-is-usr-local-bin"><code>/usr/local/bin</code></a></p>
<pre><code>cp prometheus-2.20.1.linux-amd64/prometheus /usr/local/bin/
</code></pre>
<h4><a class="header" href="#3-run-prometheus-with-the-default-configuration-file" id="3-run-prometheus-with-the-default-configuration-file">3. Run Prometheus with the default configuration file</a></h4>
<p>Prometheus relies on a YAML configuration file to let it know where, and how often, to scrape data.</p>
<p>Example config file:</p>
<pre><code>global:
  scrape_interval: 12s

scrape_configs:
  - job_name: &quot;nimbus&quot;
    static_configs:
      - targets: ['127.0.0.1:8008']

</code></pre>
<p>Save the above as <code>prometheus.yml</code> in the <code>nimbus-eth2</code> repo.</p>
<p>Then run Prometheus:</p>
<pre><code>prometheus --config.file=./prometheus.yml --storage.tsdb.path=./prometheus
</code></pre>
<p>You should see the following confirmation in the logs:</p>
<pre><code>level=info ts=2021-01-22T14:52:10.604Z caller=main.go:673 msg=&quot;Server is ready to receive web requests.&quot;
</code></pre>
<h4><a class="header" href="#4-download-grafana" id="4-download-grafana">4. Download Grafana</a></h4>
<p><a href="(https://grafana.com/grafana/download?platform=linux)">Download the latest release</a> of Grafana for your platform. You need version 7.2 or newer.</p>
<blockquote>
<p><strong>Note:</strong> If you use a package manager, you can also download Grafana that way -- for example <code>apt-get install grafana</code> on Ubuntu, or <code>brew install grafana</code> on MacOS, should do the trick.</p>
</blockquote>
<h4><a class="header" href="#5-install-and-start-grafana" id="5-install-and-start-grafana">5. Install and start Grafana</a></h4>
<p>Follow <a href="https://grafana.com/docs/grafana/latest/installation/">the instructions for your platform</a> to install and start Grafana.</p>
<h4><a class="header" href="#6-configure-login" id="6-configure-login">6. Configure login</a></h4>
<p>Go to <a href="http://localhost:3000/">http://localhost:3000/</a>, you should see a Grafana login screen that looks like this</p>
<p><img src="https://i.imgur.com/jcP1qWl.png" alt="" /></p>
<p>Type in <code>admin</code> for both the username and password. You'll be asked to change the password (we recommend you do so).</p>
<h4><a class="header" href="#7-add-a-data-source" id="7-add-a-data-source">7. Add a data source</a></h4>
<p>Hover your mouse over the gear icon in the left menu bar, and click on the <code>Data Sources</code> option in the sub-menu that pops up.</p>
<p><img src="https://i.imgur.com/0Xsgx61.png" alt="" /></p>
<p>Now click on the <code>Add Data Source</code> button in the center of the screen</p>
<p><img src="https://i.imgur.com/YRVJjdD.png" alt="" /></p>
<p>Select <code>Prometheus</code></p>
<p><img src="https://i.imgur.com/YpwThOr.png" alt="" /></p>
<p>Enter <code>http://localhost:9090</code> in the URL field</p>
<p><img src="https://i.imgur.com/PtVOnur.png" alt="" /></p>
<p>Set the &quot;Scrape interval&quot; field to the same value you used in the Prometheus config (&quot;12&quot; in our example above).</p>
<p>Scroll to the bottom and click on <code>Save and Test</code></p>
<p><img src="https://i.imgur.com/GJVdwaK.png" alt="" /></p>
<p>If everything is working correctly you should see a green <code>Data source is working</code> box pop up</p>
<p><img src="https://i.imgur.com/vf5ahNA.png" alt="" /></p>
<h4><a class="header" href="#8-import-a-dashboard" id="8-import-a-dashboard">8. Import a dashboard</a></h4>
<p>Now, let's import a dashboard; hover your mouse over the <code>+</code> icon in the left menu bar and select <code>import</code> from the pop-up menu</p>
<p><img src="https://i.imgur.com/WnnAcUR.png" alt="" /></p>
<p>Click on <code>Upload JSON file</code></p>
<p><img src="https://i.imgur.com/l65ICZ2.png" alt="" /></p>
<p>Select the <code>beacon_nodes_Grafana_dashboard.json</code>  from the <code>nimbus-eth2/grafana/</code> folder and click on <code>Import</code></p>
<p><img src="https://i.imgur.com/SoU5Isz.png" alt="" /></p>
<p>You'll be directed to the dashboard where you'll be able to gain insights into the performance of <code>nimbus-eth2</code> and your validators</p>
<p><img src="https://i.imgur.com/aIfJ1iT.png" alt="" /></p>
<blockquote>
<p><strong>Note:</strong> the dashboard is very much a work in progress. Some of the highlights right now include received and proposed blocks, received and sent attestations, peers, memory and cpu usage stats. But keep an eye out for additional metrics in the near future.</p>
</blockquote>
<p>And voila! That's all there is to it :)</p>
<h2><a class="header" href="#community-dashboards" id="community-dashboards">Community dashboards</a></h2>
<h3><a class="header" href="#joe-clapis" id="joe-clapis">Joe Clapis</a></h3>
<p><img src="https://i.imgur.com/05eJeBr.png" alt="" /></p>
<p>Joe – who’s done some brilliant work <a href="https://our.status.im/rocket-pool-integration/">integrating Nimbus with Rocket Pool</a> – has created a <a href="https://github.com/jclapis/rp-pi-guide/blob/main/Grafana.md">wonderful guide</a> where he takes you through how to set up a Grafana server on your Pi – using his dashboard as an example.</p>
<p>In his words:</p>
<blockquote>
<p>This captures just about every metric I think I’d like to see at a glance.</p>
</blockquote>
<p>Whether or not you're running a Pi, we recommend you check out his guide <a href="https://github.com/jclapis/rp-pi-guide/blob/main/Grafana.md">here</a>.</p>
<h3><a class="header" href="#metanull" id="metanull">Metanull</a></h3>
<p><img src="https://i.imgur.com/OlvNGlq.jpg" alt="" /></p>
<p>A dashboard aimed primarily at users rather than developers.</p>
<p>Note that this dashboard does rely heavily on three prometheus exporter tools: <code>node_exporter</code> for system metrics, <code>json_exporter</code> for ETH price, and <code>blackbox_exporter</code> for ping times.</p>
<p>The good news is that you don't need to use all these tools, as long as you take care of removing the related panels.</p>
<p>See <a href="https://github.com/metanull-operator/eth2-grafana/tree/master/nimbus">here</a> for a detailed guide explaining how to use it.</p>
<h2><a class="header" href="#enabling-mobile-alerts" id="enabling-mobile-alerts">Enabling mobile alerts</a></h2>
<h3><a class="header" href="#telegram" id="telegram">Telegram</a></h3>
<p>TODO</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/metrics-pretty-pictures.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#supplying-your-own-infura-endpoint" id="supplying-your-own-infura-endpoint">Supplying your own Infura endpoint</a></h1>
<p>In a nutshell, Infura is a hosted ethereum node cluster that lets you make requests to the eth1 blockchain without requiring you to set up your own eth1 node.</p>
<p>While we do support Infura to process incoming validator deposits, we recommend running your own eth1 node to avoid relying on a third-party-service.</p>
<blockquote>
<p><strong>Note:</strong> Nimbus currently supports remote Infura nodes and <a href="./eth1.html#geth">local Geth nodes</a>. In the future, we plan on having our own eth1 client -- <a href="https://github.com/status-im/nimbus">Nimbus 1</a> -- be the recommended default.</p>
</blockquote>
<h3><a class="header" href="#1-visit-infuraio" id="1-visit-infuraio">1. Visit Infura.io</a></h3>
<p>Go to:</p>
<p><a href="https://infura.io/">https://infura.io/</a></p>
<p>and click on <code>Get Started For Free</code></p>
<p><img src="https://i.imgur.com/BtStgup.png" alt="" /></p>
<h3><a class="header" href="#2-sign-up" id="2-sign-up">2. Sign up</a></h3>
<p>Enter your email address and create a password</p>
<p><img src="https://i.imgur.com/al1OsdR.png" alt="" /></p>
<h3><a class="header" href="#3-verify-email-address" id="3-verify-email-address">3. Verify email address</a></h3>
<p>You should have received an email from Infura in your inbox. Open up it up and click on <code>Confirm Email Address</code></p>
<p><img src="https://i.imgur.com/EAD8ZhV.png" alt="" /></p>
<h3><a class="header" href="#4-go-to-dashboard" id="4-go-to-dashboard">4. Go to dashboard</a></h3>
<p>This will take you to your Infura dashboard (https://infura.io/dashboard/)</p>
<p><img src="https://i.imgur.com/LuNcoYr.png" alt="" /></p>
<h3><a class="header" href="#5-create-your-first-project" id="5-create-your-first-project">5. Create your first project</a></h3>
<p>Click on the first option (<code>create your first project</code>) under <code>Let's Get Started</code></p>
<p><img src="https://i.imgur.com/wBAGhcs.png" alt="" /></p>
<p>Choose a name for your project</p>
<p><img src="https://i.imgur.com/yr5vnSo.png" alt="" /></p>
<p>You'll be directed to the settings page of your newly created project</p>
<p><img src="https://i.imgur.com/kx3R8XS.png" alt="" /></p>
<h3><a class="header" href="#6-select-endpoint" id="6-select-endpoint">6. Select endpoint</a></h3>
<blockquote>
<p>⚠️  <strong>Warning:</strong> if you're connecting to mainnet, you should skip this step</p>
</blockquote>
<p>If you're connecting to a testnet, in the <code>KEYS</code> section, click on the dropdown menu to the right of <code>ENDPOINTS</code>, and select <code>GÖRLI</code></p>
<p><img src="https://i.imgur.com/D9186kv.png" alt="" /></p>
<h3><a class="header" href="#7-copy-the-websocket-endpoint" id="7-copy-the-websocket-endpoint">7. Copy the websocket endpoint</a></h3>
<p>Copy the address that starts with <code>wss://</code></p>
<p><img src="https://i.imgur.com/fZ6Bcjy.png" alt="" /></p>
<blockquote>
<p>⚠️  <strong>Warning:</strong> make sure you've copied the endpoint that starts with<code>wss</code> (websocket), and not the <code>https</code> endpoint. If you're connecting  to mainnet this will read <code>wss://mainnet.infura.io/ws/...</code></p>
</blockquote>
<h3><a class="header" href="#8-run-the-beacon-node" id="8-run-the-beacon-node">8. Run the beacon node</a></h3>
<p><a href="./start-syncing.html">Launch the beacon node</a> on your favourite testnet, pasaing in your websocket endpoint as the <a href="./start-syncing.html#web3-provider-url">Web3 provider URL</a>.</p>
<h3><a class="header" href="#9-check-stats" id="9-check-stats">9. Check stats</a></h3>
<p>Visit your project's stats page to see a summary of your eth1 related activity and method calls</p>
<p><img src="https://i.imgur.com/MZVTHHV.png" alt="" /></p>
<p>That's all there is to it :)</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/infura-guide.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#migrate-from-another-client" id="migrate-from-another-client">Migrate from another client</a></h1>
<p><em>See <a href="./migration-options.html">here</a> for advanced options</em></p>
<h2><a class="header" href="#step-1---sync-the-beacon-node" id="step-1---sync-the-beacon-node">Step 1 - Sync the beacon node</a></h2>
<p>No matter which client you are migrating over from, the first step is to sync the Nimbus beacon node.</p>
<p>The easiest way to do this is to follow the <a href="./quick-start.html">beacon node quick start guide</a>.  Syncing the beacon node might take up to 30h depending on your hardware - you should keep validating using your current setup until it completes.</p>
<h2><a class="header" href="#step-2---export-your-slashing-protection-history" id="step-2---export-your-slashing-protection-history">Step 2 - Export your slashing protection history</a></h2>
<blockquote>
<p>Hat tip to Michael Sproul for his <a href="https://lighthouse.sigmaprime.io/switch-to-lighthouse.html">wonderful guide</a> on how to migrate from Prysm to Lighthouse.</p>
</blockquote>
<h3><a class="header" href="#export-from-prysm" id="export-from-prysm">Export from Prysm</a></h3>
<p><strong>1. Disable the Prysm validator client</strong></p>
<p>Once your Nimbus beacon node has synced and you're satisfied that it's working, stop and disable the Prysm validator client (you can also stop the Prysm beacon node if you wish).</p>
<p>If you're using systemd and your service is called <code>prysmvalidator</code>, run the following commands to stop and disable the service:</p>
<pre><code>sudo systemctl stop prysmvalidator.service
sudo systemctl disable prysmvalidator.service
</code></pre>
<p>It's important that you disable the Prysm validator as well as stopping it, to prevent it from starting up again on reboot.</p>
</br>
<p><strong>2. Export slashing protection history</strong></p>
<p>Run the following to export your Prysm validator's <a href="https://eips.ethereum.org/EIPS/eip-3076">slashing protection</a> history:</p>
<pre><code>prysm.sh validator slashing-protection export \ 
 --datadir=/your/prysm/wallet \ 
 --slashing-protection-export-dir=/path/to/export_dir
</code></pre>
<p>To be extra sure that your validator has stopped, wait a few epochs and confirm that your validator have stopped attesting (check <a href="https://beaconcha.in/">beaconcha.in</a>).</p>
</br>
<h3><a class="header" href="#export-from-nimbus" id="export-from-nimbus">Export from Nimbus</a></h3>
<p><strong>1. Disable the Nimbus validator client</strong></p>
<p>Once your Nimbus beacon node on your new setup has synced and you're satisfied that it's working, stop and disable the Nimbus validator client on your current setup. </p>
<p>If you're using systemd and your service is called <code>nimbus-eth2-mainnet</code>, run the following commands to stop and disable the service:</p>
<pre><code>sudo systemctl stop nimbus-eth2-mainnet.service
sudo systemctl disable nimbus-eth2-mainnet.service
</code></pre>
<p>It's important that you disable the service as well as stopping it, to prevent it from starting up again on reboot.</p>
</br>
<p><strong>2. Export slashing protection history</strong></p>
<p>Run the following to export your Nimbus validator's <a href="https://eips.ethereum.org/EIPS/eip-3076">slashing protection</a> history:</p>
<pre><code>build/nimbus_beacon_node slashingdb export database.json
</code></pre>
<p>This will export your history in the correct format to <code>database.json</code>.</p>
<p>To be extra sure that your validator has stopped, wait a few epochs and confirm that your validator have stopped attesting (check <code>beaconcha.in</code>).</p>
<h3><a class="header" href="#export-from-lighthouse" id="export-from-lighthouse">Export from Lighthouse</a></h3>
<p><em>coming soon</em></p>
<h3><a class="header" href="#export-from-teku" id="export-from-teku">Export from Teku</a></h3>
<p><em>coming soon</em></p>
<h2><a class="header" href="#step-3---import-your-validator-keys-into-nimbus" id="step-3---import-your-validator-keys-into-nimbus">Step 3 - Import your validator key(s) into Nimbus</a></h2>
<p>To import you validator key(s), follow the instructions <a href="./keys.html">outlined here</a>.</p>
<blockquote>
<p>To check that your key(s) has been successfully imported, look for a file named after your public key in <code>build/data/shared_mainet_0/secrets/</code>.</p>
<p>If you run into an error at this stage, it's probably because the wrong permissions have been set on either a folder or file. See <a href="faq.html#folder-permissions">here</a> for how to fix this.</p>
</blockquote>
<h2><a class="header" href="#step-4---import-your-slashing-protection-history" id="step-4---import-your-slashing-protection-history">Step 4 - Import your slashing protection history</a></h2>
<p>To import the slashing protection history you exported in <strong>step 3</strong>, from the <code>nimbus-eth2</code> directory run:</p>
<pre><code>build/nimbus_beacon_node slashingdb import path/to/export_dir/database.json
</code></pre>
<p>Replacing <code>/path/to/export_dir</code> with the file/directory you specified when you exported your slashing protection history.</p>
<h2><a class="header" href="#step-5---start-the-nimbus-validator" id="step-5---start-the-nimbus-validator">Step 5 - Start the Nimbus validator</a></h2>
<p>Follow the instructions <a href="./connect-eth2.html">here</a> to start your validator using our pre-built <a href="./binaries.html">binaries</a>.</p>
<p>If you prefer to use Docker, see <a href="./docker.html">here</a></p>
<p>For a quick guide on how to set up a systemd service, see <a href="./beacon-node-systemd.html">here</a></p>
<h2><a class="header" href="#final-thoughts" id="final-thoughts">Final thoughts</a></h2>
<p>If you are unsure of the safety of a step, please get in touch with us directly on <a href="https://discord.gg/nnNEBvHu3m">discord</a>. Additionally, we recommend testing the migration works correctly on a testnet before going ahead on mainnet.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/migration.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#validate-with-a-raspberry-pi-guide" id="validate-with-a-raspberry-pi-guide">Validate with a Raspberry Pi: Guide</a></h1>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">I expect the new Raspberry Pi 4 (4GB RAM option, external SSD) to handle an Eth2 validator node without breaking a sweat. That&#39;s $100 of hardware running at 10 Watts to support a 32 ETH node (currently ~$10K stake).</p>&mdash; Justin Ðrake (@drakefjustin) <a href="https://twitter.com/drakefjustin/status/1143091047058366465?ref_src=twsrc%5Etfw">June 24, 2019</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<blockquote>
<p>In addition to this guide, we highly recommend this <a href="https://docs.rocketpool.net/guides/node/local/prepare-pi.html#preliminary-setup">wonderful and complementary resource</a> by community member Joe Clapis.</p>
</blockquote>
<h2><a class="header" href="#introduction" id="introduction">Introduction</a></h2>
<p>This page will take you through how to use your laptop to program your Raspberry Pi, get Nimbus running, and connect to the <strong>Prater testnet</strong>.</p>
<p>One of the most important aspects of the Raspberry Pi experience is trying to make it as easy as possible to get started. As such, we try our best to explain things from first-principles.</p>
<h2><a class="header" href="#prerequisites-1" id="prerequisites-1">Prerequisites</a></h2>
<ul>
<li>Raspberry Pi 4 (4GB RAM option)</li>
<li>64GB microSD Card</li>
<li>microSD USB adapter</li>
<li>5V 3A USB-C charger</li>
<li>Reliable Wifi connection</li>
<li>Laptop</li>
<li>Basic understanding of the <a href="https://www.learnenough.com/command-line-tutorial/basics">command line</a></li>
<li>160GB SSD</li>
</ul>
<blockquote>
<p>⚠️  You will need an SSD to run the Nimbus (without an SSD drive you have absolutely no chance of syncing the Ethereum blockchain). You have two options:</p>
<ol>
<li>
<p>Use an USB portable SSD disk such as the Samsung T5 Portable SSD.</p>
</li>
<li>
<p>Use an USB 3.0 External Hard Drive Case with a SSD Disk. For example, <a href="https://twitter.com/EthereumOnARM">Ethereum on Arm</a> use an Inateck 2.5 Hard Drive Enclosure FE2011. Make sure to buy a case with an UASP compliant chip, particularly, one of these: JMicron (JMS567 or JMS578) or ASMedia (ASM1153E).</p>
</li>
</ol>
<p>In both cases, avoid low quality SSD disks (the SSD is a key component of your node and can drastically affect both the performance and sync time). Keep in mind that you need to plug the disk to an USB 3.0 port (the blue port).</p>
<p><strong>N.B</strong>
<em>If you have a Raspberry Pi 4 and are getting bad speeds transferring data to/from USB3.0 SSDs, please <a href="https://www.raspberrypi.org/forums/viewtopic.php?t=245931#p1501426">read this recommended fix.</a></em></p>
</blockquote>
<h3><a class="header" href="#1-download-raspberry-pi-imager" id="1-download-raspberry-pi-imager">1. Download Raspberry Pi Imager</a></h3>
<p><a href="https://www.raspberrypi.org/blog/raspberry-pi-imager-imaging-utility/">Raspberry Pi Imager</a> is a new imaging utility that makes it simple to manage your microSD card with Raspbian (the free Pi operating system based on Debian).</p>
<p>You can find the <a href="https://www.learnenough.com/command-line-tutorial/basics">download</a> link for your operating system here: <a href="https://downloads.raspberrypi.org/imager/imager_1.4.exe">Windows</a>, <a href="https://downloads.raspberrypi.org/imager/imager_1.4.dmg">macOS</a>, <a href="https://downloads.raspberrypi.org/imager/imager_1.4_amd64.deb">Ubuntu</a>.</p>
<h3><a class="header" href="#2-download-raspian-64-bit-os-beta" id="2-download-raspian-64-bit-os-beta">2. Download Raspian 64-bit OS (Beta)</a></h3>
<p>You can find the latest version, <a href="https://downloads.raspberrypi.org/raspios_arm64/images/">here</a>.</p>
<h3><a class="header" href="#3-plug-in-sd-card" id="3-plug-in-sd-card">3. Plug in SD card</a></h3>
<p>Use your microSD to USB adapter to plug the SD card into your computer.</p>
<h3><a class="header" href="#4-download-raspberry-pi-os" id="4-download-raspberry-pi-os">4. Download Raspberry Pi OS</a></h3>
<p>Open Raspberry Pi Imager and click on <strong>CHOOSE OS</strong></p>
<p><img src="https://storage.googleapis.com/ethereum-hackmd/upload_7b8cfa54f877218b6d971f09fa8d62ff.png" alt="" /></p>
<p>Scroll down and click on <strong>Use custom</strong></p>
<p><img src="https://i.imgur.com/ar88MTt.png" alt="" /></p>
<p>Find the OS you downloaded in step 2</p>
<p><img src="https://i.imgur.com/NeOT8pf.png" alt="" /></p>
<h3><a class="header" href="#4b-write-to-sd-card" id="4b-write-to-sd-card">4b. Write to SD card</a></h3>
<p>Click on <strong>CHOOSE SD CARD</strong>. You should see a menu pop-up with your SD card listed -- Select it</p>
<p><img src="https://storage.googleapis.com/ethereum-hackmd/upload_f90713c1ef782a94b5fce9eb8249c206.png" alt="" /></p>
<p>Click on <strong>WRITE</strong></p>
<p><img src="https://i.imgur.com/NeOT8pf.png" alt="" /></p>
<p>Click <strong>YES</strong></p>
<p><img src="https://storage.googleapis.com/ethereum-hackmd/upload_160208a5bc983165c2a1eb9bffed01c2.png" alt="" /></p>
<p>Make a cup of coffee :)</p>
<h3><a class="header" href="#5-set-up-wireless-lan" id="5-set-up-wireless-lan">5. Set up wireless LAN</a></h3>
<p>Since you have loaded Raspberry Pi OS onto a blank SD card, you will have two partitions. The first one, which is the smaller one, is the <code>boot</code> partition.</p>
<p>Create a <code>wpa_supplicant</code> configuration file in the <code>boot</code> partition with the following content:</p>
<pre><code># wpa_supplicant.conf

ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1
country=&lt;Insert 2 letter ISO 3166-1 country code here&gt;

network={
    ssid=&quot;&lt;Insert your Wifi network's name here&gt;&quot;
    psk=&quot;&lt;Insert your Wifi network's password here&gt;&quot;
}
</code></pre>
<blockquote>
<p><strong>Note:</strong> Don't forget to replace the placeholder <code>country</code>, <code>ssid</code>, and <code>psk</code> values. See <a href="https://en.wikipedia.org/wiki/ISO_3166-1">Wikipedia</a> for a list of 2 letter <code>ISO 3166-1</code> country codes.</p>
</blockquote>
<h3><a class="header" href="#6-enable-ssh-using-linux-or-macos" id="6-enable-ssh-using-linux-or-macos">6. Enable SSH (using Linux or macOS)</a></h3>
<p>You can <a href="https://www.raspberrypi.org/documentation/remote-access/ssh/">access the command line</a> of a Raspberry Pi remotely from another computer or device on the same network using <a href="https://en.wikipedia.org/wiki/Ssh_(Secure_Shell)">SSH</a>.</p>
<p>While SSH is not enabled by default, you can enable it by placing a file named <code>ssh</code>, without any extension, onto the boot partition of the SD card.</p>
<p>When the Pi boots, it will look for the <code>ssh</code> file. If it is found, SSH is enabled and the file is deleted. The content of the file does not matter; it can contain text, or nothing at all.</p>
<p>To create an empty <code>ssh</code> file, from the home directory of the <code>boot</code> partition file, run:</p>
<pre><code>touch ssh
</code></pre>
<h3><a class="header" href="#7-find-your-pis-ip-address" id="7-find-your-pis-ip-address">7. Find your Pi's IP address</a></h3>
<p>Since Raspberry Pi OS supports <a href="https://en.wikipedia.org/wiki/Multicast_DNS">Multicast_DNS</a> out of the box, you can reach your Raspberry Pi by using its hostname and the <code>.local</code> suffix.</p>
<p>The default hostname on a fresh Raspberry Pi OS install is <code>raspberrypi</code>, so any Raspberry Pi running Raspberry Pi OS should respond to:</p>
<pre><code>ping raspberrypi.local
</code></pre>
<p>The output should look more or less as follows:</p>
<pre><code>PING raspberrypi.local (195.177.101.93): 56 data bytes
64 bytes from 195.177.101.93: icmp_seq=0 ttl=64 time=13.272 ms
64 bytes from 195.177.101.93: icmp_seq=1 ttl=64 time=16.773 ms
64 bytes from 195.177.101.93: icmp_seq=2 ttl=64 time=10.828 ms
...
</code></pre>
<p>Keep note of your Pi's IP address. In the above case, that's <code>195.177.101.93</code></p>
<h3><a class="header" href="#8-ssh-using-linux-or-macos" id="8-ssh-using-linux-or-macos">8. SSH (using Linux or macOS)</a></h3>
<p>Connect to your Pi by running:</p>
<pre><code>ssh pi@195.177.101.93
</code></pre>
<p>You'll be prompted to enter a password:</p>
<pre><code>pi@195.177.101.93's password:
</code></pre>
<p>Enter the Pi's default password: <code>raspberry</code></p>
<p>You should see a message that looks like the following:</p>
<pre><code>Linux raspberrypi 5.4.51-v8+ #1333 SMP PREEMPT Mon Aug 10 16:58:35 BST 2020 aarch64

The programs included with the Debian GNU/Linux system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.
Last login: Thu Aug 20 12:59:01 2020

SSH is enabled and the default password for the 'pi' user has not been changed.
This is a security risk - please login as the 'pi' user and type 'passwd' to set a new password.
</code></pre>
<p>Followed by a command-line prompt indicating a successful connection:</p>
<pre><code>pi@raspberrypi:~ $
</code></pre>
<h3><a class="header" href="#9-increase-swap-size-to-2gb" id="9-increase-swap-size-to-2gb">9. Increase swap size to 2GB</a></h3>
<p>The first step is to increase the <a href="https://itsfoss.com/swap-size/">swap size</a> to 2GB (2048MB).</p>
<blockquote>
<p><strong>Note:</strong> Swap acts as a breather to your system when the RAM is exhausted. When the RAM is exhausted, your Linux system uses part of the hard disk memory and allocates it to the running application.</p>
</blockquote>
<p>Use the Pi's built-in text editor <a href="https://www.nano-editor.org/dist/latest/cheatsheet.html">nano</a> to open up the swap file:</p>
<pre><code>sudo nano /etc/dphys-swapfile
</code></pre>
<p>Change the value assigned to <code>CONF_SWAPSIZE</code> from <code>100</code> to <code>2048</code>:</p>
<pre><code>...

# set size to absolute value, leaving empty (default) then uses computed value
#   you most likely don't want this, unless you have an special disk situation
CONF_SWAPSIZE=2048

...

</code></pre>
<p>Save (<code>Ctrl+S</code>) and exit (<code>Ctrl+X</code>).</p>
<h3><a class="header" href="#10-reboot" id="10-reboot">10. Reboot</a></h3>
<p>Reboot your Pi to have the above changes take effect:</p>
<pre><code>sudo reboot
</code></pre>
<p>This will cause your connection to close. So you'll need to <code>ssh</code> into your Pi again:</p>
<pre><code>ssh pi@195.177.101.93
</code></pre>
<blockquote>
<p><strong>Note:</strong> Remember to replace <code>195.177.101.93</code> with the IP address of your Pi.</p>
</blockquote>
<h3><a class="header" href="#10b-boot-from-external-ssd" id="10b-boot-from-external-ssd">10b. Boot from external SSD</a></h3>
<p>Follow <a href="https://www.tomshardware.com/how-to/boot-raspberry-pi-4-usb">this guide</a> to copy the contents of your SD card over to your SSD, and boot your Pi from your SSD.</p>
<blockquote>
<p><strong>Tips:</strong></p>
<p>Make sure you connect your SSD the Pi's USB 3 port (the blue port).</p>
<p>If your Pi is headless (no monitor attached) you can use the <a href="https://github.com/billw2/rpi-clone"><code>rpi-clone</code></a> repository to copy the contents of the SD over to the SSD; in a nutshell, replace steps 14 and 15 of the above guide with the following commands (which you should run from the Pi's <code>home</code> directory):</p>
<pre><code class="language-bash">git clone https://github.com/billw2/rpi-clone.git 
cd rpi-clone
sudo cp rpi-clone rpi-clone-setup /usr/local/sbin
sudo rpi-clone-setup -t testhostname
rpi-clone sda
</code></pre>
<p>For more on <code>raspi-config</code>, see <a href="https://www.raspberrypi.org/documentation/configuration/raspi-config.md">here</a>.</p>
<p>To shutdown your Pi safely, run <code>sudo shutdown -h now</code></p>
</blockquote>
<p>Once you're done, <code>ssh</code> back into your Pi.</p>
<h3><a class="header" href="#11-install-the-beacon-node" id="11-install-the-beacon-node">11. Install the beacon node</a></h3>
<p>Open the <a href="https://github.com/status-im/nimbus-eth2/releases/latest">Nimbus eth2 releases page</a> and copy the link for the file that starts with <code>nimbus-eth2_Linux_arm64v8</code>.</p>
<p>Run this in your home directory to download nimbus-eth2:</p>
<pre><code>mkdir nimbus-eth2
wget &lt;insert download link here&gt;
tar -xzf nimbus-eth2_Linux_arm64v8*.tar.gz -C nimbus-eth2
rm nimbus-eth2_Linux_arm64v8*.tar.gz
</code></pre>
<p>Now you can find the software in the nimbus-eth2 directory.</p>
<h3><a class="header" href="#12-copy-signing-key-over-to-pi" id="12-copy-signing-key-over-to-pi">12. Copy signing key over to Pi</a></h3>
<blockquote>
<p><strong>Note:</strong> If you haven't generated your validator key(s) and/or made your deposit yet, follow the instructions on <a href="./deposit.html">this page</a> before carrying on.</p>
</blockquote>
<p>We'll use the <code>scp</code> command to send files over SSH. It allows you to copy files between computers, say from your Raspberry Pi to your desktop/laptop, or vice-versa.</p>
<p>Copy the folder containing your validator key(s) from your computer to your <code>pi</code>'s homefolder by opening up a new terminal window and running the following command:</p>
<pre><code>scp -r &lt;VALIDATOR_KEYS_DIRECTORY&gt; pi@195.177.101.93:
</code></pre>
<blockquote>
<p><strong>Note:</strong> Don't forget the colon (:) at the end of the command!</p>
</blockquote>
<p>As usual, replace <code>195.177.101.93</code> with your Pi's IP address, and <code>&lt;VALIDATOR_KEYS_DIRECTORY&gt;</code> with the full pathname of your <code>validator_keys</code> directory (if you used the Launchpad <a href="https://github.com/ethereum/eth2.0-deposit-cli/releases/">command line app</a> this would have been created for you when you generated your keys).</p>
<blockquote>
<p><strong>Tip:</strong> run <code>pwd</code> in your <code>validator_keys</code> directory to print the full pathname to the console.</p>
</blockquote>
<h3><a class="header" href="#13-import-signing-key-into-nimbus" id="13-import-signing-key-into-nimbus">13. Import signing key into Nimbus</a></h3>
<p>To import your signing key into Nimbus, from the <code>nimbus-eth2</code> directory run:</p>
<pre><code>build/nimbus_beacon_node deposits import  --data-dir=build/data/shared_pyrmont_0 ../validator_keys
</code></pre>
<p>You'll be asked to enter the password you created to encrypt your keystore(s). Don't worry, this is entirely normal. Your validator client needs both your signing keystore(s) and the password encrypting it to import your <a href="https://blog.ethereum.org/2020/05/21/keys/">key</a> (since it needs to decrypt the keystore in order to be able to use it to sign on your behalf).</p>
<h3><a class="header" href="#14-connect-to-prater" id="14-connect-to-prater">14. Connect to Prater</a></h3>
<p>We're finally ready to connect to the Prater testnet!</p>
<blockquote>
<p><strong>Note:</strong> If you haven't already, we recommend registering for, and running, your own eth1 node in parallel. For instruction on how to do so, see <a href="./eth1.html">this page</a>.</p>
</blockquote>
<p>To connect to Prater, run:</p>
<pre><code>./run-prater-beacon-node.sh
</code></pre>
<p>You'll be prompted to enter a web3-provider url:</p>
<pre><code>To monitor the Eth1 validator deposit contract, you'll need to pair
the Nimbus beacon node with a Web3 provider capable of serving Eth1
event logs. This could be a locally running Eth1 client such as Geth
or a cloud service such as Infura. For more information please see
our setup guide:

https://status-im.github.io/nimbus-eth2/eth1.html

Please enter a Web3 provider URL:
</code></pre>
<p>Enter your own secure websocket (<code>wss</code>) <a href="eth1.html">endpoint</a>.</p>
<h3><a class="header" href="#15-check-for-successful-connection" id="15-check-for-successful-connection">15. Check for successful connection</a></h3>
<p>If you look near the top of the logs printed to your console, you should see confirmation that your beacon node has started, with your local validator attached:</p>
<pre><code>INF 2020-12-01 11:25:33.487+01:00 Launching beacon node
...
INF 2020-12-01 11:25:34.556+01:00 Loading block dag from database            topics=&quot;beacnde&quot; tid=19985314 file=nimbus_beacon_node.nim:198 path=build/data/shared_pyrmont_0/db
INF 2020-12-01 11:25:35.921+01:00 Block dag initialized
INF 2020-12-01 11:25:37.073+01:00 Generating new networking key
...
NOT 2020-12-01 11:25:45.267+00:00 Local validator attached                   tid=22009 file=validator_pool.nim:33 pubKey=95e3cbe88c71ab2d0e3053b7b12ead329a37e9fb8358bdb4e56251993ab68e46b9f9fa61035fe4cf2abf4c07dfad6c45 validator=95e3cbe8
...
NOT 2020-12-01 11:25:59.512+00:00 Eth1 sync progress                         topics=&quot;eth1&quot; tid=21914 file=eth1_monitor.nim:705 blockNumber=3836397 depositsProcessed=106147
NOT 2020-12-01 11:26:02.574+00:00 Eth1 sync progress                         topics=&quot;eth1&quot; tid=21914 file=eth1_monitor.nim:705 blockNumber=3841412 depositsProcessed=106391
...
INF 2020-12-01 11:26:31.000+00:00 Slot start                                 topics=&quot;beacnde&quot; tid=21815 file=nimbus_beacon_node.nim:505 lastSlot=96566 scheduledSlot=96567 beaconTime=1w6d9h53m24s944us774ns peers=7 head=b54486c4:96563 headEpoch=3017 finalized=2f5d12e4:96479 finalizedEpoch=3014
INF 2020-12-01 11:26:36.285+00:00 Slot end                                   topics=&quot;beacnde&quot; tid=21815 file=nimbus_beacon_node.nim:593 slot=96567 nextSlot=96568 head=b54486c4:96563 headEpoch=3017 finalizedHead=2f5d12e4:96479 finalizedEpoch=3014
</code></pre>
<p>To keep track of your syncing progress, have a look at the output at the very bottom of the terminal window in which your validator is running. You should see something like:</p>
<pre><code>peers: 15 ❯ finalized: ada7228a:8765 ❯ head: b2fe11cd:8767:2 ❯ time: 9900:7 (316807) ❯ sync: wPwwwwwDwwDPwPPPwwww:7:1.2313:1.0627:12h01m(280512)
</code></pre>
<p>Keep an eye on the number of peers your currently connected to (in the above case that's <code>15</code>), as well as your <a href="./keep-an-eye.html#syncing-progress">sync progress</a>.</p>
<blockquote>
<p><strong>Note:</strong> 15 - 20 peers and an average sync speed of <strong>0.5 - 1.0</strong> blocks per second is normal on <code>Prater</code> with a Pi. If you're sync speed is much slower than this, the root of the problem may be your USB3.0 to SSD adapter. See <a href="https://www.raspberrypi.org/forums/viewtopic.php?f=28&amp;t=245931">this post</a> for a recommended workaround.</p>
</blockquote>
<h3><a class="header" href="#mainnet-advice" id="mainnet-advice">Mainnet advice</a></h3>
<p>Whether or not your Pi is up to the task will depend on a number of factors such as SSD speed, network connectivity, etc. As such, it's best to verify performance  on a testnet first.</p>
<p>The best thing you can do is to set your Pi to run Prater. <strong>If you have no trouble syncing and attesting on Prater, your setup should be more than good enough for mainnet</strong> as well (Mainnet is expected to use fewer resources).</p>
<blockquote class="twitter-tweet" data-conversation="none"><p lang="en" dir="ltr">We&#39;ve been running lots of PIs and NanoPCs 24/7 for 3 years and never got a hardware fail. It is easy (and cheap) to get redundancy of components (even spare PIs in different locations, more of this to come).</p>&mdash; Ethereum on ARM (@EthereumOnARM) <a href="https://twitter.com/EthereumOnARM/status/1332772217420177408?ref_src=twsrc%5Etfw">November 28, 2020</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>Although we don't expect a modern Pi to fail, we recommend buying a spare Pi, and enterprise grade SSD, on the off-chance it does; keep your original SD around, to make it easy for you to copy the image over.</p>
<h4><a class="header" href="#systemd-1" id="systemd-1">Systemd</a></h4>
<p>Now that you have Nimbus up and running, we recommend <a href="https://www.raspberrypi.org/documentation/linux/usage/systemd.md">setting up a systemd service</a> with an autorestart on boot (should you experience an unexpected power outage, this will ensure your validator restarts correctly). </p>
<p>Systemd will also ensure your validator keeps running when you exit your ssh session (<code>Ctrl-C</code>) and/or switch off your laptop.</p>
<p>For the details on how to do this, see <a href="./beacon-node-systemd.html">this page</a>.</p>
<h4><a class="header" href="#overclocking" id="overclocking">Overclocking</a></h4>
<p>While you shouldn't need to, if you're feeling adventurous and want to try and squeeze out some extra performance out of your Pi's CPU, see <a href="https://docs.rocketpool.net/guides/node/local/prepare-pi.html#overclocking-the-pi">this guide</a> by Joe Clapis.</p>
<blockquote>
<p><strong>Note:</strong> we have since improved performance in several ways which should make a vanilla Pi perform well. However, overclocking may still give some benefits, in particular you have more performance to deal with anomalies (like spamming etc).</p>
</blockquote>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/pi-guide.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#nimbus-binaries" id="nimbus-binaries">Nimbus binaries</a></h1>
<p>We currently have binaries available for Linux <code>AMD64</code>, <code>ARM</code> and <code>ARM64</code>, Windows <code>AMD64</code> and macOS (<code>AMD64</code> and <code>ARM64</code>).</p>
<p>You can find the latest release here: <a href="https://github.com/status-im/nimbus-eth2/releases">https://github.com/status-im/nimbus-eth2/releases</a></p>
<p>Scroll to the bottom of the first (non-nightly) release you see, and click on <code>Assets</code>. You should see a list that looks like the following:</p>
<p><img src="https://i.imgur.com/6wuvM2d.png" alt="" /></p>
<p>Click on the <code>tar.gz</code> file that corresponds to your OS and architecture, unpack the archive, read the README and run the binary directly (or through one of our provided wrapper scripts).</p>
<p>We've designed the build process to be reproducible. In practice, this means that anyone can verify that these exact binaries were produced from the corresponding source code commits. For more about the philosophy and importance of this feature see <a href="https://reproducible-builds.org/">reproducible-builds.org</a>.</p>
<p>For instructions on how to reproduce those binaries, see &quot;README.md&quot; inside the archive.</p>
<blockquote>
<p><strong>N.B.</strong> These binaries are meant to run as a service. As such, they do not
support the <code>log-file</code> <a href="./options.html">option</a> - duplicating stdout to a
log file would complicate things. We recommend capturing
their output (stdout and stderr) with a <a href="./log-rotate.html">log rotation
helper</a> instead.</p>
</blockquote>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/binaries.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#docker-images" id="docker-images">Docker images</a></h1>
<p>Docker images for end-users are generated and published automatically to <a href="https://hub.docker.com/r/statusim/nimbus-eth2">Docker Hub</a> from the Nimbus-eth2 CI, by a GitHub action, whenever a new release is tagged in Git.</p>
<p>We have version-specific Docker tags (<code>statusim/nimbus-eth2:amd64-v1.2.3</code>) and a tag for the latest image (<code>statusim/nimbus-eth2:amd64-latest</code>).</p>
<p>These images are simply the contents of <a href="./binaries.html">release tarballs</a> inside a <code>debian:bullseye-slim</code> image, running under a user imaginatively named <code>user</code>, with UID:GID of 1000:1000.</p>
<p>The unpacked archive is in <code>/home/user/nimbus-eth2</code> which is also the default <em>WORKDIR</em>. The default <em>ENTRYPOINT</em> is the binary itself: <code>/home/user/nimbus-eth2/build/nimbus\_beacon\_node</code></p>
<blockquote>
<p><strong>N.B.</strong> Docker images do not support the <code>log-file</code> <a href="./options.html">option</a> - The way we recommend setting up docker is to capture its console output with a <a href="./log-rotate.html">log rotation helper</a>.</p>
</blockquote>
<h2><a class="header" href="#usage" id="usage">Usage</a></h2>
<p>You need to create an external data directory and mount it as a volume inside the container, with  mounting point: <code>/home/user/nimbus-eth2/build/data</code></p>
<pre><code class="language-text">mkdir data
docker run -it --rm -v ${PWD}/data:/home/user/nimbus-eth2/build/data statusim/nimbus-eth2:amd64-latest [nimbus_beacon_node args here]
</code></pre>
<h3><a class="header" href="#wrapper-script" id="wrapper-script">Wrapper script</a></h3>
<p>If you wish, you can choose to use a wrapper script instead:</p>
<pre><code class="language-text">mkdir data
docker run -it --rm -v ${PWD}/data:/home/user/nimbus-eth2/build/data -e WEB3_URL=&quot;wss://mainnet.infura.io/ws/v3/YOUR_TOKEN&quot; --entrypoint /home/user/nimbus-eth2/run-mainnet-beacon-node.sh statusim/nimbus-eth2:amd64-latest [nimbus_beacon_node args here]
</code></pre>
<h3><a class="header" href="#docker-compose" id="docker-compose">Docker compose</a></h3>
<p>Our preferred setup is using <code>docker-compose</code>. You can use one of our <a href="https://github.com/status-im/nimbus-eth2/tree/stable/docker/dist/binaries">example configuration files</a> as a base for your own custom configuration:</p>
<pre><code class="language-text">mkdir data
docker-compose -f docker-compose-example1.yml up --quiet-pull --no-color --detach
</code></pre>
<blockquote>
<p><strong>Note:</strong> The rather voluminous logging is done on <code>stdout</code>, so you might want to change the system-wide Docker logging defaults (which dumps everything in <code>/var/lib/docker/containers/CONTAINER_ID/CONTAINER_ID-json.log</code>) to something like <code>syslog</code>. We recommend using a log rotation system with appropriate intervals for logs of this size.</p>
</blockquote>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/docker.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#json-rpc-api" id="json-rpc-api">JSON-RPC API</a></h1>
<p>The <code>JSON-RPC API</code> is a collection of APIs for querying the state of the application at runtime.</p>
<p>The API is based on the common <a href="https://github.com/ethereum/eth2.0-APIs">eth2 APIs</a> with the exception that <code>JSON-RPC</code> is used instead of <a href="./rest-api.html">http <code>REST</code></a> (the method names, parameters and results are all the same except for the encoding / access method).</p>
<p>Nimbus also implements the <a href="./rest-api.html">common REST API</a> - new applications should consider using it instead of JSON RPC.</p>
<h2><a class="header" href="#introduction-1" id="introduction-1">Introduction</a></h2>
<p>The <code>nimbus-eth2</code> API is implemented using JSON-RPC 2.0. To query it, you can use a JSON-RPC library in the language of your choice, or a tool like <code>curl</code> to access it from the command line. A tool like <a href="https://stedolan.github.io/jq/">jq</a> is helpful to pretty-print the responses.</p>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:&quot;id&quot;,&quot;method&quot;:&quot;peers&quot;,&quot;params&quot;:[] }' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<p>Before you can access the API, make sure it's enabled using the RPC flag (<code>nimbus_beacon_node --rpc</code>):</p>
<pre><code>     --rpc                     Enable the JSON-RPC server.
     --rpc-port                HTTP port for the JSON-RPC service.
     --rpc-address             Listening address of the RPC server.
</code></pre>
<p>One difference is that currently endpoints that correspond to specific ones from the <a href="https://ethereum.github.io/eth2.0-APIs/">spec</a> are named weirdly - for example an endpoint such as <a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getGenesis"><code>getGenesis</code></a> is currently named <code>get_v1_beacon_genesis</code> which would map 1:1 to the actual REST path in the future - verbose but unambiguous.</p>
<h2><a class="header" href="#beacon-chain-api" id="beacon-chain-api">Beacon chain API</a></h2>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetgenesisget_v1_beacon_genesisa" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetgenesisget_v1_beacon_genesisa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getGenesis"><code>get_v1_beacon_genesis</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_beacon_genesis&quot;,&quot;params&quot;:[],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetstaterootget_v1_beacon_states_roota" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetstaterootget_v1_beacon_states_roota"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getStateRoot"><code>get_v1_beacon_states_root</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_beacon_states_root&quot;,&quot;params&quot;:[&quot;finalized&quot;],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetstateforkget_v1_beacon_states_forka" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetstateforkget_v1_beacon_states_forka"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getStateFork"><code>get_v1_beacon_states_fork</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_beacon_states_fork&quot;,&quot;params&quot;:[&quot;finalized&quot;],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetstatefinalitycheckpointsget_v1_beacon_states_finality_checkpointsa" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetstatefinalitycheckpointsget_v1_beacon_states_finality_checkpointsa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getStateFinalityCheckpoints"><code>get_v1_beacon_states_finality_checkpoints</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_beacon_states_finality_checkpoints&quot;,&quot;params&quot;:[&quot;finalized&quot;],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetstatevalidatorsget_v1_beacon_states_stateid_validatorsa" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetstatevalidatorsget_v1_beacon_states_stateid_validatorsa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getStateValidators"><code>get_v1_beacon_states_stateId_validators</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_beacon_states_stateId_validators&quot;,&quot;params&quot;:[&quot;finalized&quot;],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetstatevalidatorget_v1_beacon_states_stateid_validators_validatorida" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetstatevalidatorget_v1_beacon_states_stateid_validators_validatorida"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getStateValidator"><code>get_v1_beacon_states_stateId_validators_validatorId</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_beacon_states_stateId_validators_validatorId&quot;,&quot;params&quot;:[&quot;finalized&quot;, &quot;100167&quot;],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetstatevalidatorbalancesget_v1_beacon_states_stateid_validator_balancesa" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetstatevalidatorbalancesget_v1_beacon_states_stateid_validator_balancesa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getStateValidatorBalances"><code>get_v1_beacon_states_stateId_validator_balances</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_beacon_states_stateId_validator_balances&quot;,&quot;params&quot;:[&quot;finalized&quot;],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetepochcommitteesget_v1_beacon_states_stateid_committees_epocha" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetepochcommitteesget_v1_beacon_states_stateid_committees_epocha"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getEpochCommittees"><code>get_v1_beacon_states_stateId_committees_epoch</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_beacon_states_stateId_committees_epoch&quot;,&quot;params&quot;:[&quot;finalized&quot;],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetblockheadersget_v1_beacon_headersa" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetblockheadersget_v1_beacon_headersa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getBlockHeaders"><code>get_v1_beacon_headers</code></a></a></h3>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetblockheaderget_v1_beacon_headers_blockida" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetblockheaderget_v1_beacon_headers_blockida"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getBlockHeader"><code>get_v1_beacon_headers_blockId</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_beacon_headers_blockId&quot;,&quot;params&quot;:[&quot;finalized&quot;],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeaconpublishblockpost_v1_beacon_blocksa" id="a-hrefhttpsethereumgithubioeth20-apisbeaconpublishblockpost_v1_beacon_blocksa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/publishBlock"><code>post_v1_beacon_blocks</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;post_v1_beacon_blocks&quot;,&quot;params&quot;:[{&quot;message&quot;:{&quot;slot&quot;:&quot;1&quot;,&quot;proposer_index&quot;:&quot;1&quot;,&quot;parent_root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,&quot;state_root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,&quot;body&quot;:{&quot;randao_reveal&quot;:&quot;0x1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505cc411d61252fb6cb3fa0017b679f8bb2305b26a285fa2737f175668d0dff91cc1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505&quot;,&quot;eth1_data&quot;:{&quot;deposit_root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,&quot;deposit_count&quot;:&quot;1&quot;,&quot;block_hash&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;},&quot;graffiti&quot;:&quot;string&quot;,&quot;proposer_slashings&quot;:[{&quot;signed_header_1&quot;:{&quot;message&quot;:{&quot;slot&quot;:&quot;1&quot;,&quot;proposer_index&quot;:&quot;1&quot;,&quot;parent_root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,&quot;state_root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,&quot;body_root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;},&quot;signature&quot;:&quot;0x1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505cc411d61252fb6cb3fa0017b679f8bb2305b26a285fa2737f175668d0dff91cc1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505&quot;},&quot;signed_header_2&quot;:{&quot;message&quot;:{&quot;slot&quot;:&quot;1&quot;,&quot;proposer_index&quot;:&quot;1&quot;,&quot;parent_root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,&quot;state_root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,&quot;body_root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;},&quot;signature&quot;:&quot;0x1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505cc411d61252fb6cb3fa0017b679f8bb2305b26a285fa2737f175668d0dff91cc1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505&quot;}}],&quot;attester_slashings&quot;:[{&quot;attestation_1&quot;:{&quot;attesting_indices&quot;:[&quot;1&quot;],&quot;signature&quot;:&quot;0x1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505cc411d61252fb6cb3fa0017b679f8bb2305b26a285fa2737f175668d0dff91cc1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505&quot;,&quot;data&quot;:{&quot;slot&quot;:&quot;1&quot;,&quot;index&quot;:&quot;1&quot;,&quot;beacon_block_root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,&quot;source&quot;:{&quot;epoch&quot;:&quot;1&quot;,&quot;root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;},&quot;target&quot;:{&quot;epoch&quot;:&quot;1&quot;,&quot;root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;}}},&quot;attestation_2&quot;:{&quot;attesting_indices&quot;:[&quot;1&quot;],&quot;signature&quot;:&quot;0x1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505cc411d61252fb6cb3fa0017b679f8bb2305b26a285fa2737f175668d0dff91cc1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505&quot;,&quot;data&quot;:{&quot;slot&quot;:&quot;1&quot;,&quot;index&quot;:&quot;1&quot;,&quot;beacon_block_root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,&quot;source&quot;:{&quot;epoch&quot;:&quot;1&quot;,&quot;root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;},&quot;target&quot;:{&quot;epoch&quot;:&quot;1&quot;,&quot;root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;}}}}],&quot;attestations&quot;:[{&quot;aggregation_bits&quot;:&quot;0x01&quot;,&quot;signature&quot;:&quot;0x1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505cc411d61252fb6cb3fa0017b679f8bb2305b26a285fa2737f175668d0dff91cc1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505&quot;,&quot;data&quot;:{&quot;slot&quot;:&quot;1&quot;,&quot;index&quot;:&quot;1&quot;,&quot;beacon_block_root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,&quot;source&quot;:{&quot;epoch&quot;:&quot;1&quot;,&quot;root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;},&quot;target&quot;:{&quot;epoch&quot;:&quot;1&quot;,&quot;root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;}}}],&quot;deposits&quot;:[{&quot;proof&quot;:[&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;],&quot;data&quot;:{&quot;pubkey&quot;:&quot;0x93247f2209abcacf57b75a51dafae777f9dd38bc7053d1af526f220a7489a6d3a2753e5f3e8b1cfe39b56f43611df74a&quot;,&quot;withdrawal_credentials&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,&quot;amount&quot;:&quot;1&quot;,&quot;signature&quot;:&quot;0x1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505cc411d61252fb6cb3fa0017b679f8bb2305b26a285fa2737f175668d0dff91cc1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505&quot;}}],&quot;voluntary_exits&quot;:[{&quot;message&quot;:{&quot;epoch&quot;:&quot;1&quot;,&quot;validator_index&quot;:&quot;1&quot;},&quot;signature&quot;:&quot;0x1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505cc411d61252fb6cb3fa0017b679f8bb2305b26a285fa2737f175668d0dff91cc1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505&quot;}]}},&quot;signature&quot;:&quot;0x1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505cc411d61252fb6cb3fa0017b679f8bb2305b26a285fa2737f175668d0dff91cc1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505&quot;}],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetblockget_v1_beacon_blocks_blockida" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetblockget_v1_beacon_blocks_blockida"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getBlock"><code>get_v1_beacon_blocks_blockId</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_beacon_blocks_blockId&quot;,&quot;params&quot;:[&quot;finalized&quot;],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetblockrootget_v1_beacon_blocks_blockid_roota" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetblockrootget_v1_beacon_blocks_blockid_roota"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getBlockRoot"><code>get_v1_beacon_blocks_blockId_root</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_beacon_blocks_blockId_root&quot;,&quot;params&quot;:[&quot;finalized&quot;],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetblockattestationsget_v1_beacon_blocks_blockid_attestationsa" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetblockattestationsget_v1_beacon_blocks_blockid_attestationsa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getBlockAttestations"><code>get_v1_beacon_blocks_blockId_attestations</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_beacon_blocks_blockId_attestations&quot;,&quot;params&quot;:[&quot;finalized&quot;],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeaconsubmitpoolattestationspost_v1_beacon_pool_attestationsa" id="a-hrefhttpsethereumgithubioeth20-apisbeaconsubmitpoolattestationspost_v1_beacon_pool_attestationsa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/submitPoolAttestations"><code>post_v1_beacon_pool_attestations</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_beacon_blocks_blockId_attestations&quot;,&quot;params&quot;:[{&quot;aggregation_bits&quot;:&quot;0x01&quot;,&quot;signature&quot;:&quot;0x1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505cc411d61252fb6cb3fa0017b679f8bb2305b26a285fa2737f175668d0dff91cc1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505&quot;,&quot;data&quot;:{&quot;slot&quot;:&quot;1&quot;,&quot;index&quot;:&quot;1&quot;,&quot;beacon_block_root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,&quot;source&quot;:{&quot;epoch&quot;:&quot;1&quot;,&quot;root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;},&quot;target&quot;:{&quot;epoch&quot;:&quot;1&quot;,&quot;root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;}}}],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetpoolattesterslashingsget_v1_beacon_pool_attester_slashingsa" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetpoolattesterslashingsget_v1_beacon_pool_attester_slashingsa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getPoolAttesterSlashings"><code>get_v1_beacon_pool_attester_slashings</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_beacon_pool_attester_slashings&quot;,&quot;params&quot;:[],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeaconsubmitpoolattesterslashingspost_v1_beacon_pool_attester_slashingsa" id="a-hrefhttpsethereumgithubioeth20-apisbeaconsubmitpoolattesterslashingspost_v1_beacon_pool_attester_slashingsa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/submitPoolAttesterSlashings"><code>post_v1_beacon_pool_attester_slashings</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;post_v1_beacon_pool_attester_slashings&quot;,&quot;params&quot;:[{&quot;attestation_1&quot;:{&quot;attesting_indices&quot;:[&quot;1&quot;],&quot;signature&quot;:&quot;0x1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505cc411d61252fb6cb3fa0017b679f8bb2305b26a285fa2737f175668d0dff91cc1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505&quot;,&quot;data&quot;:{&quot;slot&quot;:&quot;1&quot;,&quot;index&quot;:&quot;1&quot;,&quot;beacon_block_root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,&quot;source&quot;:{&quot;epoch&quot;:&quot;1&quot;,&quot;root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;},&quot;target&quot;:{&quot;epoch&quot;:&quot;1&quot;,&quot;root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;}}},&quot;attestation_2&quot;:{&quot;attesting_indices&quot;:[&quot;1&quot;],&quot;signature&quot;:&quot;0x1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505cc411d61252fb6cb3fa0017b679f8bb2305b26a285fa2737f175668d0dff91cc1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505&quot;,&quot;data&quot;:{&quot;slot&quot;:&quot;1&quot;,&quot;index&quot;:&quot;1&quot;,&quot;beacon_block_root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,&quot;source&quot;:{&quot;epoch&quot;:&quot;1&quot;,&quot;root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;},&quot;target&quot;:{&quot;epoch&quot;:&quot;1&quot;,&quot;root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;}}}}],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetpoolproposerslashingsget_v1_beacon_pool_proposer_slashingsa" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetpoolproposerslashingsget_v1_beacon_pool_proposer_slashingsa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getPoolProposerSlashings"><code>get_v1_beacon_pool_proposer_slashings</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_beacon_pool_proposer_slashings&quot;,&quot;params&quot;:[],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeaconsubmitpoolproposerslashingspost_v1_beacon_pool_proposer_slashingsa" id="a-hrefhttpsethereumgithubioeth20-apisbeaconsubmitpoolproposerslashingspost_v1_beacon_pool_proposer_slashingsa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/submitPoolProposerSlashings"><code>post_v1_beacon_pool_proposer_slashings</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;post_v1_beacon_pool_proposer_slashings&quot;,&quot;params&quot;:[{&quot;signed_header_1&quot;:{&quot;message&quot;:{&quot;slot&quot;:&quot;1&quot;,&quot;proposer_index&quot;:&quot;1&quot;,&quot;parent_root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,&quot;state_root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,&quot;body_root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;},&quot;signature&quot;:&quot;0x1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505cc411d61252fb6cb3fa0017b679f8bb2305b26a285fa2737f175668d0dff91cc1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505&quot;},&quot;signed_header_2&quot;:{&quot;message&quot;:{&quot;slot&quot;:&quot;1&quot;,&quot;proposer_index&quot;:&quot;1&quot;,&quot;parent_root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,&quot;state_root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,&quot;body_root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;},&quot;signature&quot;:&quot;0x1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505cc411d61252fb6cb3fa0017b679f8bb2305b26a285fa2737f175668d0dff91cc1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505&quot;}}],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetpoolvoluntaryexitsget_v1_beacon_pool_voluntary_exitsa" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetpoolvoluntaryexitsget_v1_beacon_pool_voluntary_exitsa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getPoolVoluntaryExits"><code>get_v1_beacon_pool_voluntary_exits</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_beacon_pool_voluntary_exits&quot;,&quot;params&quot;:[],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeaconsubmitpoolvoluntaryexitpost_v1_beacon_pool_voluntary_exitsa" id="a-hrefhttpsethereumgithubioeth20-apisbeaconsubmitpoolvoluntaryexitpost_v1_beacon_pool_voluntary_exitsa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/submitPoolVoluntaryExit"><code>post_v1_beacon_pool_voluntary_exits</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;post_v1_beacon_pool_voluntary_exits&quot;,&quot;params&quot;:[{&quot;message&quot;:{&quot;epoch&quot;:&quot;1&quot;,&quot;validator_index&quot;:&quot;1&quot;},&quot;signature&quot;:&quot;0x1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505cc411d61252fb6cb3fa0017b679f8bb2305b26a285fa2737f175668d0dff91cc1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505&quot;}],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h2><a class="header" href="#beacon-node-api" id="beacon-node-api">Beacon Node API</a></h2>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisnodegetnetworkidentityget_v1_node_identitya" id="a-hrefhttpsethereumgithubioeth20-apisnodegetnetworkidentityget_v1_node_identitya"><a href="https://ethereum.github.io/eth2.0-APIs/#/Node/getNetworkIdentity"><code>get_v1_node_identity</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_node_identity&quot;,&quot;params&quot;:[],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisnodegetpeersget_v1_node_peersa" id="a-hrefhttpsethereumgithubioeth20-apisnodegetpeersget_v1_node_peersa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Node/getPeers"><code>get_v1_node_peers</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_node_peers&quot;,&quot;params&quot;:[],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisnodegetpeerget_v1_node_peers_peerida" id="a-hrefhttpsethereumgithubioeth20-apisnodegetpeerget_v1_node_peers_peerida"><a href="https://ethereum.github.io/eth2.0-APIs/#/Node/getPeer"><code>get_v1_node_peers_peerId</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_node_peers_peerId&quot;,&quot;params&quot;:[],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisnodegetpeercountget_v1_node_peer_counta" id="a-hrefhttpsethereumgithubioeth20-apisnodegetpeercountget_v1_node_peer_counta"><a href="https://ethereum.github.io/eth2.0-APIs/#/Node/getPeerCount"><code>get_v1_node_peer_count</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_node_peer_count&quot;,&quot;params&quot;:[],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisnodegetnodeversionget_v1_node_versiona" id="a-hrefhttpsethereumgithubioeth20-apisnodegetnodeversionget_v1_node_versiona"><a href="https://ethereum.github.io/eth2.0-APIs/#/Node/getNodeVersion"><code>get_v1_node_version</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_node_version&quot;,&quot;params&quot;:[],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisnodegetsyncingstatusget_v1_node_syncinga" id="a-hrefhttpsethereumgithubioeth20-apisnodegetsyncingstatusget_v1_node_syncinga"><a href="https://ethereum.github.io/eth2.0-APIs/#/Node/getSyncingStatus"><code>get_v1_node_syncing</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_node_syncing&quot;,&quot;params&quot;:[],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisnodegethealthget_v1_node_healtha" id="a-hrefhttpsethereumgithubioeth20-apisnodegethealthget_v1_node_healtha"><a href="https://ethereum.github.io/eth2.0-APIs/#/Node/getHealth"><code>get_v1_node_health</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_node_health&quot;,&quot;params&quot;:[],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h2><a class="header" href="#valdiator-api" id="valdiator-api">Valdiator API</a></h2>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisvalidatorrequiredapigetattesterdutiesget_v1_validator_duties_attestera" id="a-hrefhttpsethereumgithubioeth20-apisvalidatorrequiredapigetattesterdutiesget_v1_validator_duties_attestera"><a href="https://ethereum.github.io/eth2.0-APIs/#/ValidatorRequiredApi/getAttesterDuties"><code>get_v1_validator_duties_attester</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_validator_duties_attester&quot;,&quot;params&quot;:[1,[&quot;a7a0502eae26043d1ac39a39457a6cdf68fae2055d89c7dc59092c25911e4ee55c4e7a31ade61c39480110a393be28e8&quot;,&quot;a1826dd94cd96c48a81102d316a2af4960d19ca0b574ae5695f2d39a88685a43997cef9a5c26ad911847674d20c46b75&quot;]],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisvalidatorrequiredapigetproposerdutiesget_v1_validator_duties_proposera" id="a-hrefhttpsethereumgithubioeth20-apisvalidatorrequiredapigetproposerdutiesget_v1_validator_duties_proposera"><a href="https://ethereum.github.io/eth2.0-APIs/#/ValidatorRequiredApi/getProposerDuties"><code>get_v1_validator_duties_proposer</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:&quot;id&quot;,&quot;method&quot;:&quot;get_v1_validator_duties_proposer&quot;,&quot;params&quot;:[1] }' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisvalidatorrequiredapiproduceblockget_v1_validator_blocka" id="a-hrefhttpsethereumgithubioeth20-apisvalidatorrequiredapiproduceblockget_v1_validator_blocka"><a href="https://ethereum.github.io/eth2.0-APIs/#/ValidatorRequiredApi/produceBlock"><code>get_v1_validator_block</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_validator_block&quot;,&quot;params&quot;:[1,&quot;0x1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505cc411d61252fb6cb3fa0017b679f8bb2305b26a285fa2737f175668d0dff91cc1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505&quot;,&quot;0x4e696d6275732f76312e302e322d64333032633164382d73746174656f667573&quot;],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisvalidatorproduceattestationdataget_v1_validator_attestation_dataa" id="a-hrefhttpsethereumgithubioeth20-apisvalidatorproduceattestationdataget_v1_validator_attestation_dataa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Validator/produceAttestationData"><code>get_v1_validator_attestation_data</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_validator_attestation_data&quot;,&quot;params&quot;:[1, 1],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisvalidatorgetaggregatedattestationget_v1_validator_aggregate_attestationa" id="a-hrefhttpsethereumgithubioeth20-apisvalidatorgetaggregatedattestationget_v1_validator_aggregate_attestationa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Validator/getAggregatedAttestation"><code>get_v1_validator_aggregate_attestation</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_validator_aggregate_attestation&quot;,&quot;params&quot;:[1, &quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisvalidatorpublishaggregateandproofspost_v1_validator_aggregate_and_proofsa" id="a-hrefhttpsethereumgithubioeth20-apisvalidatorpublishaggregateandproofspost_v1_validator_aggregate_and_proofsa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Validator/publishAggregateAndProofs"><code>post_v1_validator_aggregate_and_proofs</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;post_v1_validator_aggregate_and_proofs&quot;,&quot;params&quot;:[{&quot;message&quot;:{&quot;aggregator_index&quot;:&quot;1&quot;,&quot;aggregate&quot;:{&quot;aggregation_bits&quot;:&quot;0x01&quot;,&quot;signature&quot;:&quot;0x1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505cc411d61252fb6cb3fa0017b679f8bb2305b26a285fa2737f175668d0dff91cc1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505&quot;,&quot;data&quot;:{&quot;slot&quot;:&quot;1&quot;,&quot;index&quot;:&quot;1&quot;,&quot;beacon_block_root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,&quot;source&quot;:{&quot;epoch&quot;:&quot;1&quot;,&quot;root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;},&quot;target&quot;:{&quot;epoch&quot;:&quot;1&quot;,&quot;root&quot;:&quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;}}},&quot;selection_proof&quot;:&quot;0x1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505cc411d61252fb6cb3fa0017b679f8bb2305b26a285fa2737f175668d0dff91cc1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505&quot;},&quot;signature&quot;:&quot;0x1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505cc411d61252fb6cb3fa0017b679f8bb2305b26a285fa2737f175668d0dff91cc1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505&quot;}],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisvalidatorpreparebeaconcommitteesubnetpost_v1_validator_beacon_committee_subscriptionsa" id="a-hrefhttpsethereumgithubioeth20-apisvalidatorpreparebeaconcommitteesubnetpost_v1_validator_beacon_committee_subscriptionsa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Validator/prepareBeaconCommitteeSubnet"><code>post_v1_validator_beacon_committee_subscriptions</code></a></a></h3>
<h2><a class="header" href="#config-api" id="config-api">Config API</a></h2>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisconfiggetforkscheduleget_v1_config_fork_schedulea" id="a-hrefhttpsethereumgithubioeth20-apisconfiggetforkscheduleget_v1_config_fork_schedulea"><a href="https://ethereum.github.io/eth2.0-APIs/#/Config/getForkSchedule"><code>get_v1_config_fork_schedule</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_config_fork_schedule&quot;,&quot;params&quot;:[],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisconfiggetspecget_v1_config_speca" id="a-hrefhttpsethereumgithubioeth20-apisconfiggetspecget_v1_config_speca"><a href="https://ethereum.github.io/eth2.0-APIs/#/Config/getSpec"><code>get_v1_config_spec</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_config_spec&quot;,&quot;params&quot;:[],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisconfiggetdepositcontractget_v1_config_deposit_contracta" id="a-hrefhttpsethereumgithubioeth20-apisconfiggetdepositcontractget_v1_config_deposit_contracta"><a href="https://ethereum.github.io/eth2.0-APIs/#/Config/getDepositContract"><code>get_v1_config_deposit_contract</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_config_deposit_contract&quot;,&quot;params&quot;:[],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h2><a class="header" href="#administrative--debug-api" id="administrative--debug-api">Administrative / Debug API</a></h2>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisdebuggetstateget_v1_debug_beacon_states_stateida" id="a-hrefhttpsethereumgithubioeth20-apisdebuggetstateget_v1_debug_beacon_states_stateida"><a href="https://ethereum.github.io/eth2.0-APIs/#/Debug/getState"><code>get_v1_debug_beacon_states_stateId</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_debug_beacon_states_stateId&quot;,&quot;params&quot;:[&quot;head&quot;],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisdebuggetdebugchainheadsget_v1_debug_beacon_headsa" id="a-hrefhttpsethereumgithubioeth20-apisdebuggetdebugchainheadsget_v1_debug_beacon_headsa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Debug/getDebugChainHeads"><code>get_v1_debug_beacon_heads</code></a></a></h3>
<h2><a class="header" href="#nimbus-extensions" id="nimbus-extensions">Nimbus extensions</a></h2>
<h3><a class="header" href="#getbeaconhead" id="getbeaconhead">getBeaconHead</a></h3>
<p>The latest head slot, as chosen by the latest fork choice.</p>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:&quot;id&quot;,&quot;method&quot;:&quot;getBeaconHead&quot;,&quot;params&quot;:[] }' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#getchainhead" id="getchainhead">getChainHead</a></h3>
<p>Show chain head information, including head, justified and finalized checkpoints.</p>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:&quot;id&quot;,&quot;method&quot;:&quot;getChainHead&quot;,&quot;params&quot;:[] }' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#getnodeversion" id="getnodeversion">getNodeVersion</a></h3>
<pre><code> curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;getNodeVersion&quot;,&quot;params&quot;:[],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#peers" id="peers">peers</a></h3>
<p>Show a list of peers in PeerPool.</p>
<pre><code> curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;peers&quot;,&quot;params&quot;:[],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#getsyncing" id="getsyncing">getSyncing</a></h3>
<p>Shows current state of forward syncing manager.</p>
<pre><code> curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;getSyncing&quot;,&quot;params&quot;:[],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#getnetworkpeerid" id="getnetworkpeerid">getNetworkPeerId</a></h3>
<p>Shows current node's libp2p peer identifier (PeerID).</p>
<pre><code> curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;getNetworkPeerId&quot;,&quot;params&quot;:[],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#getnetworkpeers" id="getnetworkpeers">getNetworkPeers</a></h3>
<p>Shows list of available PeerIDs in PeerPool.</p>
<pre><code> curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;getNetworkPeers&quot;,&quot;params&quot;:[],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#getnetworkenr" id="getnetworkenr">getNetworkEnr</a></h3>
<h3><a class="header" href="#setloglevel" id="setloglevel">setLogLevel</a></h3>
<p>Set the current logging level dynamically: TRACE, DEBUG, INFO, NOTICE, WARN, ERROR or FATAL</p>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:&quot;id&quot;,&quot;method&quot;:&quot;setLogLevel&quot;,&quot;params&quot;:[&quot;DEBUG; TRACE:discv5,libp2p; REQUIRED:none; DISABLED:none&quot;] }' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#setgraffiti" id="setgraffiti">setGraffiti</a></h3>
<p>Set the graffiti bytes that will be included in proposed blocks. The graffiti bytes can be
specified as an UTF-8 encoded string or as an 0x-prefixed hex string specifying raw bytes.</p>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:&quot;id&quot;,&quot;method&quot;:&quot;setGraffiti&quot;,&quot;params&quot;:[&quot;Mr F was here&quot;] }' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#geteth1chain" id="geteth1chain">getEth1Chain</a></h3>
<p>Get the list of Eth1 blocks that the beacon node is currently storing in memory.</p>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:&quot;id&quot;,&quot;method&quot;:&quot;getEth1Chain&quot;,&quot;params&quot;:[] }' -H 'Content-Type: application/json' localhost:9190 -s | jq '.result'
</code></pre>
<h3><a class="header" href="#geteth1proposaldata" id="geteth1proposaldata">getEth1ProposalData</a></h3>
<p>Inspect the eth1 data that the beacon node would produce if it was tasked to produce a block for the current slot.</p>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:&quot;id&quot;,&quot;method&quot;:&quot;getEth1ProposalData&quot;,&quot;params&quot;:[] }' -H 'Content-Type: application/json' localhost:9190 -s | jq '.result'
</code></pre>
<h3><a class="header" href="#debug_getchronosfutures" id="debug_getchronosfutures">debug_getChronosFutures</a></h3>
<p>Get the current list of live async futures in the process - compile with <code>-d:chronosFutureTracking</code> to enable.</p>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:&quot;id&quot;,&quot;method&quot;:&quot;debug_getChronosFutures&quot;,&quot;params&quot;:[] }' -H 'Content-Type: application/json' localhost:9190 -s | jq '.result | (.[0] | keys_unsorted) as $keys | $keys, map([.[ $keys[] ]])[] | @csv'
</code></pre>
<h3><a class="header" href="#debug_getgossipsubpeers" id="debug_getgossipsubpeers">debug_getGossipSubPeers</a></h3>
<p>Get the current list of live async futures in the process - compile with <code>-d:chronosFutureTracking</code> to enable.</p>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:&quot;id&quot;,&quot;method&quot;:&quot;debug_getGossipSubPeers&quot;,&quot;params&quot;:[] }' -H 'Content-Type: application/json' localhost:9190 -s | jq '.result'
</code></pre>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/api.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#rest-api" id="rest-api">REST API</a></h1>
<p>Nimbus supports the <a href="https://ethereum.github.io/beacon-APIs/">common REST API</a> for runtime communication. To enable it, use the <code>--rest</code> option when starting the beacon node, then access the API from http://localhost:5052/. The port and listening address can be further configured through the options <code>--rest-port</code> and <code>--rest-address</code>.</p>
<p>The API is a REST interface, accessed via HTTP. The API should not, unless protected by additional security layers, be exposed to the public Internet as the API includes multiple endpoints which could open your node to denial-of-service (DoS) attacks through endpoints triggering heavy processing.</p>
<p>The beacon node (BN) maintains the state of the beacon chain by communicating with other beacon nodes in the Ethereum network. Conceptually, it does not maintain keypairs that participate with the beacon chain.</p>
<p>The validator client (VC) is a conceptually separate entity which utilizes private keys to perform validator related tasks, called &quot;duties&quot;, on the beacon chain. These duties include the production of beacon blocks and signing of attestations.</p>
<blockquote>
<p>Please note that using a validator client with a Nimbus beacon node requires the node to be launched with the <code>--subscribe-all-subnets</code> option. This limitation will be removed in Nimbus 1.6.</p>
</blockquote>
<p>The goal of this specification is to promote interoperability between various beacon node implementations.</p>
<h2><a class="header" href="#specification" id="specification">Specification</a></h2>
<p>The specification is documented <a href="https://ethereum.github.io/beacon-APIs/">here</a>.</p>
<p>See the Readme <a href="https://github.com/ethereum/beacon-apis">here</a>.</p>
<h2><a class="header" href="#quickly-test-your-tooling-against-nimbus" id="quickly-test-your-tooling-against-nimbus">Quickly test your tooling against Nimbus</a></h2>
<p>The <a href="https://nimbus.guide/rest-api.html">Nimbus REST api</a> is now available from:</p>
<ul>
<li>http://testing.mainnet.beacon-api.nimbus.team/</li>
<li>http://unstable.mainnet.beacon-api.nimbus.team/</li>
<li>http://unstable.prater.beacon-api.nimbus.team/</li>
</ul>
<p>Note that right now these are very much unstable testing instances. They may be unresponsive at times - so <strong>please do not rely on them for validation</strong>. We may also disable them at any time.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/rest-api.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#command-line-options-1" id="command-line-options-1">Command line options</a></h1>
<p>You can pass any <code>nimbus_beacon_node</code> options to the <code>prater</code> and <code>mainnet</code> scripts. For example, if you want to launch Nimbus on mainnet with different base ports than the default <code>9000/udp</code> and <code>9000/tcp</code>, say <code>9100/udp</code> and <code>9100/tcp</code>, run:</p>
<pre><code>./run-mainnet-beacon-node.sh --tcp-port=9100 --udp-port=9100
</code></pre>
<p>To see a list of the command line options availabe to you, with descriptions, run:</p>
<pre><code>build/./nimbus_beacon_node --help
</code></pre>
<p>You should see the following output:</p>
<pre><code>Usage:

nimbus_beacon_node [OPTIONS]... command

The following options are available:

     --log-level               Sets the log level for process and topics (e.g. &quot;DEBUG;
                               TRACE:discv5,libp2p; REQUIRED:none; DISABLED:none&quot;) [=INFO].
     --log-file                Specifies a path for the written Json log file.
     --network                 The Eth2 network to join [=mainnet].
 -d, --data-dir                The directory where nimbus will store all blockchain data.
     --validators-dir          A directory containing validator keystores.
     --secrets-dir             A directory containing validator keystore passwords.
     --wallets-dir             A directory containing wallet files.
     --web3-url                URL of the Web3 server to observe Eth1.
     --non-interactive         Do not display interative prompts. Quit on missing
                               configuration.
     --netkey-file             Source of network (secp256k1) private key file
                               (random|&lt;path&gt;) [=random].
     --insecure-netkey-password  Use pre-generated INSECURE password for network private key
                               file [=false].
     --agent-string            Node agent string which is used as identifier in network.
     --subscribe-all-subnets   Subscribe to all attestation subnet topics when gossiping.
 -b, --bootstrap-node          Specifies one or more bootstrap nodes to use when connecting
                               to the network.
     --bootstrap-file          Specifies a line-delimited file of bootstrap Ethereum network
                               addresses.
     --listen-address          Listening address for the Ethereum LibP2P and Discovery v5
                               traffic [=0.0.0.0].
     --tcp-port                Listening TCP port for Ethereum LibP2P traffic [=9000].
     --udp-port                Listening UDP port for node discovery [=9000].
     --max-peers               The maximum number of peers to connect to [=160].
     --nat                     Specify method to use for determining public address. Must be
                               one of: any, none, upnp, pmp, extip:&lt;IP&gt;.
     --enr-auto-update         Discovery can automatically update its ENR with the IP
                               address and UDP port as seen by other nodes it communicates
                               with. This option allows to enable/disable this
                               functionality.
     --weak-subjectivity-checkpoint  Weak subjectivity checkpoint in the format
                               block_root:epoch_number.
     --finalized-checkpoint-state  SSZ file specifying a recent finalized state.
     --finalized-checkpoint-block  SSZ file specifying a recent finalized block.
     --node-name               A name for this node that will appear in the logs. If you set
                               this to 'auto', a persistent automatically generated ID will
                               be selected for each --data-dir folder.
     --graffiti                The graffiti value that will appear in proposed blocks. You
                               can use a 0x-prefixed hex encoded string to specify raw
                               bytes.
     --verify-finalization     Specify whether to verify finalization occurs on schedule,
                               for testing.
     --stop-at-epoch           A positive epoch selects the epoch at which to stop.
     --metrics                 Enable the metrics server [=false].
     --metrics-address         Listening address of the metrics server [=127.0.0.1].
     --metrics-port            Listening HTTP port of the metrics server [=8008].
     --status-bar              Display a status bar at the bottom of the terminal screen.
     --status-bar-contents     Textual template for the contents of the status bar.
     --rpc                     Enable the JSON-RPC server [=false].
     --rpc-port                HTTP port for the JSON-RPC service [=9190].
     --rpc-address             Listening address of the RPC server [=127.0.0.1].
     --in-process-validators   Disable the push model (the beacon node tells a signing
                               process with the private keys of the validators what to sign
                               and when) and load the validators in the beacon node itself.
     --discv5                  Enable Discovery v5 [=true].
     --dump                    Write SSZ dumps of blocks, attestations and states to data
                               dir [=false].
     --direct-peer             The list of priviledged, secure and known peers to connect
                               and maintain the connection to, this requires a not random
                               netkey-file. In the complete multiaddress format like:
                               /ip4/&lt;address&gt;/tcp/&lt;port&gt;/p2p/&lt;peerId-public-key&gt;. Peering
                               agreements are established out of band and must be
                               reciprocal..
     --doppelganger-detection  Whether to detect whether another validator is be running the
                               same validator keys [=true].

...
</code></pre>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/options.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#migration-options-advanced" id="migration-options-advanced">Migration options (advanced)</a></h1>
<p>The main migration guide is located <a href="./migration.html">here</a>. Here we document a couple of advanced options you can use if you wish to have more fine-grained control.</p>
<h2><a class="header" href="#export-validators" id="export-validators">Export validators</a></h2>
<p>The default command for exporting your slashing protection history is:</p>
<pre><code>build/nimbus_beacon_node slashingdb export database.json
</code></pre>
<p>This will export your history in the correct format to <code>database.json</code>.</p>
<p>On success you will have a message similar to:</p>
<pre><code>Exported slashing protection DB to 'database.json'
Export finished: '$HOME/.cache/nimbus/BeaconNode/validators/slashing_protection.sqlite3' into 'interchange.json'
</code></pre>
<h3><a class="header" href="#export-from-a-specific-validators-directory" id="export-from-a-specific-validators-directory">Export from a specific validators directory</a></h3>
<p>The validator directory contains your validator's setup.</p>
<pre><code>build/nimbus_beacon_node slashingdb export database.json --validators-dir=path/to/validatorsdir/
</code></pre>
<h3><a class="header" href="#export-from-a-specific-data-directory" id="export-from-a-specific-data-directory">Export from a specific data directory</a></h3>
<p>The data directory (<code>data-dir</code>) contains your beacon node setup.</p>
<pre><code>build/nimbus_beacon_node slashingdb export database.json --data-dir=path/to/datadir/
</code></pre>
<h3><a class="header" href="#partial-exports" id="partial-exports">Partial exports</a></h3>
<p>You can perform a partial export by specifying the public key of the relevant validator you wish to export.</p>
<pre><code>build/nimbus_beacon_node slashingdb export database.json --validator=0xb5da853a51d935da6f3bd46934c719fcca1bbf0b493264d3d9e7c35a1023b73c703b56d598edf0239663820af36ec615
</code></pre>
<p>If you wish to export multiple validators, you must specify the <code>--validator</code> option multiple times.</p>
<h2><a class="header" href="#import-validators" id="import-validators">Import validators</a></h2>
<p>The default command for importing your validator's slashing protection history into the database is:</p>
<pre><code>build/nimbus_beacon_node slashingdb import database.json
</code></pre>
<h3><a class="header" href="#import-to-a-specific-validators-directory" id="import-to-a-specific-validators-directory">Import to a specific validators directory</a></h3>
<p>The validator directory contains your validator's setup.</p>
<pre><code>build/nimbus_beacon_node slashingdb import database.json --validators-dir=path/to/validatorsdir/
</code></pre>
<h3><a class="header" href="#import-to-a-specific-data-directory" id="import-to-a-specific-data-directory">Import to a specific data directory</a></h3>
<p>The data directory contains your beacon node's setup.</p>
<pre><code>build/nimbus_beacon_node slashingdb import database.json --data-dir=path/to/datadir/
</code></pre>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/migration-options.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#troubleshooting" id="troubleshooting">Troubleshooting</a></h1>
<blockquote>
<p>⚠️  The commands on this page refer to the Prater testnet. If you're running mainnet, replace <code>prater</code> with <code>mainnet</code> in the commands below. If you're running <code>pyrmont</code> relace <code>prater</code> with <code>pyrmont</code>.</p>
</blockquote>
<p>As it stands, we are continuously making improvements to both stability and memory usage. So please make sure you keep your client up to date! This means restarting your node and updating your software regularly from the <code>stable</code> branch. If you can't find a solution to your problem here, feel free to hit us up on our <a href="https://discord.com/invite/XRxWahP">discord</a>!</p>
<blockquote>
<p><strong>Note:</strong> While the <code>stable</code> branch of the <code>nimbus-eth2</code> repository is more stable, the latest updates happen in the <code>unstable</code> branch which is (usually) merged into master every week on Tuesday. If you choose to run Nimbus directly from the <code>unstable</code> branch, be prepared for instabilities!</p>
</blockquote>
<h3><a class="header" href="#console-hanging-for-too-long-on-update" id="console-hanging-for-too-long-on-update">Console hanging for too long on update</a></h3>
<p>To update and restart, run <code>git pull</code>, <code>make update</code>, followed by <code>make nimbus_beacon_node</code>:</p>
<pre><code>cd nimbus-eth2
git pull
make update # Update dependencies
make nimbus_beacon_node # Rebuild beacon node
./run-prater-beacon-node.sh # Restart using same keys as last run
</code></pre>
<p>If you find that <code>make update</code> causes the console to hang for too long, try running <code>make update V=1</code> or <code>make update V=2</code> instead (these will print a more verbose output to the console which may make it easier to diagnose the problem).</p>
<blockquote>
<p><strong>Note:</strong> rest assured that when you restart the beacon node, the software will resume from where it left off, using the validator keys you have already imported.</p>
</blockquote>
<h3><a class="header" href="#starting-over-after-importing-wrong-keys" id="starting-over-after-importing-wrong-keys">Starting over after importing wrong keys</a></h3>
<p>The directory that stores the blockchain data of the testnet is <code>build/data/prater_shared_0</code> (if you're connecting to another testnet, replace <code>prater</code> with that testnet's name). If you've imported the wrong keys, and wish to start over, delete this repository.</p>
<h3><a class="header" href="#sync-problems" id="sync-problems">Sync problems</a></h3>
<p>If you’re experiencing sync problems,  we recommend running <code>make clean-prater</code> to delete the database and restart your sync (make sure you’ve updated to the latest <code>master</code> first though).</p>
<blockquote>
<p><strong>Warning</strong>: <code>make clean-prater</code> will erase all of your syncing progress so far, so it should only be used as a last resort -- if your client gets stuck for a long time (because it's unable to find the right chain and/or stay with the same head value) and a normal restart doesn't improve things.</p>
</blockquote>
<h3><a class="header" href="#running-out-of-storage" id="running-out-of-storage">Running out of storage</a></h3>
<p>If you're running out of storage, you can <a href="https://blog.ethereum.org/2015/06/26/state-tree-pruning/">prune</a> the database of unnecessary blocks and states by running:</p>
<pre><code>make ncli_db
build/ncli_db pruneDatabase --db=build/data/shared_prater_0/db --verbose=true
</code></pre>
<p>This will create <code>nbc_pruned.sqlite3</code> files in <code>build/data/shared_prater_0/db</code>, which you can use in place of the orginal <code>nbc.sqlite3</code> files. We recommend you hold onto the originals until you've verified that your validator is behaving as expected with the pruned files.</p>
<p>Options:</p>
<ul>
<li><code>--keepOldStates</code> (boolean):  Keep pre-finalisation states; defaults to <code>true</code>.</li>
<li><code>--verbose</code> (boolean): Print a more verbose output to the console; defaults to <code>false</code>.</li>
</ul>
<h3><a class="header" href="#low-peer-count" id="low-peer-count">Low peer count</a></h3>
<p>If you're experiencing a low peer count, you may be behind a firewall. Try restarting your client and passing <code>--nat:extip:$EXT_IP_ADDRESS</code> as an option to <code>./run-prater-beacon-node.sh</code>, where <code>$EXT_IP_ADDRESS</code> is your real IP. For example, if your real IP address is <code>35.124.65.104</code>, you'd run:</p>
<pre><code>./run-prater-beacon-node.sh --nat:extip:35.124.65.104
</code></pre>
<h3><a class="header" href="#no-peers-for-topic-skipping-publish-logs" id="no-peers-for-topic-skipping-publish-logs">No peers for topic, skipping publish (logs)</a></h3>
<p>If you see a message that looks like the following in your logs:</p>
<pre><code>NOT 2021-07-11 17:17:00.928+00:00 No peers for topic, skipping publish       topics=&quot;libp2p gossipsub&quot; tid=284547 file=gossipsub.nim:457 peersOnTopic=0 connectedPeers=0 topic=/eth2/b5303f2a/beacon_attestation_0/ssz_snappy
</code></pre>
<p>It could be that your max peer count (<code>--max-peers</code>) has been set too low. In order to ensure your attestations are published correctly, we recommend setting <code>--max-peers</code> to 60, at the <em>very least</em>.</p>
<blockquote>
<p>Note that Nimbus manages peers slightly differently to other clients (we automatically connect to more peers than we actually use, in order not to have to do costly reconnects). As such, <code>--max-peers</code> is set to 160 by default.</p>
</blockquote>
<p>If this doesn't fix the problem, please double check your node is able to <a href="./health.html">receive incoming connections</a>.</p>
<h3><a class="header" href="#nocommand-does-not-accept-arguments" id="nocommand-does-not-accept-arguments">noCommand does not accept arguments</a></h3>
<p>If, on start,  you see <code>The command 'noCommand' does not accept arguments</code></p>
<p>Double check to see if your command line flags are in the correct format, i.e. <code>--foo=bar</code>, <code>--baz</code>, or <code>--foo-bar=qux</code>.</p>
<h3><a class="header" href="#address-already-in-use-error" id="address-already-in-use-error">Address already in use error</a></h3>
<p>If you're seeing an error that looks like:</p>
<pre><code>Error: unhandled exception: (98) Address already in use [TransportOsError]
</code></pre>
<p>It's probably because you're running multiple validators -- and the default base port <code>9000</code> is already in use.</p>
<p>To change the base port, run:</p>
<pre><code>./run-prater-beacon-node.sh --tcp-port=9100 --udp-port=9100
</code></pre>
<p>(You can replace <code>9100</code> with a port of your choosing)</p>
<h3><a class="header" href="#catching-up-on-validator-duties" id="catching-up-on-validator-duties">Catching up on validator duties</a></h3>
<p>If you're being flooded with <code>Catching up on validator duties</code> messages, then your CPU is probably too slow to run Nimbus. Please check that your setup matches our <a href="./hardware.html">system requirements</a>.</p>
<h3><a class="header" href="#local-timer-is-broken-error" id="local-timer-is-broken-error">Local timer is broken error</a></h3>
<p>If you cannot start your validator because you are seeing logs that look like the following:</p>
<pre><code>WRN 2021-01-08 06:32:46.975+00:00 Local timer is broken or peer's status information is invalid topics=&quot;beacnde&quot; tid=120491 file=sync_manager.nim:752 wall_clock_slot=271961 remote_head_slot=271962 local_head_slot=269254 peer=16U*mELUgu index=0 tolerance_value=0 peer_speed=2795.0 peer_score=200
</code></pre>
<p>This is likely due to the fact that your local clock is off. To compare your local time with a internet time, run:</p>
<pre><code>cat &lt;/dev/tcp/time.nist.gov/13 ; date -u 
</code></pre>
<p>The first line in the output will give you internet time. And the second line will give you the time according to your machine. These shouldn't be more than a second apart.</p>
<h3><a class="header" href="#eth1-chain-monitor-failure" id="eth1-chain-monitor-failure">Eth1 chain monitor failure</a></h3>
<p>If you see an error that looks like the following:</p>
<pre><code>{&quot;lvl&quot;:&quot;ERR&quot;,&quot;ts&quot;:&quot;2021-05-11 09:05:53.547+00:00&quot;,&quot;msg&quot;:&quot;Eth1 chain monitoring failure, restarting&quot;,&quot;topics&quot;:&quot;eth1&quot;,&quot;tid&quot;:1,&quot;file&quot;:&quot;eth1_monitor.nim:1158&quot;,&quot;err&quot;:&quot;Trying to access value with err: Failed to setup web3 connection&quot;}
</code></pre>
<p>It's because your node can't connect to the web3 provider you have specified. Please double check that you've correctly specified your provider. If you haven't done so already, we recommend <a href="web3-backup.html">adding a backup</a>.</p>
<h3><a class="header" href="#discovered-new-external-address-warning-log" id="discovered-new-external-address-warning-log">Discovered new external address warning log</a></h3>
<pre><code class="language-console">WRN 2021-03-11 13:26:25.943-08:00
Discovered new external address but ENR auto update is off
topics=&quot;discv5&quot; tid=77655 file=protocol.nim:940 majority=Some(&quot;myIPaddressHere&quot;:9000) previous=None[Address]
</code></pre>
<p>This message is displayed regularly when Nimbus canot detect your correct IP address. It may be a sign that you have a dynamic IP address that keeps changing. Or that Nimbus is unable to get your IP from the <a href="https://en.wikipedia.org/wiki/Universal_Plug_and_Play">UPnP</a>.</p>
<p>The first step is to try relaunching the beacon node with the <code>--enr-auto-update</code> option.</p>
<p>If that doesn't fix the problem, double check that your <a href="https://www.yougetsignal.com/tools/open-ports/">ports are open</a> and that you have <a href="https://www.computerhope.com/issues/ch001201.htm">port forwarding</a> enabled on your gateway (assuming that you are behind a <a href="https://en.wikipedia.org/wiki/Network_address_translation">NAT</a>).</p>
<p>See our page on <a href="./health.html">monitoring the health of your node</a> for more.</p>
<h2><a class="header" href="#raspberry-pi" id="raspberry-pi">Raspberry Pi</a></h2>
<h3><a class="header" href="#trouble-transferring-data-tofrom-usb30-ssds" id="trouble-transferring-data-tofrom-usb30-ssds">Trouble transferring data to/from USB3.0 SSDs</a></h3>
<p>We have seen reports of extremely degraded performance when using several types of USB3.0 to SSD adapter or when using native USB3.0 disk drives. <a href="https://www.raspberrypi.org/forums/viewtopic.php?t=245931#p1501426">This post</a> details why there is a difference in behaviour from models prior to Pi 4 and the recommended workaround.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/troubleshooting.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#for-developers" id="for-developers">For Developers</a></h1>
<p>This page contains tips and tricks for developers, further resources, along with information on how to set up your build environment on your platform.</p>
<p>Before building Nimbus for the first time, make sure to install the <a href="./install.html">prerequisites</a>.</p>
<h2><a class="header" href="#code-style" id="code-style">Code style</a></h2>
<p>The code follows the <a href="https://status-im.github.io/nim-style-guide/">Status Nim Style Guide</a>.</p>
<h2><a class="header" href="#branch-lifecycle" id="branch-lifecycle">Branch lifecycle</a></h2>
<p>The git repository has 3 main branches, <code>stable</code>, <code>testing</code> and <code>unstable</code> as well as feature and bugfix branches.</p>
<h3><a class="header" href="#unstable" id="unstable">Unstable</a></h3>
<p>The <code>unstable</code> branch contains features and bugfixes that are actively being tested and worked on.</p>
<ul>
<li>Features and bugfixes are generally pushed to individual branches, each with their own pull request against the <code>unstable</code> branch.</li>
<li>Once the branch has been reviewed and passed CI, the developer or reviewer merges the branch to <code>unstable</code>.</li>
<li>The <code>unstable</code> branch is regularly deployed to the Nimbus prater and pyrmont fleets where additional testing happens.</li>
</ul>
<h3><a class="header" href="#testing" id="testing">Testing</a></h3>
<p>The <code>testing</code> branch contains features and bugfixes that have gone through CI and initial testing on the <code>unstable</code> branch and are ready to be included in the next release.</p>
<ul>
<li>After testing a bugfix or feature on <code>unstable</code>, the features and fixes that are planned for the next release get merged to the <code>testing</code> branch either by the release manager or team members.</li>
<li>The <code>testing</code> branch is regularly deployed to the Nimbus prater and pyrmont fleet as well as a smaller mainnet fleet.</li>
<li>The branch should remain release-ready at most times.</li>
</ul>
<h3><a class="header" href="#stable" id="stable">Stable</a></h3>
<p>The <code>stable</code> branch tracks the latest released version of Nimbus and is suitable for mainnet staking.</p>
<h2><a class="header" href="#build-system" id="build-system">Build system</a></h2>
<h3><a class="header" href="#windows-1" id="windows-1">Windows</a></h3>
<pre><code class="language-bash">mingw32-make # this first invocation will update the Git submodules
</code></pre>
<p>You can now follow the instructions in this this book by replacing <code>make</code> with <code>mingw32-make</code> (you should run <code>mingw32</code> regardless of whether you're running 32-bit or 64-bit architecture):</p>
<pre><code class="language-bash">mingw32-make test # run the test suite
</code></pre>
<h3><a class="header" href="#linux-macos" id="linux-macos">Linux, macOS</a></h3>
<p>After cloning the repo:</p>
<pre><code class="language-bash"># Build nimbus_beacon_node and all the tools, using 4 parallel Make jobs
make -j4

# Run tests
make test

# Update to latest version
git pull
make update
</code></pre>
<h2><a class="header" href="#environment" id="environment">Environment</a></h2>
<p>Nimbus comes with a build environment similar to Python venv - this helps ensure that the correct version of Nim is used and that all dependencies can be found.</p>
<pre><code class="language-bash">./env.sh bash # start a new interactive shell with the right env vars set
which nim
nim --version # Nimbus is tested and supported on 1.2.12 at the moment

# or without starting a new interactive shell:
./env.sh which nim
./env.sh nim --version

# Start Visual Studio code with environment
./env.sh code

</code></pre>
<h2><a class="header" href="#makefile-tips-and-tricks-for-developers" id="makefile-tips-and-tricks-for-developers">Makefile tips and tricks for developers</a></h2>
<ul>
<li>build all those tools known to the Makefile:</li>
</ul>
<pre><code class="language-bash"># $(nproc) corresponds to the number of cores you have
make -j $(nproc)
</code></pre>
<ul>
<li>build a specific tool:</li>
</ul>
<pre><code class="language-bash">make state_sim
</code></pre>
<ul>
<li>you can control the Makefile's verbosity with the V variable (defaults to 0):</li>
</ul>
<pre><code class="language-bash">make V=1 # verbose
make V=2 test # even more verbose
</code></pre>
<ul>
<li>same for the <a href="https://github.com/status-im/nim-chronicles#chronicles_log_level">Chronicles log level</a>:</li>
</ul>
<pre><code class="language-bash">make LOG_LEVEL=DEBUG bench_bls_sig_agggregation # this is the default
make LOG_LEVEL=TRACE nimbus_beacon_node # log everything
</code></pre>
<ul>
<li>pass arbitrary parameters to the Nim compiler:</li>
</ul>
<pre><code class="language-bash">make NIMFLAGS=&quot;-d:release&quot;
</code></pre>
<ul>
<li>you can freely combine those variables on the <code>make</code> command line:</li>
</ul>
<pre><code class="language-bash">make -j$(nproc) NIMFLAGS=&quot;-d:release&quot; USE_MULTITAIL=yes eth2_network_simulation
</code></pre>
<ul>
<li>don't use the <a href="https://github.com/status-im/nimbus-eth2/pull/745">lightweight stack tracing implementation from nim-libbacktrace</a>:</li>
</ul>
<pre><code class="language-bash">make USE_LIBBACKTRACE=0 # expect the resulting binaries to be 2-3 times slower
</code></pre>
<ul>
<li>disable <code>-march=native</code> because you want to run the binary on a different machine than the one you're building it on:</li>
</ul>
<pre><code class="language-bash">make NIMFLAGS=&quot;-d:disableMarchNative&quot; nimbus_beacon_node
</code></pre>
<ul>
<li>disable link-time optimisation (LTO):</li>
</ul>
<pre><code class="language-bash">make NIMFLAGS=&quot;-d:disableLTO&quot; nimbus_beacon_node
</code></pre>
<ul>
<li>build a static binary</li>
</ul>
<pre><code class="language-bash">make NIMFLAGS=&quot;--passL:-static&quot; nimbus_beacon_node
</code></pre>
<ul>
<li>publish a book using <a href="https://github.com/rust-lang/mdBook">mdBook</a> from sources in &quot;docs/&quot; to GitHub pages:</li>
</ul>
<pre><code class="language-bash">make publish-book
</code></pre>
<ul>
<li>create a binary distribution</li>
</ul>
<pre><code class="language-bash">make dist
</code></pre>
<ul>
<li>test the binaries</li>
</ul>
<pre><code class="language-bash">make dist-test
</code></pre>
<h2><a class="header" href="#multi-client-interop-scripts" id="multi-client-interop-scripts">Multi-client interop scripts</a></h2>
<p><a href="https://github.com/eth2-clients/multinet">This repository</a> contains a set of scripts used by the client implementation teams to test interop between the clients (in certain simplified scenarios). It mostly helps us find and debug issues.</p>
<h2><a class="header" href="#stress-testing-the-client-by-limiting-the-cpu-power" id="stress-testing-the-client-by-limiting-the-cpu-power">Stress-testing the client by limiting the CPU power</a></h2>
<pre><code class="language-bash">make prater CPU_LIMIT=20
</code></pre>
<p>The limiting is provided by the cpulimit utility, available on Linux and macOS.
The specified value is a percentage of a single CPU core. Usually 1 - 100, but can be higher on multi-core CPUs.</p>
<h2><a class="header" href="#build-and-run-the-local-beacon-chain-simulation" id="build-and-run-the-local-beacon-chain-simulation">Build and run the local beacon chain simulation</a></h2>
<p>The beacon chain simulation runs several beacon nodes on the local machine, attaches several local validators to each, and builds a beacon chain between them.</p>
<p>To run the simulation:</p>
<pre><code class="language-bash">make update
make eth2_network_simulation
</code></pre>
<p>To clean the previous run's data:</p>
<pre><code class="language-bash">make clean_eth2_network_simulation_all
</code></pre>
<p>To change the number of validators and nodes:</p>
<pre><code class="language-bash"># Clear data files from your last run and start the simulation with a new genesis block:
make VALIDATORS=192 NODES=6 USER_NODES=1 eth2_network_simulation
</code></pre>
<p>If you’d like to see the nodes running on separated sub-terminals inside one big window, install <a href="https://www.vanheusden.com/multitail/index.php">Multitail</a> (if you're on a Mac, follow the instructions <a href="https://brewinstall.org/Install-multitail-on-Mac-with-Brew/">here</a>), then:</p>
<pre><code>USE_MULTITAIL=&quot;yes&quot; make eth2_network_simulation
</code></pre>
<p>You’ll get something like this (click for full size):</p>
<p><a href="https://i.imgur.com/Pc99VDO.png"><img src="https://i.imgur.com/Pc99VDO.png" alt="" /></a></p>
<p>You can find out more about the beacon node simulation <a href="https://our.status.im/nimbus-development-update-03/#beaconsimulation">here</a>.</p>
<h2><a class="header" href="#build-and-run-the-local-state-transition-simulation" id="build-and-run-the-local-state-transition-simulation">Build and run the local state transition simulation</a></h2>
<p>This simulation is primarily designed for researchers, but we'll cover it briefly here in case you're curious :)</p>
<p>The <a href="https://github.com/ethereum/annotated-spec/blob/master/phase0/beacon-chain.md#beacon-chain-state-transition-function">state transition</a> simulation quickly runs the beacon chain state transition function in isolation and outputs JSON snapshots of the state (directly to the <code>nimbus-eth2</code> directory). It runs without networking and blocks are processed without slot time delays.</p>
<pre><code class="language-bash"># build the state simulator, then display its help (&quot;-d:release&quot; speeds it
# up substantially, allowing the simulation of longer runs in reasonable time)
make NIMFLAGS=&quot;-d:release&quot; state_sim
build/state_sim --help
</code></pre>
<p>Use the output of the <code>help</code> command to pass desired values to the simulator - experiment with changing the number of slots, validators, , etc. to get different results.</p>
<p>The most important options are:</p>
<ul>
<li><code>slots</code> : the number of slots to run the simulation for (default 192)</li>
<li><code>validators</code>: the number of validators (default 6400)</li>
<li><code>attesterRatio</code>: the expected fraction of attesters that actually do their work for every slot (default 0.73)</li>
<li><code>json_interval</code>: how often JSON snapshots of the state are outputted (default every 32 slots -- or once per epoch)</li>
</ul>
<p>For example, to run the state simulator for 384 slots, with 20,000 validators, and an average of 66% of attesters doing their work every slot, while outputting snapshots of the state twice per epoch, run:</p>
<pre><code>build/state_sim --slots=384 --validators=20000 --attesterRatio=0.66 --json_interval=16
</code></pre>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/developers.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#contribute" id="contribute">Contribute</a></h1>
<p>Follow these steps to contribute to this book!</p>
<p>We use an utility tool called mdBook to create online books from Markdown files.</p>
<h2><a class="header" href="#before-you-start" id="before-you-start">Before You Start</a></h2>
<ol>
<li>Install mdBook from <a href="https://github.com/rust-lang/mdBook">here</a>.</li>
<li>Clone the repository by <code>git clone https://github.com/status-im/nimbus-eth2.git</code>.</li>
<li>Go to where the Markdown files are located by <code>cd docs/the_nimbus_book/</code>.</li>
</ol>
<h2><a class="header" href="#real-time-update-and-preview-changes" id="real-time-update-and-preview-changes">Real-Time Update and Preview Changes</a></h2>
<ol>
<li>Run <code>mdbook serve</code> in the terminal.</li>
<li>Preview the book at <a href="http://localhost:3000">http://localhost:3000</a>.</li>
</ol>
<h2><a class="header" href="#build-and-deploy" id="build-and-deploy">Build and Deploy</a></h2>
<p>The first step is to submit a pull request to the <a href="https://github.com/status-im/nimbus-eth2/tree/unstable">unstable branch</a>.
Then, after it is merged, do the following under our main repository:</p>
<ol>
<li><code>cd nimbus-eth2</code></li>
<li><code>git checkout unstable</code></li>
<li><code>git pull</code></li>
<li><code>make update</code> (This is to update the submodules to the latest version)</li>
<li><code>make publish-book</code></li>
</ol>
<h2><a class="header" href="#troubleshooting-1" id="troubleshooting-1">Troubleshooting</a></h2>
<p>If you see file conflicts in the pull request, this may due to that you have created your new branch from an old version of the <code>unstable</code> branch. Update your new branch using the following commands:</p>
<pre><code>git checkout unstable
git pull
make update
git checkout readme
git merge unstable
# use something like &quot;git mergetool&quot; to resolve conflicts, then read the instructions for completing the merge (usually just a `git commit`)
# check the output of &quot;git diff unstable&quot;
</code></pre>
<p>Thank you so much for your help to the decentralized and open source community. :)</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/contribute.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#resources-1" id="resources-1">Resources</a></h1>
<ul>
<li>
<p><a href="https://discord.com/invite/e84CFep">ethstaker discord</a>: great place for tips and discussions</p>
</li>
<li>
<p><a href="https://pyrmont.launchpad.ethereum.org">Validator launchpad</a>: to send Pyrmont deposits</p>
</li>
<li>
<p><a href="https://pyrmont.beaconcha.in/">Beacon chain explorer</a> : to monitor testnet health</p>
</li>
<li>
<p><a href="https://discord.com/invite/XRxWahP">Nimbus discord</a> : best place to ask questions and to stay up-to-date with critical updates</p>
</li>
<li>
<p><a href="https://www.reddit.com/r/ethereum/comments/gf3nhg/ethereum_on_arm_raspberry_pi_4_images_release/">Ethereum on ARM: Raspberry Pi 4 image + tutorial</a> : turn your Raspberry Pi 4 into an eth1 or eth2 node just by flashing the MicroSD card</p>
</li>
</ul>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/resources.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#binary-distribution-internals" id="binary-distribution-internals">Binary distribution internals</a></h1>
<h2><a class="header" href="#reproducibility" id="reproducibility">Reproducibility</a></h2>
<p>The binaries we build in GitHub Actions and distribute in <a href="https://github.com/status-im/nimbus-eth2/releases">our releases</a> come
from an intricate process meant to ensure <a href="https://reproducible-builds.org/">reproducibility</a>.</p>
<p>While the ability to produce the same exact binaries from the corresponding Git
commits is a good idea for any open source project, it is a requirement
for software that deals with digital tokens of significant value.</p>
<h2><a class="header" href="#docker-containers-for-internal-use" id="docker-containers-for-internal-use">Docker containers for internal use</a></h2>
<p>The easiest way to guarantee that users are able to replicate
our binaries for themselves is to give them the same software environment we used in CI. Docker
containers fit the bill, so everything starts with the architecture- and
OS-specific containers in <code>docker/dist/base_image/</code>.</p>
<p>These images contain all the packages we need, are built and published once (to
Docker Hub), and are then reused as the basis for temporary Docker
images where the <code>nimbus-eth2</code> build is carried out.</p>
<p>These temporary images are controlled by Dockerfiles in <code>docker/dist/</code>. Since
we're not publishing them anywhere, we can customize them to the system
they run on (we ensure they use the host's UID/GID, the host's QEMU static
binaries, etc); they get access to the source code through the use of external volumes.</p>
<h2><a class="header" href="#build-process" id="build-process">Build process</a></h2>
<p>It all starts from the GitHub actions in <code>.github/workflows/release.yml</code>. There
is a different job for each supported OS-architecture combination and they all
run in parallel (ideally).</p>
<p>Once all those CI jobs complete successfully, a GitHub release draft is created
and all the distributable archives are uploaded to it. A list of checksums for
the main binaries is inserted in the release description. That draft needs to
be manually published.</p>
<p>The build itself is triggered by a Make target. E.g.: <code>make dist-amd64</code>. This invokes
<code>scripts/make_dist.sh</code> which builds the corresponding Docker container from
<code>docker/dist/</code> and runs it with the Git repository's top directory as an external
volume.</p>
<p>The entry point for that container is <code>docker/dist/entry_point.sh</code> and that's
where you'll find the Make invocations needed to finally build the software and
create distributable tarballs.</p>
<h2><a class="header" href="#docker-images-for-end-users" id="docker-images-for-end-users">Docker images for end users</a></h2>
<p>Configured in <code>.github/workflows/release.yml</code> (only for Linux AMD64, ARM and
ARM64): we unpack the distribution tarball and copy its content into a third
type of Docker image - meant for end users and defined by
<code>docker/dist/binaries/Dockerfile.amd64</code> (and related).</p>
<p>We then publish that to <a href="https://hub.docker.com/r/statusim/nimbus-eth2">Docker Hub</a>.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/distribution_internals.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#prater-testnet-what-you-should-know" id="prater-testnet-what-you-should-know">Prater testnet: what you should know</a></h1>
</br>
</br>
<ul>
<li>
<p>The Prater launchpad is live here (use it to make a deposit): <a href="https://prater.launchpad.ethereum.org/en/">https://prater.launchpad.ethereum.org/en/</a></p>
</li>
<li>
<p>To run a Prater node after making a deposit, <a href="./keep-updated.html">update Nimbus</a>  and then execute <code>./run-prater-beacon-node.sh</code></p>
</li>
</ul>
</br>
</br>
<hr />
</br>
</br>
<p>The latest Eth2 testnet, <a href="https://twitter.com/Butta_eth/status/1374383003011452937">Prater</a>, is now open to the public.</p>
<p>Prater's objective is to ensure that the network remains stable under a higher load than we've seen so far on mainnet -- the genesis count for Prater was 210k (almost double the size of the Beacon Chain Mainnet).</p>
<p>To elaborate a little, we want to make sure that the network is able to function properly with considerably more validators: increasing the number of validators increases the state size, increases the amount of work done to process that state, and increases the number of messages being gossipped on the network; blocks also become fuller, which explores a new kind of constraint as clients need to optimise better for attestation inclusion.</p>
<p>Both Pyrmont and Prater will co-exist for the foreseeable future (we will be testing the <a href="https://github.com/ethereum/consensus-specs/releases/tag/v1.1.2">Altair</a> fork on Pyrmont, for example). However, in the medium term we expect Prater to replace Pyrmont.</p>
<p>If you're already validating with Nimbus, you should start thinking about transitioning from Pyrmont to Prater at some point over the next few weeks. However, there is no immediate rush, so please do so at your own convenience. If you're new to Nimbus then you could try starting directly with Prater.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/prater.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#security-audit" id="security-audit">Security Audit</a></h1>
<h2><a class="header" href="#summary" id="summary">Summary</a></h2>
<p>Nimbus has undergone an extensive, multi-vendor (<a href="https://consensys.net/diligence/">ConsenSys Diligence</a>, <a href="https://www.nccgroup.com/uk/">NCC Group</a>, and <a href="https://www.trailofbits.com/">Trail of Bits</a>) security assessment over a period of many months. During that process, we were notified of several issues within the codebase. These issues have been addressed and the overall security of the Nimbus-eth2 software has been drastically improved.</p>
<p>Additionally, as a result of the work done from our security vendors, we are now working to incorporate many new security processes and tooling to improve our ability to find security issues in the future.</p>
<p>For more information on the issues and how they were addressed, the interested reader should direct themselves to the <a href="https://github.com/status-im/nimbus-eth2/labels?q=audit">scoped repositories</a>; all reported issues and their mitigations are open to the public.</p>
<h2><a class="header" href="#history" id="history">History</a></h2>
<p>Back in May of last year (2020), Status and the Nimbus Team posted a <a href="https://our.status.im/nimbus-eth2-0-security-audit-request-for-proposal/">Request for Proposal</a> document regarding the <a href="https://our.status.im/what-is-a-security-audit-when-you-should-get-one-and-how-to-prepare/">security assessment</a> of the <a href="https://github.com/status-im/nimbus-eth2">nimbus-eth2</a> repository (formerly <code>nim-beacon-chain</code>) and its software dependencies.</p>
<p>After thoroughly vetting and weighing the submitted proposals, 3 security vendors  were chosen to review the codebase for a timeline of approximately <a href="https://notes.status.im/7D73zDPyQxOUWw4ejEn6oQ?view#">3 months</a>.</p>
<p>The kickoff announcement can be read <a href="https://our.status.im/nimbus-beacon-chain-assessment-kickoff/">here</a>.</p>
<p>We separated the codebase into sub-topics with various tasks. These tasks were then broken up and assigned to the vendor(s) with the required expertise.</p>
<p>The desired deliverable outcome was GitHub issues in the repositories under review, which is a shift from the standard “assessment report” provided by most security assessments in the space. You can view the issues <a href="https://github.com/status-im/nimbus-eth2/labels?q=audit">here</a>.</p>
<p>To be very clear, we did not engage in this security assessment to get a stamp of approval from the security community. All of the effort put into creating this process and engaging the community was in the service of increasing the level of security and code quality of the Nimbus software.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/audit.md">Edit this file on GitHub.</a></footer><h1><a class="header" href="#frequently-asked-questions" id="frequently-asked-questions">Frequently Asked Questions</a></h1>
<h2><a class="header" href="#general" id="general">General</a></h2>
<h3><a class="header" href="#how-do-i-check-which-version-of-nimbus-im-currently-running" id="how-do-i-check-which-version-of-nimbus-im-currently-running">How do I check which version of Nimbus I'm currently running?</a></h3>
<p>If you've enabled RPC, the version is available via</p>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_node_version&quot;,&quot;params&quot;:[],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s
</code></pre>
<p>You can also run <code>build/nimbus_beacon_node --version</code></p>
<h3><a class="header" href="#why-are-metrics-not-working" id="why-are-metrics-not-working">Why are metrics not working?</a></h3>
<p>The metrics server is disabled by default, enable it by passing <code>--metrics</code> to the run command:</p>
<pre><code>./run-mainnet-beacon-node.sh --metrics ...
</code></pre>
<h3><a class="header" href="#why-does-my-validator-miss-two-epochs-of-attestations-after-restarting" id="why-does-my-validator-miss-two-epochs-of-attestations-after-restarting">Why does my validator miss two epochs of attestations after restarting?</a></h3>
<p>When a validator is started (or restarted) it prudently listens for 2 epochs for attestations from a validator with the same index (a doppelganger), before sending an attestation itself.</p>
<p>In sum, it's a simple way of handling the case where one validator comes online with the same key as another validator that's already online (i.e one device was started without switching the other off).</p>
<p>While this strategy requires the client to wait two whole epochs on restart before attesting, a couple of missed attestations is a very minor price to pay in exchange for significantly reducing the risk of an accidental slashing.</p>
<p>You can think of it as a small penalty that you pay only on first launch and restarts. When you take into account the total runtime of your validator, the impact should be minimal.</p>
<p>While we strongly recommend it, you can disable it with an explicit flag (<code>--doppelganger-detection=false</code>) if you don't plan on moving your setup.</p>
<h3><a class="header" href="#whats-the-best-way-to-stress-test-my-eth1--eth2-setup-before-committing-with-real-eth" id="whats-the-best-way-to-stress-test-my-eth1--eth2-setup-before-committing-with-real-eth">What's the best way to stress test my eth1 + eth2 setup before committing with real ETH?</a></h3>
<p>We recommend <a href="./quick-start.html">running a Nimbus beacon node</a> on <a href="./prater.html">Prater</a> and a mainnet <a href="./eth1.html">eth1 client</a> on the same machine.</p>
<p>To stress test it, <code>add--subscribe-all-subnets</code> to the <a href="./options.html">beacon node options</a>. This represents more or less the maximum load you could have on eth2.</p>
<h3><a class="header" href="#how-do-i-add-an-additional-validator" id="how-do-i-add-an-additional-validator">How do I add an additional validator?</a></h3>
<p>To add an additional validator, just follow <a href="./keys.html">the same steps</a> as you did when you added your first. You'll have to restart the beacon node for the changes to take effect.</p>
<blockquote>
<p>Note that a single Nimbus instance is able to handle multiple validators.</p>
</blockquote>
<h2><a class="header" href="#networking" id="networking">Networking</a></h2>
<h3><a class="header" href="#how-can-i-improve-my-peer-count" id="how-can-i-improve-my-peer-count">How can I improve my peer count?</a></h3>
<p>See <a href="./networking.html">here</a>.</p>
<h3><a class="header" href="#how-do-i-fix-the-discovered-new-external-address-warning-log" id="how-do-i-fix-the-discovered-new-external-address-warning-log">How do I fix the discovered new external address warning log?</a></h3>
<pre><code>WRN 2021-03-15 02:23:37.569+00:00 Discovered new external address but ENR auto update is off topics=&quot;discv5&quot;...
</code></pre>
<p>It's possible that your ISP has changed your dynamic IP address without you knowing.</p>
<p>The first thing to do it to try relaunching the beacon node with <code>--enr-auto-update</code> (pass it as an option in the command line).</p>
<p>If this doesn't fix the problem, the next thing to do is to check your external (public) IP address and detect open ports on your connection - you can use <a href="https://www.yougetsignal.com/tools/open-ports/">https://www.yougetsignal.com/tools/open-ports/</a>.  Note that Nimbus <code>TCP</code> and <code>UDP</code> ports are both set to <code>9000</code> by default.</p>
<p>See <a href="./health.html#set-up-port-forwarding">here</a>, for how to set up port forwarding.</p>
<h2><a class="header" href="#folder-permissions" id="folder-permissions">Folder Permissions</a></h2>
<p>To protect against key loss, Nimbus requires that files and directories be owned by the user running the application. Furthermore, they should not be readable by others.</p>
<p>It may happen that the wrong permissions are applied, particularly when creating the directories manually.</p>
<p>The following errors are a sign of this:</p>
<ul>
<li><code>Data folder has insecure ACL</code></li>
<li><code>Data directory has insecure permissions</code></li>
<li><code>File has insecure permissions</code></li>
</ul>
<p>Here is how to fix them.</p>
<h3><a class="header" href="#linux-bsd--macos" id="linux-bsd--macos">Linux/ BSD / MacOS</a></h3>
<p>Run:</p>
<pre><code># Changing ownership to `user:group` for all files/directories in &lt;data-dir&gt;.
chown user:group -R &lt;data-dir&gt;
# Set permissions to (rwx------ 0700) for all directories starting from &lt;data-dir&gt;
find &lt;data-dir&gt; -type d -exec chmod 700 {} \;

# Set permissions to (rw------- 0600) for all files inside &lt;data-dir&gt;/validators
find &lt;data-dir&gt;/validators -type f -exec chmod 0600 {} \;

# Set permissions to (rw------- 0600) for all files inside &lt;data-dir&gt;/secrets
find &lt;data-dir&gt;/secrets -type f -exec chmod 0600 {} \;

</code></pre>
<p>In sum:</p>
<ul>
<li>
<p>Directories <code>&lt;data-dir&gt;</code>, <code>&lt;data-dir&gt;/validators</code>, <code>&lt;data-dir&gt;/secrets</code> MUST be owned by user and have <code>rwx------</code> or <code>0700</code>permissions set.</p>
</li>
<li>
<p>Files stored inside <code>&lt;data-dir&gt;</code>, <code>&lt;data-dir&gt;/validators</code>, <code>/secrets</code> MUST be owned by user and have <code>rw------</code> or <code>0600</code> permission set.</p>
</li>
</ul>
<h3><a class="header" href="#windows-2" id="windows-2">Windows</a></h3>
<p>From inside <code>Git Bash</code>, run:</p>
<pre><code># Set permissions for all the directories starting from &lt;data-dir&gt;
find &lt;data-dir&gt; -type d -exec icacls {} /inheritance:r /grant:r $USERDOMAIN\\$USERNAME:\(OI\)\(CI\)\(F\) \;

# Set permissions for all the files inside &lt;data-dir&gt;/validators
find &lt;data-dir&gt;/validators -type f -exec icacls {} /inheritance:r /grant:r $USERDOMAIN\\$USERNAME:\(F\) \;

# Set permissions for all the files inside &lt;data-dir&gt;/secrets
find &lt;data-dir&gt;/secrets -type f -exec icacls {} /inheritance:r /grant:r $USERDOMAIN\\$USERNAME:\(F\) \;
</code></pre>
<blockquote>
<p><strong>N.B.</strong> Make sure you run the above from inside <code>Git Bash</code>, these commands  will not work from inside the standard Windows Command Prompt. If you don't already have a <code>Git Bash</code> shell, you'll need to install <a href="https://gitforwindows.org/">Git for Windows</a>.</p>
</blockquote>
<p>In sum:</p>
<ul>
<li>
<p>Directories <code>&lt;data-dir&gt;</code>, <code>&lt;data-dir&gt;/validators</code>, <code>&lt;data-dir&gt;/secrets</code> MUST be owned by user and have permissions set for the user only (OI)(CI)(F). All inherited permissions should be removed.</p>
</li>
<li>
<p>Files which are stored inside <data-dir>, <data-dir>/validators, <data-dir>/secrets MUST be owned by user and have permissions set for the user only (F). All inherited permissions should be removed.</p>
</li>
</ul>
<h2><a class="header" href="#validating" id="validating">Validating</a></h2>
<h3><a class="header" href="#what-exactly-is-a-validator" id="what-exactly-is-a-validator">What exactly is a validator?</a></h3>
<p>A validator is an entity that participates in the consensus of the Ethereum 2.0 protocol.</p>
<p>Or in plain english, a human running a computer process. This process proposes and vouches for new blocks to be added to the blockchain.</p>
<p>In other words, <strong>you can think of a validator as a voter for new blocks.</strong> The more votes a block gets, the more likely it is to be added to the chain.</p>
<p>Importantly, a validator's vote is weighted by the amount it has at stake.</p>
<h3><a class="header" href="#what-is-the-deposit-contract" id="what-is-the-deposit-contract">What is the deposit contract?</a></h3>
<p>You can think of it as a transfer of funds between Ethereum 1.0 accounts and Ethereum 2.0 validators.</p>
<p>It specifies who is staking, who is validating, how much is being staked, and who can withdraw the funds.</p>
<h3><a class="header" href="#why-do-validators-need-to-have-funds-at-stake" id="why-do-validators-need-to-have-funds-at-stake">Why do validators need to have funds at stake?</a></h3>
<p>Validators need to have funds at stake so they can be penalized for behaving dishonestly.</p>
<p>In other words, to keep them honest, their actions need to have financial consequences.</p>
<h3><a class="header" href="#how-much-eth-does-a-validator-need-to-stake" id="how-much-eth-does-a-validator-need-to-stake">How much ETH does a validator need to stake?</a></h3>
<p>Before a validator can start to secure the network, he or she needs to stake <strong>32 ETH</strong>. This forms the validator's initial balance.</p>
<h3><a class="header" href="#is-there-any-advantage-to-having-more-than-32-eth-at-stake" id="is-there-any-advantage-to-having-more-than-32-eth-at-stake">Is there any advantage to having more than 32 ETH at stake?</a></h3>
<p>No. There is no advantage to having more than 32 ETH staked.</p>
<p>Limiting the maximum stake to 32 ETH encourages decentralization of power as it prevents any single validator from having an excessively large vote on the state of the chain.</p>
<blockquote>
<p>Remember that a validator’s vote is weighted by the amount it has at stake.</p>
</blockquote>
<h3><a class="header" href="#can-i-stop-my-validator-for-a-few-days-and-then-start-it-back-up-again" id="can-i-stop-my-validator-for-a-few-days-and-then-start-it-back-up-again">Can I stop my validator for a few days and then start it back up again?</a></h3>
<p>Yes but, under normal conditions, you will lose an amount of ETH roughly equivalent to the amount of ETH you would have gained in that period. In other words, if you stood to earn ≈0.01 ETH, you would instead be penalised ≈0.01 ETH.</p>
<h3><a class="header" href="#i-want-to-switch-my-validator-keys-to-another-machine-how-long-do-i-need-to-wait-to-avoid-getting-slashed" id="i-want-to-switch-my-validator-keys-to-another-machine-how-long-do-i-need-to-wait-to-avoid-getting-slashed">I want to switch my validator keys to another machine, how long do I need to wait to avoid getting slashed?</a></h3>
<p>We recommend waiting 2 epochs (around 15 minutes), before restarting Nimbus on a different machine.</p>
<h3><a class="header" href="#when-should-i-top-up-my-validators-balance" id="when-should-i-top-up-my-validators-balance">When should I top up my validator's balance?</a></h3>
<p>The answer to this question very much depends on how much ETH you have at your disposal.</p>
<p>You should certainly top up if your balance is close to 16 ETH: this is to ensure you don't get removed from the validator set (which automatically happens if your balance falls below 16 ETH).</p>
<p>At the other end of the spectrum, if your balance is closer to 31 ETH, it's probably not worth your while adding the extra ETH required to get back to 32.</p>
<h3><a class="header" href="#when-can-i-withdraw-my-funds-and-whats-the-difference-between-exiting-and-withdrawing" id="when-can-i-withdraw-my-funds-and-whats-the-difference-between-exiting-and-withdrawing">When can I withdraw my funds, and what's the difference between exiting and withdrawing?</a></h3>
<p>You can signal your intent to stop validating by signing a voluntary exit message with your validator.</p>
<p>However, bear in mind that in Phase 0, once you've exited, there's no going back.</p>
<p>There's no way for you to activate your validator again, and you won't be able to transfer or withdraw your funds until at least Phase 1.5 (which means your funds will remain inaccessible until then).</p>
<h3><a class="header" href="#how-are-validators-incentivized-to-stay-active-and-honest" id="how-are-validators-incentivized-to-stay-active-and-honest">How are validators incentivized to stay active and honest?</a></h3>
<p>In addition to being penalized for being offline, validators are penalized for behaving maliciously – for example attesting to invalid or contradicting blocks.</p>
<p>On the other hand, they are rewarded for proposing / attesting to blocks that are included in the chain.</p>
<p>The key concept is the following:</p>
<ul>
<li>Rewards are given for actions that help the network reach consensus</li>
<li>Minor penalties are given for inadvertant actions (or inactions) that hinder consensus</li>
<li>And major penalities -- or <strong>slashings</strong> -- are given for malicious actions</li>
</ul>
<p>In other words, validators that maximize their rewards also provide the greatest benefit to the network as a whole.</p>
<h3><a class="header" href="#how-are-rewardspenalties-issued" id="how-are-rewardspenalties-issued">How are rewards/penalties issued?</a></h3>
<p>Remember that each validator has its own balance -- with the initial balance outlined in the deposit contract.</p>
<p>This balance is updated periodically by the Ethereum network rules as the validator carries (or fails to carry) out his or her responsibilities.</p>
<p>Put another way, rewards and penalties are reflected in the validator's balance over time.</p>
<h3><a class="header" href="#how-often-are-rewardspenalties-issued" id="how-often-are-rewardspenalties-issued">How often are rewards/penalties issued?</a></h3>
<p>Approximately every six and a half minutes -- a period of time known as an epoch.</p>
<p>Every epoch, the network measures the actions of each validator and issues rewards or penalties appropriately.</p>
<h3><a class="header" href="#how-large-are-the-rewardspenalties" id="how-large-are-the-rewardspenalties">How large are the rewards/penalties?</a></h3>
<p>There is no easy answer to this question as there are many factors that go into this calculation.</p>
<p>Arguably the most impactful factor on rewards earned for validating transactions is the total amount of stake in the network. In other words, the total amount of validators. Depending on this figure the max annual return rate for a validator can be anywhere between 2 and 20%.</p>
<p>Given a fixed total number of validators, the rewards/penalties predominantly scale with the balance of the validator -- attesting with a higher balance results in larger rewards/penalties whereas attesting with a lower balance results in lower rewards/penalties.</p>
<blockquote>
<p>Note however that this scaling mechanism works in a non-obvious way. To understand the precise details of how it works requires understanding a concept called <strong>effective balance</strong>. If you're not yet familiar with this concept, we recommend you read through this <a href="https://www.attestant.io/posts/understanding-validator-effective-balance/">excellent post</a>.</p>
</blockquote>
<h3><a class="header" href="#why-do-rewards-depend-on-the-total-number-of-validators-in-the-network" id="why-do-rewards-depend-on-the-total-number-of-validators-in-the-network">Why do rewards depend on the total number of validators in the network?</a></h3>
<p>Block rewards are calculated using a sliding scale based on the total amount of ETH staked on the network.</p>
<p>In plain english: if the total amount of ETH staked is low, the reward (interest rate) is high, but as the total stake rises, the reward (interest) paid out to each validator starts to fall.</p>
<p>Why a sliding scale? While we won't get into the gory details here, the basic intution is that there needs to be a minimum number of validators (and hence a minimum amount of ETH staked) for the network to function properly. So, to incentivize more validators to join, it's important that the interest rate remains high until this minimum number is reached.</p>
<p>Afterwards, validators are still encouraged to join (the more validators the more decentralized the network), but it's not absolutely essential that they do so (so the interest rate can fall).</p>
<h3><a class="header" href="#how-badly-will-a-validator-be-penalized-for-being-offline" id="how-badly-will-a-validator-be-penalized-for-being-offline">How badly will a validator be penalized for being offline?</a></h3>
<p>It depends. In addition to <a href="https://www.attestant.io/posts/understanding-validator-effective-balance/#the-impact-of-effective-balance-on-validating">the impact of effective balance</a> there are two important scenarios to be aware of:</p>
<ol>
<li>
<p>Being offline while a supermajority (2/3) of validators is still online leads to relatively small penalties as there are still enough validators online for the chain to finalize. <strong>This is the expected scenario.</strong></p>
</li>
<li>
<p>Being offline at the same time as more than 1/3 of the total number of validators leads to harsher penalties, since blocks do not finalize anymore. <strong>This scenario is very extreme and unlikely to happen.</strong></p>
</li>
</ol>
<blockquote>
<p>Note that in the second (unlikely) scenario, validators stand to progressively lose up to 50% (16 ETH) of their stake over 21 days. After 21 days they are ejected out of the validator pool. This ensures that blocks start finalizing again at some point.</p>
</blockquote>
<h3><a class="header" href="#how-great-does-an-honest-validators-uptime-need-to-be-for-it-to-be-net-profitable" id="how-great-does-an-honest-validators-uptime-need-to-be-for-it-to-be-net-profitable">How great does an honest validator's uptime need to be for it to be net profitable?</a></h3>
<p>Overall, validators are expected to be net profitable as long as their uptime is <a href="https://blog.ethereum.org/2020/01/13/validated-staking-on-eth2-1-incentives/">greater than 50%</a>.</p>
<p>This means that validators need not go to extreme lengths with backup clients or redundant internet connections as the repercussions of being offline are not so severe.</p>
<h3><a class="header" href="#how-much-will-a-validator-be-penalized-for-acting-maliciously" id="how-much-will-a-validator-be-penalized-for-acting-maliciously">How much will a validator be penalized for acting maliciously?</a></h3>
<p>Again, it depends. Behaving maliciously – for example attesting to invalid or contradicting blocks, will lead to a validator's stake being slashed.</p>
<p>The minimum amount that can be slashed is 1 ETH, but <strong>this number increases if other validators are slashed at the same time.</strong></p>
<p>The idea behind this is to minimize the losses from honest mistakes, but strongly disincentivize coordinated attacks.</p>
<h3><a class="header" href="#what-exactly-is-slashing" id="what-exactly-is-slashing">What exactly is slashing?</a></h3>
<p>Slashing has two purposes: (1) to make it prohibitively expensive to attack eth2, and (2) to stop validators from being lazy by checking that they actually perform their duties. Slashing a validator is to destroy (a portion of) the validator’s stake if they act in a provably destructive manner.</p>
<p>Validators that are slashed are prevented from participating in the protocol further and are forcibly exited.</p>
<h3><a class="header" href="#what-happens-i-lose-my-signing-key" id="what-happens-i-lose-my-signing-key">What happens I lose my signing key?</a></h3>
<p>If the signing key is lost, the validator can no longer propose or attest.</p>
<p>Over time, the validator's balance will decrease as he or she is punished for not participating in the consensus process. When the validator's balance reaches 16 Eth, he or she will be automatically exited from the validator pool.</p>
<blockquote>
<p>However, all is not lost. Assuming validators derive their keys using <a href="https://eips.ethereum.org/EIPS/eip-2334">EIP2334</a> (as per the default onboarding flow)then <strong>validators can always recalculate their signing key from their withdrawal key</strong>.</p>
</blockquote>
<p>The 16 Eth can then be withdrawn -- with the withdrawal key -- after a delay of around a day.</p>
<blockquote>
<p>Note that this delay can be longer if many others are exiting or being kicked out at the same time.</p>
</blockquote>
<h3><a class="header" href="#what-happens-if-i-lose-my-withdrawal-key" id="what-happens-if-i-lose-my-withdrawal-key">What happens if I lose my withdrawal key?</a></h3>
<p>If the withdrawal key is lost, there is no way to obtain access to the funds held by the validator.</p>
<p>As such, it's a good idea to create your keys from mnemonics which act as another backup. This will be the default for validators who join via this site's onboarding process.</p>
<h3><a class="header" href="#what-happens-if-my-withdrawal-key-is-stolen" id="what-happens-if-my-withdrawal-key-is-stolen">What happens if my withdrawal key is stolen?</a></h3>
<p>If the withdrawal key is stolen, the thief can transfer the validator’s balance, but only once the validator has exited.</p>
<p>If the signing key is not under the thief’s control, the thief cannot exit the validator.</p>
<p>The user with the signing key could attempt to quickly exit the validator and then transfer the funds -- with the withdrawal key -- before the thief.</p>
<h3><a class="header" href="#why-two-keys-instead-of-one" id="why-two-keys-instead-of-one">Why two keys instead of one?</a></h3>
<p>In a nutshell, security. The signing key must be available at all times. As such, it will need to be held online. Since anything online is vulnerable to being hacked, it's not a good idea to use the same key for withdrawals.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/status-im/nimbus-eth2/edit/unstable/docs/the_nimbus_book/src/faq.md">Edit this file on GitHub.</a></footer>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
